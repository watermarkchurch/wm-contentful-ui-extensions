<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="https://contentful.github.io/ui-extensions-sdk/cf-extension.css">
    <script src="https://contentful.github.io/ui-extensions-sdk/cf-extension-api.js"></script>
    <style>
       #wm-logo {
        width: 16px;
        position: absolute;
        right: 0;
        top: 0;
       }
    </style>
    <title>kvp-editor@0.1.9</title>
  <style type="text/css">

/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkaXN0L2t2cC1lZGl0b3Ivc3R5bGUuY3NzIiwic291cmNlc0NvbnRlbnQiOltdLCJzb3VyY2VSb290IjoiIn0=*/</style></head>
  <body>
    <div id="wm-logo" title="kvp-editor@0.1.9"><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 119.2 119.2"><path fill="#009dba" d="M84.9 0H34.4A34.4 34.4 0 0 0 0 34.4v50.5a34.46 34.46 0 0 0 34.4 34.4h50.5a34.46 34.46 0 0 0 34.4-34.4V34.4A34.53 34.53 0 0 0 84.9 0zM34.4 9.5h50.5a24.8 24.8 0 0 1 24.8 24.8v18.2c-9.3 7.8-18.8 8.9-28.9 7.5l5.3-20a4.75 4.75 0 0 0-9.2-2.4s-2.7 10-5.5 20.6c-.7-.2-1.3-.3-2-.5l-5-20a4.72 4.72 0 0 0-4.6-3.6 4.72 4.72 0 0 0-4.6 3.6s-1.7 6.9-3.8 15.3c-1.7-.4-3.4-.7-5.1-1-2.2-8-4-14.4-4-14.4a4.78 4.78 0 0 0-9.2 2.6l3 10.7H34a53.57 53.57 0 0 0-24.4 5.8V34.4A24.82 24.82 0 0 1 34.4 9.5zm50.5 100.2H34.4A24.8 24.8 0 0 1 9.6 84.9v-17A41.77 41.77 0 0 1 34 60.4c1.6 0 3.2.1 4.8.2l6 21.6a4.82 4.82 0 0 0 9.3-.1s2-8.1 4.4-17.4l2.1.6 1.2.3c2.2 8.9 4.1 16.5 4.1 16.5a4.72 4.72 0 0 0 4.6 3.6 4.63 4.63 0 0 0 4.6-3.5l3.4-12.7c10.4 1.6 20.9 1.1 31.3-5.1V85a25 25 0 0 1-24.9 24.7z"/></svg></img></div>
    
    <div id="react-root"></div>
  <script type="text/javascript">!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([,function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"h",function(){return l}),n.d(t,"createElement",function(){return l}),n.d(t,"cloneElement",function(){return u}),n.d(t,"Component",function(){return L}),n.d(t,"render",function(){return T}),n.d(t,"rerender",function(){return d}),n.d(t,"options",function(){return r});var r={},o=[],i=[];function l(e,t){var n,l,a,s,u=i;for(s=arguments.length;s-- >2;)o.push(arguments[s]);for(t&&null!=t.children&&(o.length||o.push(t.children),delete t.children);o.length;)if((l=o.pop())&&void 0!==l.pop)for(s=l.length;s--;)o.push(l[s]);else"boolean"==typeof l&&(l=null),(a="function"!=typeof e)&&(null==l?l="":"number"==typeof l?l=String(l):"string"!=typeof l&&(a=!1)),a&&n?u[u.length-1]+=l:u===i?u=[l]:u.push(l),n=a;var p=new function(){};return p.nodeName=e,p.children=u,p.attributes=null==t?void 0:t,p.key=null==t?void 0:t.key,void 0!==r.vnode&&r.vnode(p),p}function a(e,t){for(var n in t)e[n]=t[n];return e}var s="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function u(e,t){return l(e.nodeName,a(a({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var p=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,c=[];function f(e){!e._dirty&&(e._dirty=!0)&&1==c.push(e)&&(r.debounceRendering||s)(d)}function d(){var e,t=c;for(c=[];e=t.pop();)e._dirty&&O(e)}function _(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function v(e){var t=a({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function h(e){var t=e.parentNode;t&&t.removeChild(e)}function m(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===p.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var l=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,y,l):e.removeEventListener(t,y,l),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var a=o&&t!==(t=t.replace(/^xlink\:?/,""));null==r||!1===r?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function y(e){return this._listeners[e.type](r.event&&r.event(e)||e)}var g=[],b=0,C=!1,x=!1;function N(){for(var e;e=g.pop();)r.afterMount&&r.afterMount(e),e.componentDidMount&&e.componentDidMount()}function w(e,t,n,r,o,i){b++||(C=null!=o&&void 0!==o.ownerSVGElement,x=null!=e&&!("__preactattr_"in e));var l=S(e,t,n,r,i);return o&&l.parentNode!==o&&o.appendChild(l),--b||(x=!1,i||N()),l}function S(e,t,n,r,o){var i=e,l=C;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),k(e,!0))),i.__preactattr_=!0,i;var a,s,u=t.nodeName;if("function"==typeof u)return function(e,t,n,r){var o=e&&e._component,i=o,l=e,a=o&&e._componentConstructor===t.nodeName,s=a,u=v(t);for(;o&&!s&&(o=o._parentComponent);)s=o.constructor===t.nodeName;o&&s&&(!r||o._component)?(V(o,u,3,n,r),e=o.base):(i&&!a&&(B(i),e=l=null),o=E(t.nodeName,u,n),e&&!o.nextBase&&(o.nextBase=e,l=null),V(o,u,1,n,r),e=o.base,l&&e!==l&&(l._component=null,k(l,!1)));return e}(e,t,n,r);if(C="svg"===u||"foreignObject"!==u&&C,u=String(u),(!e||!_(e,u))&&(a=u,(s=C?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,i=s,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),k(e,!0)}var p=i.firstChild,c=i.__preactattr_,f=t.children;if(null==c){c=i.__preactattr_={};for(var d=i.attributes,y=d.length;y--;)c[d[y].name]=d[y].value}return!x&&f&&1===f.length&&"string"==typeof f[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=f[0]&&(p.nodeValue=f[0]):(f&&f.length||null!=p)&&function(e,t,n,r,o){var i,l,a,s,u,p=e.childNodes,c=[],f={},d=0,v=0,m=p.length,y=0,g=t?t.length:0;if(0!==m)for(var b=0;b<m;b++){var C=p[b],x=C.__preactattr_,N=g&&x?C._component?C._component.__key:x.key:null;null!=N?(d++,f[N]=C):(x||(void 0!==C.splitText?!o||C.nodeValue.trim():o))&&(c[y++]=C)}if(0!==g)for(var b=0;b<g;b++){s=t[b],u=null;var N=s.key;if(null!=N)d&&void 0!==f[N]&&(u=f[N],f[N]=void 0,d--);else if(!u&&v<y)for(i=v;i<y;i++)if(void 0!==c[i]&&(w=l=c[i],U=o,"string"==typeof(P=s)||"number"==typeof P?void 0!==w.splitText:"string"==typeof P.nodeName?!w._componentConstructor&&_(w,P.nodeName):U||w._componentConstructor===P.nodeName)){u=l,c[i]=void 0,i===y-1&&y--,i===v&&v++;break}u=S(u,s,n,r),a=p[b],u&&u!==e&&u!==a&&(null==a?e.appendChild(u):u===a.nextSibling?h(a):e.insertBefore(u,a))}var w,P,U;if(d)for(var b in f)void 0!==f[b]&&k(f[b],!1);for(;v<=y;)void 0!==(u=c[y--])&&k(u,!1)}(i,f,n,r,x||null!=c.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||m(e,r,n[r],n[r]=void 0,C);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||m(e,r,n[r],n[r]=t[r],C)}(i,t.attributes,c),C=l,i}function k(e,t){var n=e._component;n?B(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||h(e),P(e))}function P(e){for(e=e.lastChild;e;){var t=e.previousSibling;k(e,!0),e=t}}var U={};function E(e,t,n){var r,o=U[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),L.call(r,t,n)):((r=new L(t,n)).constructor=e,r.render=M),o)for(var i=o.length;i--;)if(o[i].constructor===e){r.nextBase=o[i].nextBase,o.splice(i,1);break}return r}function M(e,t,n){return this.constructor(e,n)}function V(e,t,n,o,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===r.syncComponentUpdates&&e.base?f(e):O(e,1,i)),e.__ref&&e.__ref(e))}function O(e,t,n,o){if(!e._disable){var i,l,s,u=e.props,p=e.state,c=e.context,f=e.prevProps||u,d=e.prevState||p,_=e.prevContext||c,h=e.base,m=e.nextBase,y=h||m,C=e._component,x=!1;if(h&&(e.props=f,e.state=d,e.context=_,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,p,c)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(u,p,c),e.props=u,e.state=p,e.context=c),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!x){i=e.render(u,p,c),e.getChildContext&&(c=a(a({},c),e.getChildContext()));var S,P,U=i&&i.nodeName;if("function"==typeof U){var M=v(i);(l=C)&&l.constructor===U&&M.key==l.__key?V(l,M,1,c,!1):(S=l,e._component=l=E(U,M,c),l.nextBase=l.nextBase||m,l._parentComponent=e,V(l,M,0,c,!1),O(l,1,n,!0)),P=l.base}else s=y,(S=C)&&(s=e._component=null),(y||1===t)&&(s&&(s._component=null),P=w(s,i,c,n||!h,y&&y.parentNode,!0));if(y&&P!==y&&l!==C){var L=y.parentNode;L&&P!==L&&(L.replaceChild(P,y),S||(y._component=null,k(y,!1)))}if(S&&B(S),e.base=P,P&&!o){for(var T=e,W=e;W=W._parentComponent;)(T=W).base=P;P._component=T,P._componentConstructor=T.constructor}}if(!h||n?g.unshift(e):x||(e.componentDidUpdate&&e.componentDidUpdate(f,d,_),r.afterUpdate&&r.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);b||o||N()}}function B(e){r.beforeUnmount&&r.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?B(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,h(t),function(e){var t=e.constructor.name;(U[t]||(U[t]=[])).push(e)}(e),P(t)),e.__ref&&e.__ref(null)}function L(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function T(e,t,n){return w(n,e,{},!1,t,!1)}a(L.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=a({},n)),a(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),f(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),O(this,2)},render:function(){}});var W={h:l,createElement:l,cloneElement:u,Component:L,render:T,rerender:d,options:r};t.default=W},function(e,t){e.exports=window.contentfulExtension},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};t.__esModule=!0;var l=n(3),a=n(2);n(1);l.init(function(e){a.render(a.h(s,i({},e)),document.getElementById("react-root"))});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onSlugChange=function(e){this.props.field.setValue(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join("/").replace(/\/{2,}/,"/")}(this.state.parentSlug,e.newValue))},t.prototype.componentDidMount=function(){var e=this;this.setState({fieldValue:this.props.field.getValue()});this.props.space.getEntries({content_type:"page","fields.subpages.sys.id":this.props.entry.getSys().id}).then(function(t){if(!(t.items.length<=0)){var n=t.items[0].fields.slug["en-US"],r=e.state.fieldValue;r=u(r=u(r,n),"/"),e.setState({parentSlug:n,fieldValue:r})}}).catch(function(e){console.error("Error querying!",e)})},t.prototype.render=function(){var e=this.state;e.fieldValue,e.parentSlug;return a.h("div",null,a.h("h2",null,"KVP Editor"))},t}(a.Component);function u(e,t){for(;e.startsWith(t);)e=e.substring(t.length);return e}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3ByZWFjdC9kaXN0L3ByZWFjdC5lc20uanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwid2luZG93LmNvbnRlbnRmdWxFeHRlbnNpb25cIiIsIndlYnBhY2s6Ly8vLi9zcmMva3ZwLWVkaXRvci9pbmRleC50c3giXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fd2VicGFja19leHBvcnRzX18iLCJvcHRpb25zIiwic3RhY2siLCJFTVBUWV9DSElMRFJFTiIsImgiLCJub2RlTmFtZSIsImF0dHJpYnV0ZXMiLCJsYXN0U2ltcGxlIiwiY2hpbGQiLCJzaW1wbGUiLCJjaGlsZHJlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInB1c2giLCJwb3AiLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJrZXkiLCJ2bm9kZSIsImV4dGVuZCIsIm9iaiIsInByb3BzIiwiZGVmZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJiaW5kIiwic2V0VGltZW91dCIsImNsb25lRWxlbWVudCIsInNsaWNlIiwiSVNfTk9OX0RJTUVOU0lPTkFMIiwiaXRlbXMiLCJlbnF1ZXVlUmVuZGVyIiwiY29tcG9uZW50IiwiX2RpcnR5IiwiZGVib3VuY2VSZW5kZXJpbmciLCJyZXJlbmRlciIsImxpc3QiLCJyZW5kZXJDb21wb25lbnQiLCJpc05hbWVkTm9kZSIsIm5vZGUiLCJub3JtYWxpemVkTm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImdldE5vZGVQcm9wcyIsImRlZmF1bHRQcm9wcyIsInJlbW92ZU5vZGUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJzZXRBY2Nlc3NvciIsIm9sZCIsImlzU3ZnIiwic3R5bGUiLCJjc3NUZXh0IiwidGVzdCIsImlubmVySFRNTCIsIl9faHRtbCIsInVzZUNhcHR1cmUiLCJyZXBsYWNlIiwic3Vic3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50UHJveHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2xpc3RlbmVycyIsImUiLCJzZXRQcm9wZXJ0eSIsInJlbW92ZUF0dHJpYnV0ZSIsIm5zIiwicmVtb3ZlQXR0cmlidXRlTlMiLCJzZXRBdHRyaWJ1dGVOUyIsInNldEF0dHJpYnV0ZSIsImNsYXNzTmFtZSIsInRoaXMiLCJ0eXBlIiwiZXZlbnQiLCJtb3VudHMiLCJkaWZmTGV2ZWwiLCJpc1N2Z01vZGUiLCJoeWRyYXRpbmciLCJmbHVzaE1vdW50cyIsImFmdGVyTW91bnQiLCJjb21wb25lbnREaWRNb3VudCIsImRpZmYiLCJkb20iLCJjb250ZXh0IiwibW91bnRBbGwiLCJwYXJlbnQiLCJjb21wb25lbnRSb290Iiwib3duZXJTVkdFbGVtZW50IiwicmV0IiwiaWRpZmYiLCJhcHBlbmRDaGlsZCIsIm91dCIsInByZXZTdmdNb2RlIiwic3BsaXRUZXh0IiwiX2NvbXBvbmVudCIsIm5vZGVWYWx1ZSIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJyZWNvbGxlY3ROb2RlVHJlZSIsInZub2RlTmFtZSIsIm9yaWdpbmFsQ29tcG9uZW50Iiwib2xkRG9tIiwiaXNEaXJlY3RPd25lciIsIl9jb21wb25lbnRDb25zdHJ1Y3RvciIsImlzT3duZXIiLCJfcGFyZW50Q29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJzZXRDb21wb25lbnRQcm9wcyIsImJhc2UiLCJ1bm1vdW50Q29tcG9uZW50IiwiY3JlYXRlQ29tcG9uZW50IiwibmV4dEJhc2UiLCJidWlsZENvbXBvbmVudEZyb21WTm9kZSIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUVsZW1lbnQiLCJmaXJzdENoaWxkIiwiZmMiLCJ2Y2hpbGRyZW4iLCJhIiwibmV4dFNpYmxpbmciLCJpc0h5ZHJhdGluZyIsImoiLCJmIiwidmNoaWxkIiwib3JpZ2luYWxDaGlsZHJlbiIsImNoaWxkTm9kZXMiLCJrZXllZCIsImtleWVkTGVuIiwibWluIiwibGVuIiwiY2hpbGRyZW5MZW4iLCJ2bGVuIiwiX2NoaWxkIiwiX19rZXkiLCJ0cmltIiwiaW5zZXJ0QmVmb3JlIiwiaW5uZXJEaWZmTm9kZSIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwiYXR0cnMiLCJkaWZmQXR0cmlidXRlcyIsInVubW91bnRPbmx5IiwicmVmIiwicmVtb3ZlQ2hpbGRyZW4iLCJsYXN0Q2hpbGQiLCJuZXh0IiwicHJldmlvdXNTaWJsaW5nIiwiY29tcG9uZW50cyIsIkN0b3IiLCJpbnN0IiwicmVuZGVyIiwiQ29tcG9uZW50IiwiZG9SZW5kZXIiLCJzcGxpY2UiLCJzdGF0ZSIsIm9wdHMiLCJfZGlzYWJsZSIsIl9fcmVmIiwiY29tcG9uZW50V2lsbE1vdW50IiwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsInByZXZDb250ZXh0IiwicHJldlByb3BzIiwic3luY0NvbXBvbmVudFVwZGF0ZXMiLCJpc0NoaWxkIiwicmVuZGVyZWQiLCJjYmFzZSIsInByZXZpb3VzUHJvcHMiLCJwcmV2aW91c1N0YXRlIiwicHJldlN0YXRlIiwicHJldmlvdXNDb250ZXh0IiwiaXNVcGRhdGUiLCJpbml0aWFsQmFzZSIsImluaXRpYWxDaGlsZENvbXBvbmVudCIsInNraXAiLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJjb21wb25lbnRXaWxsVXBkYXRlIiwiZ2V0Q2hpbGRDb250ZXh0IiwidG9Vbm1vdW50IiwiY2hpbGRDb21wb25lbnQiLCJjaGlsZFByb3BzIiwiYmFzZVBhcmVudCIsImNvbXBvbmVudFJlZiIsInQiLCJ1bnNoaWZ0IiwiY29tcG9uZW50RGlkVXBkYXRlIiwiYWZ0ZXJVcGRhdGUiLCJfcmVuZGVyQ2FsbGJhY2tzIiwiYmVmb3JlVW5tb3VudCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiaW5uZXIiLCJjb2xsZWN0Q29tcG9uZW50IiwibWVyZ2UiLCJzZXRTdGF0ZSIsImNhbGxiYWNrIiwiZm9yY2VVcGRhdGUiLCJwcmVhY3QiLCJ3aW5kb3ciLCJjb250ZW50ZnVsRXh0ZW5zaW9uIiwicHJlYWN0XzEiLCJpbml0IiwiZXh0ZW5zaW9uIiwiQXBwIiwiX19hc3NpZ24iLCJnZXRFbGVtZW50QnlJZCIsIl9zdXBlciIsIl9fZXh0ZW5kcyIsIm9uU2x1Z0NoYW5nZSIsImZpZWxkIiwic2V0VmFsdWUiLCJwYXRoQXJyIiwiX2kiLCJqb2luIiwicGF0aEpvaW4iLCJwYXJlbnRTbHVnIiwibmV3VmFsdWUiLCJfdGhpcyIsImZpZWxkVmFsdWUiLCJnZXRWYWx1ZSIsInNwYWNlIiwiZ2V0RW50cmllcyIsImNvbnRlbnRfdHlwZSIsImZpZWxkcy5zdWJwYWdlcy5zeXMuaWQiLCJlbnRyeSIsImdldFN5cyIsImlkIiwiZW50cmllcyIsImZpZWxkcyIsInNsdWciLCJ0cmltU3RhcnQiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJfYSIsInRvVHJpbSIsInZhbHVlVG9SZW1vdmUiLCJzdGFydHNXaXRoIiwic2VhcmNoIiwicG9zIiwic3Vic3RyIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVB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QUFRQyxHQUM3QyxPQUFPdEssS0FBS3VLLFFBQVFELEdBQU9BLEVBQU0sRUFBSSxHQUFLQSxFQUFLRCxFQUFPaE8sVUFBWWdPIiwiZmlsZSI6ImRpc3Qva3ZwLWVkaXRvci9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCIvKiogVmlydHVhbCBET00gTm9kZSAqL1xuZnVuY3Rpb24gVk5vZGUoKSB7fVxuXG4vKiogR2xvYmFsIG9wdGlvbnNcbiAqXHRAcHVibGljXG4gKlx0QG5hbWVzcGFjZSBvcHRpb25zIHtPYmplY3R9XG4gKi9cbnZhciBvcHRpb25zID0ge1xuXG5cdC8qKiBJZiBgdHJ1ZWAsIGBwcm9wYCBjaGFuZ2VzIHRyaWdnZXIgc3luY2hyb25vdXMgY29tcG9uZW50IHVwZGF0ZXMuXG4gICpcdEBuYW1lIHN5bmNDb21wb25lbnRVcGRhdGVzXG4gICpcdEB0eXBlIEJvb2xlYW5cbiAgKlx0QGRlZmF1bHQgdHJ1ZVxuICAqL1xuXHQvL3N5bmNDb21wb25lbnRVcGRhdGVzOiB0cnVlLFxuXG5cdC8qKiBQcm9jZXNzZXMgYWxsIGNyZWF0ZWQgVk5vZGVzLlxuICAqXHRAcGFyYW0ge1ZOb2RlfSB2bm9kZVx0QSBuZXdseS1jcmVhdGVkIFZOb2RlIHRvIG5vcm1hbGl6ZS9wcm9jZXNzXG4gICovXG5cdC8vdm5vZGUodm5vZGUpIHsgfVxuXG5cdC8qKiBIb29rIGludm9rZWQgYWZ0ZXIgYSBjb21wb25lbnQgaXMgbW91bnRlZC4gKi9cblx0Ly8gYWZ0ZXJNb3VudChjb21wb25lbnQpIHsgfVxuXG5cdC8qKiBIb29rIGludm9rZWQgYWZ0ZXIgdGhlIERPTSBpcyB1cGRhdGVkIHdpdGggYSBjb21wb25lbnQncyBsYXRlc3QgcmVuZGVyLiAqL1xuXHQvLyBhZnRlclVwZGF0ZShjb21wb25lbnQpIHsgfVxuXG5cdC8qKiBIb29rIGludm9rZWQgaW1tZWRpYXRlbHkgYmVmb3JlIGEgY29tcG9uZW50IGlzIHVubW91bnRlZC4gKi9cblx0Ly8gYmVmb3JlVW5tb3VudChjb21wb25lbnQpIHsgfVxufTtcblxudmFyIHN0YWNrID0gW107XG5cbnZhciBFTVBUWV9DSElMRFJFTiA9IFtdO1xuXG4vKipcbiAqIEpTWC9oeXBlcnNjcmlwdCByZXZpdmVyLlxuICogQHNlZSBodHRwOi8vamFzb25mb3JtYXQuY29tL3d0Zi1pcy1qc3hcbiAqIEJlbmNobWFya3M6IGh0dHBzOi8vZXNiZW5jaC5jb20vYmVuY2gvNTdlZThmOGUzMzBhYjA5OTAwYTFhMWEwXG4gKlxuICogTm90ZTogdGhpcyBpcyBleHBvcnRlZCBhcyBib3RoIGBoKClgIGFuZCBgY3JlYXRlRWxlbWVudCgpYCBmb3IgY29tcGF0aWJpbGl0eSByZWFzb25zLlxuICpcbiAqIENyZWF0ZXMgYSBWTm9kZSAodmlydHVhbCBET00gZWxlbWVudCkuIEEgdHJlZSBvZiBWTm9kZXMgY2FuIGJlIHVzZWQgYXMgYSBsaWdodHdlaWdodCByZXByZXNlbnRhdGlvblxuICogb2YgdGhlIHN0cnVjdHVyZSBvZiBhIERPTSB0cmVlLiBUaGlzIHN0cnVjdHVyZSBjYW4gYmUgcmVhbGl6ZWQgYnkgcmVjdXJzaXZlbHkgY29tcGFyaW5nIGl0IGFnYWluc3RcbiAqIHRoZSBjdXJyZW50IF9hY3R1YWxfIERPTSBzdHJ1Y3R1cmUsIGFuZCBhcHBseWluZyBvbmx5IHRoZSBkaWZmZXJlbmNlcy5cbiAqXG4gKiBgaCgpYC9gY3JlYXRlRWxlbWVudCgpYCBhY2NlcHRzIGFuIGVsZW1lbnQgbmFtZSwgYSBsaXN0IG9mIGF0dHJpYnV0ZXMvcHJvcHMsXG4gKiBhbmQgb3B0aW9uYWxseSBjaGlsZHJlbiB0byBhcHBlbmQgdG8gdGhlIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGUgVGhlIGZvbGxvd2luZyBET00gdHJlZVxuICpcbiAqIGA8ZGl2IGlkPVwiZm9vXCIgbmFtZT1cImJhclwiPkhlbGxvITwvZGl2PmBcbiAqXG4gKiBjYW4gYmUgY29uc3RydWN0ZWQgdXNpbmcgdGhpcyBmdW5jdGlvbiBhczpcbiAqXG4gKiBgaCgnZGl2JywgeyBpZDogJ2ZvbycsIG5hbWUgOiAnYmFyJyB9LCAnSGVsbG8hJyk7YFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBub2RlTmFtZVx0QW4gZWxlbWVudCBuYW1lLiBFeDogYGRpdmAsIGBhYCwgYHNwYW5gLCBldGMuXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlc1x0QW55IGF0dHJpYnV0ZXMvcHJvcHMgdG8gc2V0IG9uIHRoZSBjcmVhdGVkIGVsZW1lbnQuXG4gKiBAcGFyYW0gcmVzdFx0XHRcdEFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSB0YWtlbiB0byBiZSBjaGlsZHJlbiB0byBhcHBlbmQuIENhbiBiZSBpbmZpbml0ZWx5IG5lc3RlZCBBcnJheXMuXG4gKlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBoKG5vZGVOYW1lLCBhdHRyaWJ1dGVzKSB7XG5cdHZhciBjaGlsZHJlbiA9IEVNUFRZX0NISUxEUkVOLFxuXHQgICAgbGFzdFNpbXBsZSxcblx0ICAgIGNoaWxkLFxuXHQgICAgc2ltcGxlLFxuXHQgICAgaTtcblx0Zm9yIChpID0gYXJndW1lbnRzLmxlbmd0aDsgaS0tID4gMjspIHtcblx0XHRzdGFjay5wdXNoKGFyZ3VtZW50c1tpXSk7XG5cdH1cblx0aWYgKGF0dHJpYnV0ZXMgJiYgYXR0cmlidXRlcy5jaGlsZHJlbiAhPSBudWxsKSB7XG5cdFx0aWYgKCFzdGFjay5sZW5ndGgpIHN0YWNrLnB1c2goYXR0cmlidXRlcy5jaGlsZHJlbik7XG5cdFx0ZGVsZXRlIGF0dHJpYnV0ZXMuY2hpbGRyZW47XG5cdH1cblx0d2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuXHRcdGlmICgoY2hpbGQgPSBzdGFjay5wb3AoKSkgJiYgY2hpbGQucG9wICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGZvciAoaSA9IGNoaWxkLmxlbmd0aDsgaS0tOykge1xuXHRcdFx0XHRzdGFjay5wdXNoKGNoaWxkW2ldKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKHR5cGVvZiBjaGlsZCA9PT0gJ2Jvb2xlYW4nKSBjaGlsZCA9IG51bGw7XG5cblx0XHRcdGlmIChzaW1wbGUgPSB0eXBlb2Ygbm9kZU5hbWUgIT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0aWYgKGNoaWxkID09IG51bGwpIGNoaWxkID0gJyc7ZWxzZSBpZiAodHlwZW9mIGNoaWxkID09PSAnbnVtYmVyJykgY2hpbGQgPSBTdHJpbmcoY2hpbGQpO2Vsc2UgaWYgKHR5cGVvZiBjaGlsZCAhPT0gJ3N0cmluZycpIHNpbXBsZSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc2ltcGxlICYmIGxhc3RTaW1wbGUpIHtcblx0XHRcdFx0Y2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0gKz0gY2hpbGQ7XG5cdFx0XHR9IGVsc2UgaWYgKGNoaWxkcmVuID09PSBFTVBUWV9DSElMRFJFTikge1xuXHRcdFx0XHRjaGlsZHJlbiA9IFtjaGlsZF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjaGlsZHJlbi5wdXNoKGNoaWxkKTtcblx0XHRcdH1cblxuXHRcdFx0bGFzdFNpbXBsZSA9IHNpbXBsZTtcblx0XHR9XG5cdH1cblxuXHR2YXIgcCA9IG5ldyBWTm9kZSgpO1xuXHRwLm5vZGVOYW1lID0gbm9kZU5hbWU7XG5cdHAuY2hpbGRyZW4gPSBjaGlsZHJlbjtcblx0cC5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcyA9PSBudWxsID8gdW5kZWZpbmVkIDogYXR0cmlidXRlcztcblx0cC5rZXkgPSBhdHRyaWJ1dGVzID09IG51bGwgPyB1bmRlZmluZWQgOiBhdHRyaWJ1dGVzLmtleTtcblxuXHQvLyBpZiBhIFwidm5vZGUgaG9va1wiIGlzIGRlZmluZWQsIHBhc3MgZXZlcnkgY3JlYXRlZCBWTm9kZSB0byBpdFxuXHRpZiAob3B0aW9ucy52bm9kZSAhPT0gdW5kZWZpbmVkKSBvcHRpb25zLnZub2RlKHApO1xuXG5cdHJldHVybiBwO1xufVxuXG4vKipcbiAqICBDb3B5IGFsbCBwcm9wZXJ0aWVzIGZyb20gYHByb3BzYCBvbnRvIGBvYmpgLlxuICogIEBwYXJhbSB7T2JqZWN0fSBvYmpcdFx0T2JqZWN0IG9udG8gd2hpY2ggcHJvcGVydGllcyBzaG91bGQgYmUgY29waWVkLlxuICogIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1x0T2JqZWN0IGZyb20gd2hpY2ggdG8gY29weSBwcm9wZXJ0aWVzLlxuICogIEByZXR1cm5zIG9ialxuICogIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChvYmosIHByb3BzKSB7XG4gIGZvciAodmFyIGkgaW4gcHJvcHMpIHtcbiAgICBvYmpbaV0gPSBwcm9wc1tpXTtcbiAgfXJldHVybiBvYmo7XG59XG5cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIGFzeW5jaHJvbm91c2x5LCBhcyBzb29uIGFzIHBvc3NpYmxlLiBNYWtlc1xuICogdXNlIG9mIEhUTUwgUHJvbWlzZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgaWYgYXZhaWxhYmxlLFxuICogb3RoZXJ3aXNlIGZhbGxpbmcgYmFjayB0byBgc2V0VGltZW91dGAgKG1haW5seSBmb3IgSUU8MTEpLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKi9cbnZhciBkZWZlciA9IHR5cGVvZiBQcm9taXNlID09ICdmdW5jdGlvbicgPyBQcm9taXNlLnJlc29sdmUoKS50aGVuLmJpbmQoUHJvbWlzZS5yZXNvbHZlKCkpIDogc2V0VGltZW91dDtcblxuLyoqXG4gKiBDbG9uZXMgdGhlIGdpdmVuIFZOb2RlLCBvcHRpb25hbGx5IGFkZGluZyBhdHRyaWJ1dGVzL3Byb3BzIGFuZCByZXBsYWNpbmcgaXRzIGNoaWxkcmVuLlxuICogQHBhcmFtIHtWTm9kZX0gdm5vZGVcdFx0VGhlIHZpcnV0YWwgRE9NIGVsZW1lbnQgdG8gY2xvbmVcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1x0QXR0cmlidXRlcy9wcm9wcyB0byBhZGQgd2hlbiBjbG9uaW5nXG4gKiBAcGFyYW0ge1ZOb2RlfSByZXN0XHRcdEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyB3aWxsIGJlIHVzZWQgYXMgcmVwbGFjZW1lbnQgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIGNsb25lRWxlbWVudCh2bm9kZSwgcHJvcHMpIHtcbiAgcmV0dXJuIGgodm5vZGUubm9kZU5hbWUsIGV4dGVuZChleHRlbmQoe30sIHZub2RlLmF0dHJpYnV0ZXMpLCBwcm9wcyksIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpIDogdm5vZGUuY2hpbGRyZW4pO1xufVxuXG4vLyBET00gcHJvcGVydGllcyB0aGF0IHNob3VsZCBOT1QgaGF2ZSBcInB4XCIgYWRkZWQgd2hlbiBudW1lcmljXG52YXIgSVNfTk9OX0RJTUVOU0lPTkFMID0gL2FjaXR8ZXgoPzpzfGd8bnxwfCQpfHJwaHxvd3N8bW5jfG50d3xpbmVbY2hdfHpvb3xeb3JkL2k7XG5cbi8qKiBNYW5hZ2VkIHF1ZXVlIG9mIGRpcnR5IGNvbXBvbmVudHMgdG8gYmUgcmUtcmVuZGVyZWQgKi9cblxudmFyIGl0ZW1zID0gW107XG5cbmZ1bmN0aW9uIGVucXVldWVSZW5kZXIoY29tcG9uZW50KSB7XG5cdGlmICghY29tcG9uZW50Ll9kaXJ0eSAmJiAoY29tcG9uZW50Ll9kaXJ0eSA9IHRydWUpICYmIGl0ZW1zLnB1c2goY29tcG9uZW50KSA9PSAxKSB7XG5cdFx0KG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmcgfHwgZGVmZXIpKHJlcmVuZGVyKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZXJlbmRlcigpIHtcblx0dmFyIHAsXG5cdCAgICBsaXN0ID0gaXRlbXM7XG5cdGl0ZW1zID0gW107XG5cdHdoaWxlIChwID0gbGlzdC5wb3AoKSkge1xuXHRcdGlmIChwLl9kaXJ0eSkgcmVuZGVyQ29tcG9uZW50KHApO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIG5vZGVzIGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVx0XHRcdERPTSBOb2RlIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSB7Vk5vZGV9IHZub2RlXHRcdFx0VmlydHVhbCBET00gbm9kZSB0byBjb21wYXJlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtoeXJkYXRpbmc9ZmFsc2VdXHRJZiB0cnVlLCBpZ25vcmVzIGNvbXBvbmVudCBjb25zdHJ1Y3RvcnMgd2hlbiBjb21wYXJpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc1NhbWVOb2RlVHlwZShub2RlLCB2bm9kZSwgaHlkcmF0aW5nKSB7XG4gIGlmICh0eXBlb2Ygdm5vZGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2bm9kZSA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gbm9kZS5zcGxpdFRleHQgIT09IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodHlwZW9mIHZub2RlLm5vZGVOYW1lID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiAhbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgJiYgaXNOYW1lZE5vZGUobm9kZSwgdm5vZGUubm9kZU5hbWUpO1xuICB9XG4gIHJldHVybiBoeWRyYXRpbmcgfHwgbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIEVsZW1lbnQgaGFzIGEgZ2l2ZW4gbm9kZU5hbWUsIGNhc2UtaW5zZW5zaXRpdmVseS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcdEEgRE9NIEVsZW1lbnQgdG8gaW5zcGVjdCB0aGUgbmFtZSBvZi5cbiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVx0VW5ub3JtYWxpemVkIG5hbWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICovXG5mdW5jdGlvbiBpc05hbWVkTm9kZShub2RlLCBub2RlTmFtZSkge1xuICByZXR1cm4gbm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgPT09IG5vZGVOYW1lIHx8IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBSZWNvbnN0cnVjdCBDb21wb25lbnQtc3R5bGUgYHByb3BzYCBmcm9tIGEgVk5vZGUuXG4gKiBFbnN1cmVzIGRlZmF1bHQvZmFsbGJhY2sgdmFsdWVzIGZyb20gYGRlZmF1bHRQcm9wc2A6XG4gKiBPd24tcHJvcGVydGllcyBvZiBgZGVmYXVsdFByb3BzYCBub3QgcHJlc2VudCBpbiBgdm5vZGUuYXR0cmlidXRlc2AgYXJlIGFkZGVkLlxuICpcbiAqIEBwYXJhbSB7Vk5vZGV9IHZub2RlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBwcm9wc1xuICovXG5mdW5jdGlvbiBnZXROb2RlUHJvcHModm5vZGUpIHtcbiAgdmFyIHByb3BzID0gZXh0ZW5kKHt9LCB2bm9kZS5hdHRyaWJ1dGVzKTtcbiAgcHJvcHMuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcblxuICB2YXIgZGVmYXVsdFByb3BzID0gdm5vZGUubm9kZU5hbWUuZGVmYXVsdFByb3BzO1xuICBpZiAoZGVmYXVsdFByb3BzICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKHZhciBpIGluIGRlZmF1bHRQcm9wcykge1xuICAgICAgaWYgKHByb3BzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvcHNbaV0gPSBkZWZhdWx0UHJvcHNbaV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHByb3BzO1xufVxuXG4vKiogQ3JlYXRlIGFuIGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gbm9kZU5hbWUuXG4gKlx0QHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lXG4gKlx0QHBhcmFtIHtCb29sZWFufSBbaXNTdmc9ZmFsc2VdXHRJZiBgdHJ1ZWAsIGNyZWF0ZXMgYW4gZWxlbWVudCB3aXRoaW4gdGhlIFNWRyBuYW1lc3BhY2UuXG4gKlx0QHJldHVybnMge0VsZW1lbnR9IG5vZGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmcpIHtcblx0dmFyIG5vZGUgPSBpc1N2ZyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBub2RlTmFtZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTtcblx0bm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgPSBub2RlTmFtZTtcblx0cmV0dXJuIG5vZGU7XG59XG5cbi8qKiBSZW1vdmUgYSBjaGlsZCBub2RlIGZyb20gaXRzIHBhcmVudCBpZiBhdHRhY2hlZC5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IG5vZGVcdFx0VGhlIG5vZGUgdG8gcmVtb3ZlXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuXHR2YXIgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0aWYgKHBhcmVudE5vZGUpIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG59XG5cbi8qKiBTZXQgYSBuYW1lZCBhdHRyaWJ1dGUgb24gdGhlIGdpdmVuIE5vZGUsIHdpdGggc3BlY2lhbCBiZWhhdmlvciBmb3Igc29tZSBuYW1lcyBhbmQgZXZlbnQgaGFuZGxlcnMuXG4gKlx0SWYgYHZhbHVlYCBpcyBgbnVsbGAsIHRoZSBhdHRyaWJ1dGUvaGFuZGxlciB3aWxsIGJlIHJlbW92ZWQuXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBub2RlXHRBbiBlbGVtZW50IHRvIG11dGF0ZVxuICpcdEBwYXJhbSB7c3RyaW5nfSBuYW1lXHRUaGUgbmFtZS9rZXkgdG8gc2V0LCBzdWNoIGFzIGFuIGV2ZW50IG9yIGF0dHJpYnV0ZSBuYW1lXG4gKlx0QHBhcmFtIHthbnl9IG9sZFx0VGhlIGxhc3QgdmFsdWUgdGhhdCB3YXMgc2V0IGZvciB0aGlzIG5hbWUvbm9kZSBwYWlyXG4gKlx0QHBhcmFtIHthbnl9IHZhbHVlXHRBbiBhdHRyaWJ1dGUgdmFsdWUsIHN1Y2ggYXMgYSBmdW5jdGlvbiB0byBiZSB1c2VkIGFzIGFuIGV2ZW50IGhhbmRsZXJcbiAqXHRAcGFyYW0ge0Jvb2xlYW59IGlzU3ZnXHRBcmUgd2UgY3VycmVudGx5IGRpZmZpbmcgaW5zaWRlIGFuIHN2Zz9cbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzZXRBY2Nlc3Nvcihub2RlLCBuYW1lLCBvbGQsIHZhbHVlLCBpc1N2Zykge1xuXHRpZiAobmFtZSA9PT0gJ2NsYXNzTmFtZScpIG5hbWUgPSAnY2xhc3MnO1xuXG5cdGlmIChuYW1lID09PSAna2V5Jykge1xuXHRcdC8vIGlnbm9yZVxuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICdyZWYnKSB7XG5cdFx0aWYgKG9sZCkgb2xkKG51bGwpO1xuXHRcdGlmICh2YWx1ZSkgdmFsdWUobm9kZSk7XG5cdH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhaXNTdmcpIHtcblx0XHRub2RlLmNsYXNzTmFtZSA9IHZhbHVlIHx8ICcnO1xuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICdzdHlsZScpIHtcblx0XHRpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIG9sZCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdG5vZGUuc3R5bGUuY3NzVGV4dCA9IHZhbHVlIHx8ICcnO1xuXHRcdH1cblx0XHRpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0aWYgKHR5cGVvZiBvbGQgIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdGZvciAodmFyIGkgaW4gb2xkKSB7XG5cdFx0XHRcdFx0aWYgKCEoaSBpbiB2YWx1ZSkpIG5vZGUuc3R5bGVbaV0gPSAnJztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Zm9yICh2YXIgaSBpbiB2YWx1ZSkge1xuXHRcdFx0XHRub2RlLnN0eWxlW2ldID0gdHlwZW9mIHZhbHVlW2ldID09PSAnbnVtYmVyJyAmJiBJU19OT05fRElNRU5TSU9OQUwudGVzdChpKSA9PT0gZmFsc2UgPyB2YWx1ZVtpXSArICdweCcgOiB2YWx1ZVtpXTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSBpZiAobmFtZSA9PT0gJ2Rhbmdlcm91c2x5U2V0SW5uZXJIVE1MJykge1xuXHRcdGlmICh2YWx1ZSkgbm9kZS5pbm5lckhUTUwgPSB2YWx1ZS5fX2h0bWwgfHwgJyc7XG5cdH0gZWxzZSBpZiAobmFtZVswXSA9PSAnbycgJiYgbmFtZVsxXSA9PSAnbicpIHtcblx0XHR2YXIgdXNlQ2FwdHVyZSA9IG5hbWUgIT09IChuYW1lID0gbmFtZS5yZXBsYWNlKC9DYXB0dXJlJC8sICcnKSk7XG5cdFx0bmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMik7XG5cdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRpZiAoIW9sZCkgbm9kZS5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50UHJveHksIHVzZUNhcHR1cmUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSwgdXNlQ2FwdHVyZSk7XG5cdFx0fVxuXHRcdChub2RlLl9saXN0ZW5lcnMgfHwgKG5vZGUuX2xpc3RlbmVycyA9IHt9KSlbbmFtZV0gPSB2YWx1ZTtcblx0fSBlbHNlIGlmIChuYW1lICE9PSAnbGlzdCcgJiYgbmFtZSAhPT0gJ3R5cGUnICYmICFpc1N2ZyAmJiBuYW1lIGluIG5vZGUpIHtcblx0XHRzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZSk7XG5cdFx0aWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09IGZhbHNlKSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgbnMgPSBpc1N2ZyAmJiBuYW1lICE9PSAobmFtZSA9IG5hbWUucmVwbGFjZSgvXnhsaW5rXFw6Py8sICcnKSk7XG5cdFx0aWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09IGZhbHNlKSB7XG5cdFx0XHRpZiAobnMpIG5vZGUucmVtb3ZlQXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBuYW1lLnRvTG93ZXJDYXNlKCkpO2Vsc2Ugbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgIT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGlmIChucykgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIG5hbWUudG9Mb3dlckNhc2UoKSwgdmFsdWUpO2Vsc2Ugbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuXHRcdH1cblx0fVxufVxuXG4vKiogQXR0ZW1wdCB0byBzZXQgYSBET00gcHJvcGVydHkgdG8gdGhlIGdpdmVuIHZhbHVlLlxuICpcdElFICYgRkYgdGhyb3cgZm9yIGNlcnRhaW4gcHJvcGVydHktdmFsdWUgY29tYmluYXRpb25zLlxuICovXG5mdW5jdGlvbiBzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSkge1xuXHR0cnkge1xuXHRcdG5vZGVbbmFtZV0gPSB2YWx1ZTtcblx0fSBjYXRjaCAoZSkge31cbn1cblxuLyoqIFByb3h5IGFuIGV2ZW50IHRvIGhvb2tlZCBldmVudCBoYW5kbGVyc1xuICpcdEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGV2ZW50UHJveHkoZSkge1xuXHRyZXR1cm4gdGhpcy5fbGlzdGVuZXJzW2UudHlwZV0ob3B0aW9ucy5ldmVudCAmJiBvcHRpb25zLmV2ZW50KGUpIHx8IGUpO1xufVxuXG4vKiogUXVldWUgb2YgY29tcG9uZW50cyB0aGF0IGhhdmUgYmVlbiBtb3VudGVkIGFuZCBhcmUgYXdhaXRpbmcgY29tcG9uZW50RGlkTW91bnQgKi9cbnZhciBtb3VudHMgPSBbXTtcblxuLyoqIERpZmYgcmVjdXJzaW9uIGNvdW50LCB1c2VkIHRvIHRyYWNrIHRoZSBlbmQgb2YgdGhlIGRpZmYgY3ljbGUuICovXG52YXIgZGlmZkxldmVsID0gMDtcblxuLyoqIEdsb2JhbCBmbGFnIGluZGljYXRpbmcgaWYgdGhlIGRpZmYgaXMgY3VycmVudGx5IHdpdGhpbiBhbiBTVkcgKi9cbnZhciBpc1N2Z01vZGUgPSBmYWxzZTtcblxuLyoqIEdsb2JhbCBmbGFnIGluZGljYXRpbmcgaWYgdGhlIGRpZmYgaXMgcGVyZm9ybWluZyBoeWRyYXRpb24gKi9cbnZhciBoeWRyYXRpbmcgPSBmYWxzZTtcblxuLyoqIEludm9rZSBxdWV1ZWQgY29tcG9uZW50RGlkTW91bnQgbGlmZWN5Y2xlIG1ldGhvZHMgKi9cbmZ1bmN0aW9uIGZsdXNoTW91bnRzKCkge1xuXHR2YXIgYztcblx0d2hpbGUgKGMgPSBtb3VudHMucG9wKCkpIHtcblx0XHRpZiAob3B0aW9ucy5hZnRlck1vdW50KSBvcHRpb25zLmFmdGVyTW91bnQoYyk7XG5cdFx0aWYgKGMuY29tcG9uZW50RGlkTW91bnQpIGMuY29tcG9uZW50RGlkTW91bnQoKTtcblx0fVxufVxuXG4vKiogQXBwbHkgZGlmZmVyZW5jZXMgaW4gYSBnaXZlbiB2bm9kZSAoYW5kIGl0J3MgZGVlcCBjaGlsZHJlbikgdG8gYSByZWFsIERPTSBOb2RlLlxuICpcdEBwYXJhbSB7RWxlbWVudH0gW2RvbT1udWxsXVx0XHRBIERPTSBub2RlIHRvIG11dGF0ZSBpbnRvIHRoZSBzaGFwZSBvZiB0aGUgYHZub2RlYFxuICpcdEBwYXJhbSB7Vk5vZGV9IHZub2RlXHRcdFx0QSBWTm9kZSAod2l0aCBkZXNjZW5kYW50cyBmb3JtaW5nIGEgdHJlZSkgcmVwcmVzZW50aW5nIHRoZSBkZXNpcmVkIERPTSBzdHJ1Y3R1cmVcbiAqXHRAcmV0dXJucyB7RWxlbWVudH0gZG9tXHRcdFx0VGhlIGNyZWF0ZWQvbXV0YXRlZCBlbGVtZW50XG4gKlx0QHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCwgcGFyZW50LCBjb21wb25lbnRSb290KSB7XG5cdC8vIGRpZmZMZXZlbCBoYXZpbmcgYmVlbiAwIGhlcmUgaW5kaWNhdGVzIGluaXRpYWwgZW50cnkgaW50byB0aGUgZGlmZiAobm90IGEgc3ViZGlmZilcblx0aWYgKCFkaWZmTGV2ZWwrKykge1xuXHRcdC8vIHdoZW4gZmlyc3Qgc3RhcnRpbmcgdGhlIGRpZmYsIGNoZWNrIGlmIHdlJ3JlIGRpZmZpbmcgYW4gU1ZHIG9yIHdpdGhpbiBhbiBTVkdcblx0XHRpc1N2Z01vZGUgPSBwYXJlbnQgIT0gbnVsbCAmJiBwYXJlbnQub3duZXJTVkdFbGVtZW50ICE9PSB1bmRlZmluZWQ7XG5cblx0XHQvLyBoeWRyYXRpb24gaXMgaW5kaWNhdGVkIGJ5IHRoZSBleGlzdGluZyBlbGVtZW50IHRvIGJlIGRpZmZlZCBub3QgaGF2aW5nIGEgcHJvcCBjYWNoZVxuXHRcdGh5ZHJhdGluZyA9IGRvbSAhPSBudWxsICYmICEoJ19fcHJlYWN0YXR0cl8nIGluIGRvbSk7XG5cdH1cblxuXHR2YXIgcmV0ID0gaWRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIGNvbXBvbmVudFJvb3QpO1xuXG5cdC8vIGFwcGVuZCB0aGUgZWxlbWVudCBpZiBpdHMgYSBuZXcgcGFyZW50XG5cdGlmIChwYXJlbnQgJiYgcmV0LnBhcmVudE5vZGUgIT09IHBhcmVudCkgcGFyZW50LmFwcGVuZENoaWxkKHJldCk7XG5cblx0Ly8gZGlmZkxldmVsIGJlaW5nIHJlZHVjZWQgdG8gMCBtZWFucyB3ZSdyZSBleGl0aW5nIHRoZSBkaWZmXG5cdGlmICghIC0tZGlmZkxldmVsKSB7XG5cdFx0aHlkcmF0aW5nID0gZmFsc2U7XG5cdFx0Ly8gaW52b2tlIHF1ZXVlZCBjb21wb25lbnREaWRNb3VudCBsaWZlY3ljbGUgbWV0aG9kc1xuXHRcdGlmICghY29tcG9uZW50Um9vdCkgZmx1c2hNb3VudHMoKTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59XG5cbi8qKiBJbnRlcm5hbHMgb2YgYGRpZmYoKWAsIHNlcGFyYXRlZCB0byBhbGxvdyBieXBhc3NpbmcgZGlmZkxldmVsIC8gbW91bnQgZmx1c2hpbmcuICovXG5mdW5jdGlvbiBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCwgY29tcG9uZW50Um9vdCkge1xuXHR2YXIgb3V0ID0gZG9tLFxuXHQgICAgcHJldlN2Z01vZGUgPSBpc1N2Z01vZGU7XG5cblx0Ly8gZW1wdHkgdmFsdWVzIChudWxsLCB1bmRlZmluZWQsIGJvb2xlYW5zKSByZW5kZXIgYXMgZW1wdHkgVGV4dCBub2Rlc1xuXHRpZiAodm5vZGUgPT0gbnVsbCB8fCB0eXBlb2Ygdm5vZGUgPT09ICdib29sZWFuJykgdm5vZGUgPSAnJztcblxuXHQvLyBGYXN0IGNhc2U6IFN0cmluZ3MgJiBOdW1iZXJzIGNyZWF0ZS91cGRhdGUgVGV4dCBub2Rlcy5cblx0aWYgKHR5cGVvZiB2bm9kZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZub2RlID09PSAnbnVtYmVyJykge1xuXG5cdFx0Ly8gdXBkYXRlIGlmIGl0J3MgYWxyZWFkeSBhIFRleHQgbm9kZTpcblx0XHRpZiAoZG9tICYmIGRvbS5zcGxpdFRleHQgIT09IHVuZGVmaW5lZCAmJiBkb20ucGFyZW50Tm9kZSAmJiAoIWRvbS5fY29tcG9uZW50IHx8IGNvbXBvbmVudFJvb3QpKSB7XG5cdFx0XHQvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8gLyogQnJvd3NlciBxdWlyayB0aGF0IGNhbid0IGJlIGNvdmVyZWQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9kZXZlbG9waXQvcHJlYWN0L2NvbW1pdC9mZDRmMjFmNWM0NWRmZDc1MTUxYmQyN2I0YzIxN2Q4MDAzYWE1ZWI5ICovXG5cdFx0XHRpZiAoZG9tLm5vZGVWYWx1ZSAhPSB2bm9kZSkge1xuXHRcdFx0XHRkb20ubm9kZVZhbHVlID0gdm5vZGU7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGl0IHdhc24ndCBhIFRleHQgbm9kZTogcmVwbGFjZSBpdCB3aXRoIG9uZSBhbmQgcmVjeWNsZSB0aGUgb2xkIEVsZW1lbnRcblx0XHRcdG91dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZub2RlKTtcblx0XHRcdGlmIChkb20pIHtcblx0XHRcdFx0aWYgKGRvbS5wYXJlbnROb2RlKSBkb20ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQob3V0LCBkb20pO1xuXHRcdFx0XHRyZWNvbGxlY3ROb2RlVHJlZShkb20sIHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG91dFsnX19wcmVhY3RhdHRyXyddID0gdHJ1ZTtcblxuXHRcdHJldHVybiBvdXQ7XG5cdH1cblxuXHQvLyBJZiB0aGUgVk5vZGUgcmVwcmVzZW50cyBhIENvbXBvbmVudCwgcGVyZm9ybSBhIGNvbXBvbmVudCBkaWZmOlxuXHR2YXIgdm5vZGVOYW1lID0gdm5vZGUubm9kZU5hbWU7XG5cdGlmICh0eXBlb2Ygdm5vZGVOYW1lID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIGJ1aWxkQ29tcG9uZW50RnJvbVZOb2RlKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKTtcblx0fVxuXG5cdC8vIFRyYWNrcyBlbnRlcmluZyBhbmQgZXhpdGluZyBTVkcgbmFtZXNwYWNlIHdoZW4gZGVzY2VuZGluZyB0aHJvdWdoIHRoZSB0cmVlLlxuXHRpc1N2Z01vZGUgPSB2bm9kZU5hbWUgPT09ICdzdmcnID8gdHJ1ZSA6IHZub2RlTmFtZSA9PT0gJ2ZvcmVpZ25PYmplY3QnID8gZmFsc2UgOiBpc1N2Z01vZGU7XG5cblx0Ly8gSWYgdGhlcmUncyBubyBleGlzdGluZyBlbGVtZW50IG9yIGl0J3MgdGhlIHdyb25nIHR5cGUsIGNyZWF0ZSBhIG5ldyBvbmU6XG5cdHZub2RlTmFtZSA9IFN0cmluZyh2bm9kZU5hbWUpO1xuXHRpZiAoIWRvbSB8fCAhaXNOYW1lZE5vZGUoZG9tLCB2bm9kZU5hbWUpKSB7XG5cdFx0b3V0ID0gY3JlYXRlTm9kZSh2bm9kZU5hbWUsIGlzU3ZnTW9kZSk7XG5cblx0XHRpZiAoZG9tKSB7XG5cdFx0XHQvLyBtb3ZlIGNoaWxkcmVuIGludG8gdGhlIHJlcGxhY2VtZW50IG5vZGVcblx0XHRcdHdoaWxlIChkb20uZmlyc3RDaGlsZCkge1xuXHRcdFx0XHRvdXQuYXBwZW5kQ2hpbGQoZG9tLmZpcnN0Q2hpbGQpO1xuXHRcdFx0fSAvLyBpZiB0aGUgcHJldmlvdXMgRWxlbWVudCB3YXMgbW91bnRlZCBpbnRvIHRoZSBET00sIHJlcGxhY2UgaXQgaW5saW5lXG5cdFx0XHRpZiAoZG9tLnBhcmVudE5vZGUpIGRvbS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChvdXQsIGRvbSk7XG5cblx0XHRcdC8vIHJlY3ljbGUgdGhlIG9sZCBlbGVtZW50IChza2lwcyBub24tRWxlbWVudCBub2RlIHR5cGVzKVxuXHRcdFx0cmVjb2xsZWN0Tm9kZVRyZWUoZG9tLCB0cnVlKTtcblx0XHR9XG5cdH1cblxuXHR2YXIgZmMgPSBvdXQuZmlyc3RDaGlsZCxcblx0ICAgIHByb3BzID0gb3V0WydfX3ByZWFjdGF0dHJfJ10sXG5cdCAgICB2Y2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcblxuXHRpZiAocHJvcHMgPT0gbnVsbCkge1xuXHRcdHByb3BzID0gb3V0WydfX3ByZWFjdGF0dHJfJ10gPSB7fTtcblx0XHRmb3IgKHZhciBhID0gb3V0LmF0dHJpYnV0ZXMsIGkgPSBhLmxlbmd0aDsgaS0tOykge1xuXHRcdFx0cHJvcHNbYVtpXS5uYW1lXSA9IGFbaV0udmFsdWU7XG5cdFx0fVxuXHR9XG5cblx0Ly8gT3B0aW1pemF0aW9uOiBmYXN0LXBhdGggZm9yIGVsZW1lbnRzIGNvbnRhaW5pbmcgYSBzaW5nbGUgVGV4dE5vZGU6XG5cdGlmICghaHlkcmF0aW5nICYmIHZjaGlsZHJlbiAmJiB2Y2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIHR5cGVvZiB2Y2hpbGRyZW5bMF0gPT09ICdzdHJpbmcnICYmIGZjICE9IG51bGwgJiYgZmMuc3BsaXRUZXh0ICE9PSB1bmRlZmluZWQgJiYgZmMubmV4dFNpYmxpbmcgPT0gbnVsbCkge1xuXHRcdGlmIChmYy5ub2RlVmFsdWUgIT0gdmNoaWxkcmVuWzBdKSB7XG5cdFx0XHRmYy5ub2RlVmFsdWUgPSB2Y2hpbGRyZW5bMF07XG5cdFx0fVxuXHR9XG5cdC8vIG90aGVyd2lzZSwgaWYgdGhlcmUgYXJlIGV4aXN0aW5nIG9yIG5ldyBjaGlsZHJlbiwgZGlmZiB0aGVtOlxuXHRlbHNlIGlmICh2Y2hpbGRyZW4gJiYgdmNoaWxkcmVuLmxlbmd0aCB8fCBmYyAhPSBudWxsKSB7XG5cdFx0XHRpbm5lckRpZmZOb2RlKG91dCwgdmNoaWxkcmVuLCBjb250ZXh0LCBtb3VudEFsbCwgaHlkcmF0aW5nIHx8IHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICE9IG51bGwpO1xuXHRcdH1cblxuXHQvLyBBcHBseSBhdHRyaWJ1dGVzL3Byb3BzIGZyb20gVk5vZGUgdG8gdGhlIERPTSBFbGVtZW50OlxuXHRkaWZmQXR0cmlidXRlcyhvdXQsIHZub2RlLmF0dHJpYnV0ZXMsIHByb3BzKTtcblxuXHQvLyByZXN0b3JlIHByZXZpb3VzIFNWRyBtb2RlOiAoaW4gY2FzZSB3ZSdyZSBleGl0aW5nIGFuIFNWRyBuYW1lc3BhY2UpXG5cdGlzU3ZnTW9kZSA9IHByZXZTdmdNb2RlO1xuXG5cdHJldHVybiBvdXQ7XG59XG5cbi8qKiBBcHBseSBjaGlsZCBhbmQgYXR0cmlidXRlIGNoYW5nZXMgYmV0d2VlbiBhIFZOb2RlIGFuZCBhIERPTSBOb2RlIHRvIHRoZSBET00uXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBkb21cdFx0XHRFbGVtZW50IHdob3NlIGNoaWxkcmVuIHNob3VsZCBiZSBjb21wYXJlZCAmIG11dGF0ZWRcbiAqXHRAcGFyYW0ge0FycmF5fSB2Y2hpbGRyZW5cdFx0QXJyYXkgb2YgVk5vZGVzIHRvIGNvbXBhcmUgdG8gYGRvbS5jaGlsZE5vZGVzYFxuICpcdEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XHRcdFx0SW1wbGljaXRseSBkZXNjZW5kYW50IGNvbnRleHQgb2JqZWN0IChmcm9tIG1vc3QgcmVjZW50IGBnZXRDaGlsZENvbnRleHQoKWApXG4gKlx0QHBhcmFtIHtCb29sZWFufSBtb3VudEFsbFxuICpcdEBwYXJhbSB7Qm9vbGVhbn0gaXNIeWRyYXRpbmdcdElmIGB0cnVlYCwgY29uc3VtZXMgZXh0ZXJuYWxseSBjcmVhdGVkIGVsZW1lbnRzIHNpbWlsYXIgdG8gaHlkcmF0aW9uXG4gKi9cbmZ1bmN0aW9uIGlubmVyRGlmZk5vZGUoZG9tLCB2Y2hpbGRyZW4sIGNvbnRleHQsIG1vdW50QWxsLCBpc0h5ZHJhdGluZykge1xuXHR2YXIgb3JpZ2luYWxDaGlsZHJlbiA9IGRvbS5jaGlsZE5vZGVzLFxuXHQgICAgY2hpbGRyZW4gPSBbXSxcblx0ICAgIGtleWVkID0ge30sXG5cdCAgICBrZXllZExlbiA9IDAsXG5cdCAgICBtaW4gPSAwLFxuXHQgICAgbGVuID0gb3JpZ2luYWxDaGlsZHJlbi5sZW5ndGgsXG5cdCAgICBjaGlsZHJlbkxlbiA9IDAsXG5cdCAgICB2bGVuID0gdmNoaWxkcmVuID8gdmNoaWxkcmVuLmxlbmd0aCA6IDAsXG5cdCAgICBqLFxuXHQgICAgYyxcblx0ICAgIGYsXG5cdCAgICB2Y2hpbGQsXG5cdCAgICBjaGlsZDtcblxuXHQvLyBCdWlsZCB1cCBhIG1hcCBvZiBrZXllZCBjaGlsZHJlbiBhbmQgYW4gQXJyYXkgb2YgdW5rZXllZCBjaGlsZHJlbjpcblx0aWYgKGxlbiAhPT0gMCkge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdHZhciBfY2hpbGQgPSBvcmlnaW5hbENoaWxkcmVuW2ldLFxuXHRcdFx0ICAgIHByb3BzID0gX2NoaWxkWydfX3ByZWFjdGF0dHJfJ10sXG5cdFx0XHQgICAga2V5ID0gdmxlbiAmJiBwcm9wcyA/IF9jaGlsZC5fY29tcG9uZW50ID8gX2NoaWxkLl9jb21wb25lbnQuX19rZXkgOiBwcm9wcy5rZXkgOiBudWxsO1xuXHRcdFx0aWYgKGtleSAhPSBudWxsKSB7XG5cdFx0XHRcdGtleWVkTGVuKys7XG5cdFx0XHRcdGtleWVkW2tleV0gPSBfY2hpbGQ7XG5cdFx0XHR9IGVsc2UgaWYgKHByb3BzIHx8IChfY2hpbGQuc3BsaXRUZXh0ICE9PSB1bmRlZmluZWQgPyBpc0h5ZHJhdGluZyA/IF9jaGlsZC5ub2RlVmFsdWUudHJpbSgpIDogdHJ1ZSA6IGlzSHlkcmF0aW5nKSkge1xuXHRcdFx0XHRjaGlsZHJlbltjaGlsZHJlbkxlbisrXSA9IF9jaGlsZDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAodmxlbiAhPT0gMCkge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdmxlbjsgaSsrKSB7XG5cdFx0XHR2Y2hpbGQgPSB2Y2hpbGRyZW5baV07XG5cdFx0XHRjaGlsZCA9IG51bGw7XG5cblx0XHRcdC8vIGF0dGVtcHQgdG8gZmluZCBhIG5vZGUgYmFzZWQgb24ga2V5IG1hdGNoaW5nXG5cdFx0XHR2YXIga2V5ID0gdmNoaWxkLmtleTtcblx0XHRcdGlmIChrZXkgIT0gbnVsbCkge1xuXHRcdFx0XHRpZiAoa2V5ZWRMZW4gJiYga2V5ZWRba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0Y2hpbGQgPSBrZXllZFtrZXldO1xuXHRcdFx0XHRcdGtleWVkW2tleV0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0a2V5ZWRMZW4tLTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gYXR0ZW1wdCB0byBwbHVjayBhIG5vZGUgb2YgdGhlIHNhbWUgdHlwZSBmcm9tIHRoZSBleGlzdGluZyBjaGlsZHJlblxuXHRcdFx0ZWxzZSBpZiAoIWNoaWxkICYmIG1pbiA8IGNoaWxkcmVuTGVuKSB7XG5cdFx0XHRcdFx0Zm9yIChqID0gbWluOyBqIDwgY2hpbGRyZW5MZW47IGorKykge1xuXHRcdFx0XHRcdFx0aWYgKGNoaWxkcmVuW2pdICE9PSB1bmRlZmluZWQgJiYgaXNTYW1lTm9kZVR5cGUoYyA9IGNoaWxkcmVuW2pdLCB2Y2hpbGQsIGlzSHlkcmF0aW5nKSkge1xuXHRcdFx0XHRcdFx0XHRjaGlsZCA9IGM7XG5cdFx0XHRcdFx0XHRcdGNoaWxkcmVuW2pdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRpZiAoaiA9PT0gY2hpbGRyZW5MZW4gLSAxKSBjaGlsZHJlbkxlbi0tO1xuXHRcdFx0XHRcdFx0XHRpZiAoaiA9PT0gbWluKSBtaW4rKztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIG1vcnBoIHRoZSBtYXRjaGVkL2ZvdW5kL2NyZWF0ZWQgRE9NIGNoaWxkIHRvIG1hdGNoIHZjaGlsZCAoZGVlcClcblx0XHRcdGNoaWxkID0gaWRpZmYoY2hpbGQsIHZjaGlsZCwgY29udGV4dCwgbW91bnRBbGwpO1xuXG5cdFx0XHRmID0gb3JpZ2luYWxDaGlsZHJlbltpXTtcblx0XHRcdGlmIChjaGlsZCAmJiBjaGlsZCAhPT0gZG9tICYmIGNoaWxkICE9PSBmKSB7XG5cdFx0XHRcdGlmIChmID09IG51bGwpIHtcblx0XHRcdFx0XHRkb20uYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGNoaWxkID09PSBmLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRcdFx0cmVtb3ZlTm9kZShmKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkb20uaW5zZXJ0QmVmb3JlKGNoaWxkLCBmKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIHJlbW92ZSB1bnVzZWQga2V5ZWQgY2hpbGRyZW46XG5cdGlmIChrZXllZExlbikge1xuXHRcdGZvciAodmFyIGkgaW4ga2V5ZWQpIHtcblx0XHRcdGlmIChrZXllZFtpXSAhPT0gdW5kZWZpbmVkKSByZWNvbGxlY3ROb2RlVHJlZShrZXllZFtpXSwgZmFsc2UpO1xuXHRcdH1cblx0fVxuXG5cdC8vIHJlbW92ZSBvcnBoYW5lZCB1bmtleWVkIGNoaWxkcmVuOlxuXHR3aGlsZSAobWluIDw9IGNoaWxkcmVuTGVuKSB7XG5cdFx0aWYgKChjaGlsZCA9IGNoaWxkcmVuW2NoaWxkcmVuTGVuLS1dKSAhPT0gdW5kZWZpbmVkKSByZWNvbGxlY3ROb2RlVHJlZShjaGlsZCwgZmFsc2UpO1xuXHR9XG59XG5cbi8qKiBSZWN1cnNpdmVseSByZWN5Y2xlIChvciBqdXN0IHVubW91bnQpIGEgbm9kZSBhbmQgaXRzIGRlc2NlbmRhbnRzLlxuICpcdEBwYXJhbSB7Tm9kZX0gbm9kZVx0XHRcdFx0XHRcdERPTSBub2RlIHRvIHN0YXJ0IHVubW91bnQvcmVtb3ZhbCBmcm9tXG4gKlx0QHBhcmFtIHtCb29sZWFufSBbdW5tb3VudE9ubHk9ZmFsc2VdXHRJZiBgdHJ1ZWAsIG9ubHkgdHJpZ2dlcnMgdW5tb3VudCBsaWZlY3ljbGUsIHNraXBzIHJlbW92YWxcbiAqL1xuZnVuY3Rpb24gcmVjb2xsZWN0Tm9kZVRyZWUobm9kZSwgdW5tb3VudE9ubHkpIHtcblx0dmFyIGNvbXBvbmVudCA9IG5vZGUuX2NvbXBvbmVudDtcblx0aWYgKGNvbXBvbmVudCkge1xuXHRcdC8vIGlmIG5vZGUgaXMgb3duZWQgYnkgYSBDb21wb25lbnQsIHVubW91bnQgdGhhdCBjb21wb25lbnQgKGVuZHMgdXAgcmVjdXJzaW5nIGJhY2sgaGVyZSlcblx0XHR1bm1vdW50Q29tcG9uZW50KGNvbXBvbmVudCk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gSWYgdGhlIG5vZGUncyBWTm9kZSBoYWQgYSByZWYgZnVuY3Rpb24sIGludm9rZSBpdCB3aXRoIG51bGwgaGVyZS5cblx0XHQvLyAodGhpcyBpcyBwYXJ0IG9mIHRoZSBSZWFjdCBzcGVjLCBhbmQgc21hcnQgZm9yIHVuc2V0dGluZyByZWZlcmVuY2VzKVxuXHRcdGlmIChub2RlWydfX3ByZWFjdGF0dHJfJ10gIT0gbnVsbCAmJiBub2RlWydfX3ByZWFjdGF0dHJfJ10ucmVmKSBub2RlWydfX3ByZWFjdGF0dHJfJ10ucmVmKG51bGwpO1xuXG5cdFx0aWYgKHVubW91bnRPbmx5ID09PSBmYWxzZSB8fCBub2RlWydfX3ByZWFjdGF0dHJfJ10gPT0gbnVsbCkge1xuXHRcdFx0cmVtb3ZlTm9kZShub2RlKTtcblx0XHR9XG5cblx0XHRyZW1vdmVDaGlsZHJlbihub2RlKTtcblx0fVxufVxuXG4vKiogUmVjb2xsZWN0L3VubW91bnQgYWxsIGNoaWxkcmVuLlxuICpcdC0gd2UgdXNlIC5sYXN0Q2hpbGQgaGVyZSBiZWNhdXNlIGl0IGNhdXNlcyBsZXNzIHJlZmxvdyB0aGFuIC5maXJzdENoaWxkXG4gKlx0LSBpdCdzIGFsc28gY2hlYXBlciB0aGFuIGFjY2Vzc2luZyB0aGUgLmNoaWxkTm9kZXMgTGl2ZSBOb2RlTGlzdFxuICovXG5mdW5jdGlvbiByZW1vdmVDaGlsZHJlbihub2RlKSB7XG5cdG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcblx0d2hpbGUgKG5vZGUpIHtcblx0XHR2YXIgbmV4dCA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xuXHRcdHJlY29sbGVjdE5vZGVUcmVlKG5vZGUsIHRydWUpO1xuXHRcdG5vZGUgPSBuZXh0O1xuXHR9XG59XG5cbi8qKiBBcHBseSBkaWZmZXJlbmNlcyBpbiBhdHRyaWJ1dGVzIGZyb20gYSBWTm9kZSB0byB0aGUgZ2l2ZW4gRE9NIEVsZW1lbnQuXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBkb21cdFx0RWxlbWVudCB3aXRoIGF0dHJpYnV0ZXMgdG8gZGlmZiBgYXR0cnNgIGFnYWluc3RcbiAqXHRAcGFyYW0ge09iamVjdH0gYXR0cnNcdFx0VGhlIGRlc2lyZWQgZW5kLXN0YXRlIGtleS12YWx1ZSBhdHRyaWJ1dGUgcGFpcnNcbiAqXHRAcGFyYW0ge09iamVjdH0gb2xkXHRcdFx0Q3VycmVudC9wcmV2aW91cyBhdHRyaWJ1dGVzIChmcm9tIHByZXZpb3VzIFZOb2RlIG9yIGVsZW1lbnQncyBwcm9wIGNhY2hlKVxuICovXG5mdW5jdGlvbiBkaWZmQXR0cmlidXRlcyhkb20sIGF0dHJzLCBvbGQpIHtcblx0dmFyIG5hbWU7XG5cblx0Ly8gcmVtb3ZlIGF0dHJpYnV0ZXMgbm8gbG9uZ2VyIHByZXNlbnQgb24gdGhlIHZub2RlIGJ5IHNldHRpbmcgdGhlbSB0byB1bmRlZmluZWRcblx0Zm9yIChuYW1lIGluIG9sZCkge1xuXHRcdGlmICghKGF0dHJzICYmIGF0dHJzW25hbWVdICE9IG51bGwpICYmIG9sZFtuYW1lXSAhPSBudWxsKSB7XG5cdFx0XHRzZXRBY2Nlc3Nvcihkb20sIG5hbWUsIG9sZFtuYW1lXSwgb2xkW25hbWVdID0gdW5kZWZpbmVkLCBpc1N2Z01vZGUpO1xuXHRcdH1cblx0fVxuXG5cdC8vIGFkZCBuZXcgJiB1cGRhdGUgY2hhbmdlZCBhdHRyaWJ1dGVzXG5cdGZvciAobmFtZSBpbiBhdHRycykge1xuXHRcdGlmIChuYW1lICE9PSAnY2hpbGRyZW4nICYmIG5hbWUgIT09ICdpbm5lckhUTUwnICYmICghKG5hbWUgaW4gb2xkKSB8fCBhdHRyc1tuYW1lXSAhPT0gKG5hbWUgPT09ICd2YWx1ZScgfHwgbmFtZSA9PT0gJ2NoZWNrZWQnID8gZG9tW25hbWVdIDogb2xkW25hbWVdKSkpIHtcblx0XHRcdHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSBhdHRyc1tuYW1lXSwgaXNTdmdNb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuLyoqIFJldGFpbnMgYSBwb29sIG9mIENvbXBvbmVudHMgZm9yIHJlLXVzZSwga2V5ZWQgb24gY29tcG9uZW50IG5hbWUuXG4gKlx0Tm90ZTogc2luY2UgY29tcG9uZW50IG5hbWVzIGFyZSBub3QgdW5pcXVlIG9yIGV2ZW4gbmVjZXNzYXJpbHkgYXZhaWxhYmxlLCB0aGVzZSBhcmUgcHJpbWFyaWx5IGEgZm9ybSBvZiBzaGFyZGluZy5cbiAqXHRAcHJpdmF0ZVxuICovXG52YXIgY29tcG9uZW50cyA9IHt9O1xuXG4vKiogUmVjbGFpbSBhIGNvbXBvbmVudCBmb3IgbGF0ZXIgcmUtdXNlIGJ5IHRoZSByZWN5Y2xlci4gKi9cbmZ1bmN0aW9uIGNvbGxlY3RDb21wb25lbnQoY29tcG9uZW50KSB7XG5cdHZhciBuYW1lID0gY29tcG9uZW50LmNvbnN0cnVjdG9yLm5hbWU7XG5cdChjb21wb25lbnRzW25hbWVdIHx8IChjb21wb25lbnRzW25hbWVdID0gW10pKS5wdXNoKGNvbXBvbmVudCk7XG59XG5cbi8qKiBDcmVhdGUgYSBjb21wb25lbnQuIE5vcm1hbGl6ZXMgZGlmZmVyZW5jZXMgYmV0d2VlbiBQRkMncyBhbmQgY2xhc3NmdWwgQ29tcG9uZW50cy4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudChDdG9yLCBwcm9wcywgY29udGV4dCkge1xuXHR2YXIgbGlzdCA9IGNvbXBvbmVudHNbQ3Rvci5uYW1lXSxcblx0ICAgIGluc3Q7XG5cblx0aWYgKEN0b3IucHJvdG90eXBlICYmIEN0b3IucHJvdG90eXBlLnJlbmRlcikge1xuXHRcdGluc3QgPSBuZXcgQ3Rvcihwcm9wcywgY29udGV4dCk7XG5cdFx0Q29tcG9uZW50LmNhbGwoaW5zdCwgcHJvcHMsIGNvbnRleHQpO1xuXHR9IGVsc2Uge1xuXHRcdGluc3QgPSBuZXcgQ29tcG9uZW50KHByb3BzLCBjb250ZXh0KTtcblx0XHRpbnN0LmNvbnN0cnVjdG9yID0gQ3Rvcjtcblx0XHRpbnN0LnJlbmRlciA9IGRvUmVuZGVyO1xuXHR9XG5cblx0aWYgKGxpc3QpIHtcblx0XHRmb3IgKHZhciBpID0gbGlzdC5sZW5ndGg7IGktLTspIHtcblx0XHRcdGlmIChsaXN0W2ldLmNvbnN0cnVjdG9yID09PSBDdG9yKSB7XG5cdFx0XHRcdGluc3QubmV4dEJhc2UgPSBsaXN0W2ldLm5leHRCYXNlO1xuXHRcdFx0XHRsaXN0LnNwbGljZShpLCAxKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBpbnN0O1xufVxuXG4vKiogVGhlIGAucmVuZGVyKClgIG1ldGhvZCBmb3IgYSBQRkMgYmFja2luZyBpbnN0YW5jZS4gKi9cbmZ1bmN0aW9uIGRvUmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCkge1xuXHRyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCk7XG59XG5cbi8qKiBTZXQgYSBjb21wb25lbnQncyBgcHJvcHNgIChnZW5lcmFsbHkgZGVyaXZlZCBmcm9tIEpTWCBhdHRyaWJ1dGVzKS5cbiAqXHRAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAqXHRAcGFyYW0ge09iamVjdH0gW29wdHNdXG4gKlx0QHBhcmFtIHtib29sZWFufSBbb3B0cy5yZW5kZXJTeW5jPWZhbHNlXVx0SWYgYHRydWVgIGFuZCB7QGxpbmsgb3B0aW9ucy5zeW5jQ29tcG9uZW50VXBkYXRlc30gaXMgYHRydWVgLCB0cmlnZ2VycyBzeW5jaHJvbm91cyByZW5kZXJpbmcuXG4gKlx0QHBhcmFtIHtib29sZWFufSBbb3B0cy5yZW5kZXI9dHJ1ZV1cdFx0XHRJZiBgZmFsc2VgLCBubyByZW5kZXIgd2lsbCBiZSB0cmlnZ2VyZWQuXG4gKi9cbmZ1bmN0aW9uIHNldENvbXBvbmVudFByb3BzKGNvbXBvbmVudCwgcHJvcHMsIG9wdHMsIGNvbnRleHQsIG1vdW50QWxsKSB7XG5cdGlmIChjb21wb25lbnQuX2Rpc2FibGUpIHJldHVybjtcblx0Y29tcG9uZW50Ll9kaXNhYmxlID0gdHJ1ZTtcblxuXHRpZiAoY29tcG9uZW50Ll9fcmVmID0gcHJvcHMucmVmKSBkZWxldGUgcHJvcHMucmVmO1xuXHRpZiAoY29tcG9uZW50Ll9fa2V5ID0gcHJvcHMua2V5KSBkZWxldGUgcHJvcHMua2V5O1xuXG5cdGlmICghY29tcG9uZW50LmJhc2UgfHwgbW91bnRBbGwpIHtcblx0XHRpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCgpO1xuXHR9IGVsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKSB7XG5cdFx0Y29tcG9uZW50LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMocHJvcHMsIGNvbnRleHQpO1xuXHR9XG5cblx0aWYgKGNvbnRleHQgJiYgY29udGV4dCAhPT0gY29tcG9uZW50LmNvbnRleHQpIHtcblx0XHRpZiAoIWNvbXBvbmVudC5wcmV2Q29udGV4dCkgY29tcG9uZW50LnByZXZDb250ZXh0ID0gY29tcG9uZW50LmNvbnRleHQ7XG5cdFx0Y29tcG9uZW50LmNvbnRleHQgPSBjb250ZXh0O1xuXHR9XG5cblx0aWYgKCFjb21wb25lbnQucHJldlByb3BzKSBjb21wb25lbnQucHJldlByb3BzID0gY29tcG9uZW50LnByb3BzO1xuXHRjb21wb25lbnQucHJvcHMgPSBwcm9wcztcblxuXHRjb21wb25lbnQuX2Rpc2FibGUgPSBmYWxzZTtcblxuXHRpZiAob3B0cyAhPT0gMCkge1xuXHRcdGlmIChvcHRzID09PSAxIHx8IG9wdGlvbnMuc3luY0NvbXBvbmVudFVwZGF0ZXMgIT09IGZhbHNlIHx8ICFjb21wb25lbnQuYmFzZSkge1xuXHRcdFx0cmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCwgMSwgbW91bnRBbGwpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbnF1ZXVlUmVuZGVyKGNvbXBvbmVudCk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKGNvbXBvbmVudC5fX3JlZikgY29tcG9uZW50Ll9fcmVmKGNvbXBvbmVudCk7XG59XG5cbi8qKiBSZW5kZXIgYSBDb21wb25lbnQsIHRyaWdnZXJpbmcgbmVjZXNzYXJ5IGxpZmVjeWNsZSBldmVudHMgYW5kIHRha2luZyBIaWdoLU9yZGVyIENvbXBvbmVudHMgaW50byBhY2NvdW50LlxuICpcdEBwYXJhbSB7Q29tcG9uZW50fSBjb21wb25lbnRcbiAqXHRAcGFyYW0ge09iamVjdH0gW29wdHNdXG4gKlx0QHBhcmFtIHtib29sZWFufSBbb3B0cy5idWlsZD1mYWxzZV1cdFx0SWYgYHRydWVgLCBjb21wb25lbnQgd2lsbCBidWlsZCBhbmQgc3RvcmUgYSBET00gbm9kZSBpZiBub3QgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggb25lLlxuICpcdEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIG9wdHMsIG1vdW50QWxsLCBpc0NoaWxkKSB7XG5cdGlmIChjb21wb25lbnQuX2Rpc2FibGUpIHJldHVybjtcblxuXHR2YXIgcHJvcHMgPSBjb21wb25lbnQucHJvcHMsXG5cdCAgICBzdGF0ZSA9IGNvbXBvbmVudC5zdGF0ZSxcblx0ICAgIGNvbnRleHQgPSBjb21wb25lbnQuY29udGV4dCxcblx0ICAgIHByZXZpb3VzUHJvcHMgPSBjb21wb25lbnQucHJldlByb3BzIHx8IHByb3BzLFxuXHQgICAgcHJldmlvdXNTdGF0ZSA9IGNvbXBvbmVudC5wcmV2U3RhdGUgfHwgc3RhdGUsXG5cdCAgICBwcmV2aW91c0NvbnRleHQgPSBjb21wb25lbnQucHJldkNvbnRleHQgfHwgY29udGV4dCxcblx0ICAgIGlzVXBkYXRlID0gY29tcG9uZW50LmJhc2UsXG5cdCAgICBuZXh0QmFzZSA9IGNvbXBvbmVudC5uZXh0QmFzZSxcblx0ICAgIGluaXRpYWxCYXNlID0gaXNVcGRhdGUgfHwgbmV4dEJhc2UsXG5cdCAgICBpbml0aWFsQ2hpbGRDb21wb25lbnQgPSBjb21wb25lbnQuX2NvbXBvbmVudCxcblx0ICAgIHNraXAgPSBmYWxzZSxcblx0ICAgIHJlbmRlcmVkLFxuXHQgICAgaW5zdCxcblx0ICAgIGNiYXNlO1xuXG5cdC8vIGlmIHVwZGF0aW5nXG5cdGlmIChpc1VwZGF0ZSkge1xuXHRcdGNvbXBvbmVudC5wcm9wcyA9IHByZXZpb3VzUHJvcHM7XG5cdFx0Y29tcG9uZW50LnN0YXRlID0gcHJldmlvdXNTdGF0ZTtcblx0XHRjb21wb25lbnQuY29udGV4dCA9IHByZXZpb3VzQ29udGV4dDtcblx0XHRpZiAob3B0cyAhPT0gMiAmJiBjb21wb25lbnQuc2hvdWxkQ29tcG9uZW50VXBkYXRlICYmIGNvbXBvbmVudC5zaG91bGRDb21wb25lbnRVcGRhdGUocHJvcHMsIHN0YXRlLCBjb250ZXh0KSA9PT0gZmFsc2UpIHtcblx0XHRcdHNraXAgPSB0cnVlO1xuXHRcdH0gZWxzZSBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxVcGRhdGUpIHtcblx0XHRcdGNvbXBvbmVudC5jb21wb25lbnRXaWxsVXBkYXRlKHByb3BzLCBzdGF0ZSwgY29udGV4dCk7XG5cdFx0fVxuXHRcdGNvbXBvbmVudC5wcm9wcyA9IHByb3BzO1xuXHRcdGNvbXBvbmVudC5zdGF0ZSA9IHN0YXRlO1xuXHRcdGNvbXBvbmVudC5jb250ZXh0ID0gY29udGV4dDtcblx0fVxuXG5cdGNvbXBvbmVudC5wcmV2UHJvcHMgPSBjb21wb25lbnQucHJldlN0YXRlID0gY29tcG9uZW50LnByZXZDb250ZXh0ID0gY29tcG9uZW50Lm5leHRCYXNlID0gbnVsbDtcblx0Y29tcG9uZW50Ll9kaXJ0eSA9IGZhbHNlO1xuXG5cdGlmICghc2tpcCkge1xuXHRcdHJlbmRlcmVkID0gY29tcG9uZW50LnJlbmRlcihwcm9wcywgc3RhdGUsIGNvbnRleHQpO1xuXG5cdFx0Ly8gY29udGV4dCB0byBwYXNzIHRvIHRoZSBjaGlsZCwgY2FuIGJlIHVwZGF0ZWQgdmlhIChncmFuZC0pcGFyZW50IGNvbXBvbmVudFxuXHRcdGlmIChjb21wb25lbnQuZ2V0Q2hpbGRDb250ZXh0KSB7XG5cdFx0XHRjb250ZXh0ID0gZXh0ZW5kKGV4dGVuZCh7fSwgY29udGV4dCksIGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQoKSk7XG5cdFx0fVxuXG5cdFx0dmFyIGNoaWxkQ29tcG9uZW50ID0gcmVuZGVyZWQgJiYgcmVuZGVyZWQubm9kZU5hbWUsXG5cdFx0ICAgIHRvVW5tb3VudCxcblx0XHQgICAgYmFzZTtcblxuXHRcdGlmICh0eXBlb2YgY2hpbGRDb21wb25lbnQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdC8vIHNldCB1cCBoaWdoIG9yZGVyIGNvbXBvbmVudCBsaW5rXG5cblx0XHRcdHZhciBjaGlsZFByb3BzID0gZ2V0Tm9kZVByb3BzKHJlbmRlcmVkKTtcblx0XHRcdGluc3QgPSBpbml0aWFsQ2hpbGRDb21wb25lbnQ7XG5cblx0XHRcdGlmIChpbnN0ICYmIGluc3QuY29uc3RydWN0b3IgPT09IGNoaWxkQ29tcG9uZW50ICYmIGNoaWxkUHJvcHMua2V5ID09IGluc3QuX19rZXkpIHtcblx0XHRcdFx0c2V0Q29tcG9uZW50UHJvcHMoaW5zdCwgY2hpbGRQcm9wcywgMSwgY29udGV4dCwgZmFsc2UpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG9Vbm1vdW50ID0gaW5zdDtcblxuXHRcdFx0XHRjb21wb25lbnQuX2NvbXBvbmVudCA9IGluc3QgPSBjcmVhdGVDb21wb25lbnQoY2hpbGRDb21wb25lbnQsIGNoaWxkUHJvcHMsIGNvbnRleHQpO1xuXHRcdFx0XHRpbnN0Lm5leHRCYXNlID0gaW5zdC5uZXh0QmFzZSB8fCBuZXh0QmFzZTtcblx0XHRcdFx0aW5zdC5fcGFyZW50Q29tcG9uZW50ID0gY29tcG9uZW50O1xuXHRcdFx0XHRzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAwLCBjb250ZXh0LCBmYWxzZSk7XG5cdFx0XHRcdHJlbmRlckNvbXBvbmVudChpbnN0LCAxLCBtb3VudEFsbCwgdHJ1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdGJhc2UgPSBpbnN0LmJhc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNiYXNlID0gaW5pdGlhbEJhc2U7XG5cblx0XHRcdC8vIGRlc3Ryb3kgaGlnaCBvcmRlciBjb21wb25lbnQgbGlua1xuXHRcdFx0dG9Vbm1vdW50ID0gaW5pdGlhbENoaWxkQ29tcG9uZW50O1xuXHRcdFx0aWYgKHRvVW5tb3VudCkge1xuXHRcdFx0XHRjYmFzZSA9IGNvbXBvbmVudC5fY29tcG9uZW50ID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGluaXRpYWxCYXNlIHx8IG9wdHMgPT09IDEpIHtcblx0XHRcdFx0aWYgKGNiYXNlKSBjYmFzZS5fY29tcG9uZW50ID0gbnVsbDtcblx0XHRcdFx0YmFzZSA9IGRpZmYoY2Jhc2UsIHJlbmRlcmVkLCBjb250ZXh0LCBtb3VudEFsbCB8fCAhaXNVcGRhdGUsIGluaXRpYWxCYXNlICYmIGluaXRpYWxCYXNlLnBhcmVudE5vZGUsIHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChpbml0aWFsQmFzZSAmJiBiYXNlICE9PSBpbml0aWFsQmFzZSAmJiBpbnN0ICE9PSBpbml0aWFsQ2hpbGRDb21wb25lbnQpIHtcblx0XHRcdHZhciBiYXNlUGFyZW50ID0gaW5pdGlhbEJhc2UucGFyZW50Tm9kZTtcblx0XHRcdGlmIChiYXNlUGFyZW50ICYmIGJhc2UgIT09IGJhc2VQYXJlbnQpIHtcblx0XHRcdFx0YmFzZVBhcmVudC5yZXBsYWNlQ2hpbGQoYmFzZSwgaW5pdGlhbEJhc2UpO1xuXG5cdFx0XHRcdGlmICghdG9Vbm1vdW50KSB7XG5cdFx0XHRcdFx0aW5pdGlhbEJhc2UuX2NvbXBvbmVudCA9IG51bGw7XG5cdFx0XHRcdFx0cmVjb2xsZWN0Tm9kZVRyZWUoaW5pdGlhbEJhc2UsIGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0b1VubW91bnQpIHtcblx0XHRcdHVubW91bnRDb21wb25lbnQodG9Vbm1vdW50KTtcblx0XHR9XG5cblx0XHRjb21wb25lbnQuYmFzZSA9IGJhc2U7XG5cdFx0aWYgKGJhc2UgJiYgIWlzQ2hpbGQpIHtcblx0XHRcdHZhciBjb21wb25lbnRSZWYgPSBjb21wb25lbnQsXG5cdFx0XHQgICAgdCA9IGNvbXBvbmVudDtcblx0XHRcdHdoaWxlICh0ID0gdC5fcGFyZW50Q29tcG9uZW50KSB7XG5cdFx0XHRcdChjb21wb25lbnRSZWYgPSB0KS5iYXNlID0gYmFzZTtcblx0XHRcdH1cblx0XHRcdGJhc2UuX2NvbXBvbmVudCA9IGNvbXBvbmVudFJlZjtcblx0XHRcdGJhc2UuX2NvbXBvbmVudENvbnN0cnVjdG9yID0gY29tcG9uZW50UmVmLmNvbnN0cnVjdG9yO1xuXHRcdH1cblx0fVxuXG5cdGlmICghaXNVcGRhdGUgfHwgbW91bnRBbGwpIHtcblx0XHRtb3VudHMudW5zaGlmdChjb21wb25lbnQpO1xuXHR9IGVsc2UgaWYgKCFza2lwKSB7XG5cdFx0Ly8gRW5zdXJlIHRoYXQgcGVuZGluZyBjb21wb25lbnREaWRNb3VudCgpIGhvb2tzIG9mIGNoaWxkIGNvbXBvbmVudHNcblx0XHQvLyBhcmUgY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50RGlkVXBkYXRlKCkgaG9vayBpbiB0aGUgcGFyZW50LlxuXHRcdC8vIE5vdGU6IGRpc2FibGVkIGFzIGl0IGNhdXNlcyBkdXBsaWNhdGUgaG9va3MsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L3ByZWFjdC9pc3N1ZXMvNzUwXG5cdFx0Ly8gZmx1c2hNb3VudHMoKTtcblxuXHRcdGlmIChjb21wb25lbnQuY29tcG9uZW50RGlkVXBkYXRlKSB7XG5cdFx0XHRjb21wb25lbnQuY29tcG9uZW50RGlkVXBkYXRlKHByZXZpb3VzUHJvcHMsIHByZXZpb3VzU3RhdGUsIHByZXZpb3VzQ29udGV4dCk7XG5cdFx0fVxuXHRcdGlmIChvcHRpb25zLmFmdGVyVXBkYXRlKSBvcHRpb25zLmFmdGVyVXBkYXRlKGNvbXBvbmVudCk7XG5cdH1cblxuXHRpZiAoY29tcG9uZW50Ll9yZW5kZXJDYWxsYmFja3MgIT0gbnVsbCkge1xuXHRcdHdoaWxlIChjb21wb25lbnQuX3JlbmRlckNhbGxiYWNrcy5sZW5ndGgpIHtcblx0XHRcdGNvbXBvbmVudC5fcmVuZGVyQ2FsbGJhY2tzLnBvcCgpLmNhbGwoY29tcG9uZW50KTtcblx0XHR9XG5cdH1cblxuXHRpZiAoIWRpZmZMZXZlbCAmJiAhaXNDaGlsZCkgZmx1c2hNb3VudHMoKTtcbn1cblxuLyoqIEFwcGx5IHRoZSBDb21wb25lbnQgcmVmZXJlbmNlZCBieSBhIFZOb2RlIHRvIHRoZSBET00uXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBkb21cdFRoZSBET00gbm9kZSB0byBtdXRhdGVcbiAqXHRAcGFyYW0ge1ZOb2RlfSB2bm9kZVx0QSBDb21wb25lbnQtcmVmZXJlbmNpbmcgVk5vZGVcbiAqXHRAcmV0dXJucyB7RWxlbWVudH0gZG9tXHRUaGUgY3JlYXRlZC9tdXRhdGVkIGVsZW1lbnRcbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBidWlsZENvbXBvbmVudEZyb21WTm9kZShkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCkge1xuXHR2YXIgYyA9IGRvbSAmJiBkb20uX2NvbXBvbmVudCxcblx0ICAgIG9yaWdpbmFsQ29tcG9uZW50ID0gYyxcblx0ICAgIG9sZERvbSA9IGRvbSxcblx0ICAgIGlzRGlyZWN0T3duZXIgPSBjICYmIGRvbS5fY29tcG9uZW50Q29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lLFxuXHQgICAgaXNPd25lciA9IGlzRGlyZWN0T3duZXIsXG5cdCAgICBwcm9wcyA9IGdldE5vZGVQcm9wcyh2bm9kZSk7XG5cdHdoaWxlIChjICYmICFpc093bmVyICYmIChjID0gYy5fcGFyZW50Q29tcG9uZW50KSkge1xuXHRcdGlzT3duZXIgPSBjLmNvbnN0cnVjdG9yID09PSB2bm9kZS5ub2RlTmFtZTtcblx0fVxuXG5cdGlmIChjICYmIGlzT3duZXIgJiYgKCFtb3VudEFsbCB8fCBjLl9jb21wb25lbnQpKSB7XG5cdFx0c2V0Q29tcG9uZW50UHJvcHMoYywgcHJvcHMsIDMsIGNvbnRleHQsIG1vdW50QWxsKTtcblx0XHRkb20gPSBjLmJhc2U7XG5cdH0gZWxzZSB7XG5cdFx0aWYgKG9yaWdpbmFsQ29tcG9uZW50ICYmICFpc0RpcmVjdE93bmVyKSB7XG5cdFx0XHR1bm1vdW50Q29tcG9uZW50KG9yaWdpbmFsQ29tcG9uZW50KTtcblx0XHRcdGRvbSA9IG9sZERvbSA9IG51bGw7XG5cdFx0fVxuXG5cdFx0YyA9IGNyZWF0ZUNvbXBvbmVudCh2bm9kZS5ub2RlTmFtZSwgcHJvcHMsIGNvbnRleHQpO1xuXHRcdGlmIChkb20gJiYgIWMubmV4dEJhc2UpIHtcblx0XHRcdGMubmV4dEJhc2UgPSBkb207XG5cdFx0XHQvLyBwYXNzaW5nIGRvbS9vbGREb20gYXMgbmV4dEJhc2Ugd2lsbCByZWN5Y2xlIGl0IGlmIHVudXNlZCwgc28gYnlwYXNzIHJlY3ljbGluZyBvbiBMMjI5OlxuXHRcdFx0b2xkRG9tID0gbnVsbDtcblx0XHR9XG5cdFx0c2V0Q29tcG9uZW50UHJvcHMoYywgcHJvcHMsIDEsIGNvbnRleHQsIG1vdW50QWxsKTtcblx0XHRkb20gPSBjLmJhc2U7XG5cblx0XHRpZiAob2xkRG9tICYmIGRvbSAhPT0gb2xkRG9tKSB7XG5cdFx0XHRvbGREb20uX2NvbXBvbmVudCA9IG51bGw7XG5cdFx0XHRyZWNvbGxlY3ROb2RlVHJlZShvbGREb20sIGZhbHNlKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZG9tO1xufVxuXG4vKiogUmVtb3ZlIGEgY29tcG9uZW50IGZyb20gdGhlIERPTSBhbmQgcmVjeWNsZSBpdC5cbiAqXHRAcGFyYW0ge0NvbXBvbmVudH0gY29tcG9uZW50XHRUaGUgQ29tcG9uZW50IGluc3RhbmNlIHRvIHVubW91bnRcbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50KGNvbXBvbmVudCkge1xuXHRpZiAob3B0aW9ucy5iZWZvcmVVbm1vdW50KSBvcHRpb25zLmJlZm9yZVVubW91bnQoY29tcG9uZW50KTtcblxuXHR2YXIgYmFzZSA9IGNvbXBvbmVudC5iYXNlO1xuXG5cdGNvbXBvbmVudC5fZGlzYWJsZSA9IHRydWU7XG5cblx0aWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG5cblx0Y29tcG9uZW50LmJhc2UgPSBudWxsO1xuXG5cdC8vIHJlY3Vyc2l2ZWx5IHRlYXIgZG93biAmIHJlY29sbGVjdCBoaWdoLW9yZGVyIGNvbXBvbmVudCBjaGlsZHJlbjpcblx0dmFyIGlubmVyID0gY29tcG9uZW50Ll9jb21wb25lbnQ7XG5cdGlmIChpbm5lcikge1xuXHRcdHVubW91bnRDb21wb25lbnQoaW5uZXIpO1xuXHR9IGVsc2UgaWYgKGJhc2UpIHtcblx0XHRpZiAoYmFzZVsnX19wcmVhY3RhdHRyXyddICYmIGJhc2VbJ19fcHJlYWN0YXR0cl8nXS5yZWYpIGJhc2VbJ19fcHJlYWN0YXR0cl8nXS5yZWYobnVsbCk7XG5cblx0XHRjb21wb25lbnQubmV4dEJhc2UgPSBiYXNlO1xuXG5cdFx0cmVtb3ZlTm9kZShiYXNlKTtcblx0XHRjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCk7XG5cblx0XHRyZW1vdmVDaGlsZHJlbihiYXNlKTtcblx0fVxuXG5cdGlmIChjb21wb25lbnQuX19yZWYpIGNvbXBvbmVudC5fX3JlZihudWxsKTtcbn1cblxuLyoqIEJhc2UgQ29tcG9uZW50IGNsYXNzLlxuICpcdFByb3ZpZGVzIGBzZXRTdGF0ZSgpYCBhbmQgYGZvcmNlVXBkYXRlKClgLCB3aGljaCB0cmlnZ2VyIHJlbmRlcmluZy5cbiAqXHRAcHVibGljXG4gKlxuICpcdEBleGFtcGxlXG4gKlx0Y2xhc3MgTXlGb28gZXh0ZW5kcyBDb21wb25lbnQge1xuICpcdFx0cmVuZGVyKHByb3BzLCBzdGF0ZSkge1xuICpcdFx0XHRyZXR1cm4gPGRpdiAvPjtcbiAqXHRcdH1cbiAqXHR9XG4gKi9cbmZ1bmN0aW9uIENvbXBvbmVudChwcm9wcywgY29udGV4dCkge1xuXHR0aGlzLl9kaXJ0eSA9IHRydWU7XG5cblx0LyoqIEBwdWJsaWNcbiAgKlx0QHR5cGUge29iamVjdH1cbiAgKi9cblx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcblxuXHQvKiogQHB1YmxpY1xuICAqXHRAdHlwZSB7b2JqZWN0fVxuICAqL1xuXHR0aGlzLnByb3BzID0gcHJvcHM7XG5cblx0LyoqIEBwdWJsaWNcbiAgKlx0QHR5cGUge29iamVjdH1cbiAgKi9cblx0dGhpcy5zdGF0ZSA9IHRoaXMuc3RhdGUgfHwge307XG59XG5cbmV4dGVuZChDb21wb25lbnQucHJvdG90eXBlLCB7XG5cblx0LyoqIFJldHVybnMgYSBgYm9vbGVhbmAgaW5kaWNhdGluZyBpZiB0aGUgY29tcG9uZW50IHNob3VsZCByZS1yZW5kZXIgd2hlbiByZWNlaXZpbmcgdGhlIGdpdmVuIGBwcm9wc2AgYW5kIGBzdGF0ZWAuXG4gICpcdEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgKlx0QHBhcmFtIHtvYmplY3R9IG5leHRTdGF0ZVxuICAqXHRAcGFyYW0ge29iamVjdH0gbmV4dENvbnRleHRcbiAgKlx0QHJldHVybnMge0Jvb2xlYW59IHNob3VsZCB0aGUgY29tcG9uZW50IHJlLXJlbmRlclxuICAqXHRAbmFtZSBzaG91bGRDb21wb25lbnRVcGRhdGVcbiAgKlx0QGZ1bmN0aW9uXG4gICovXG5cblx0LyoqIFVwZGF0ZSBjb21wb25lbnQgc3RhdGUgYnkgY29weWluZyBwcm9wZXJ0aWVzIGZyb20gYHN0YXRlYCB0byBgdGhpcy5zdGF0ZWAuXG4gICpcdEBwYXJhbSB7b2JqZWN0fSBzdGF0ZVx0XHRBIGhhc2ggb2Ygc3RhdGUgcHJvcGVydGllcyB0byB1cGRhdGUgd2l0aCBuZXcgdmFsdWVzXG4gICpcdEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHRBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbmNlIGNvbXBvbmVudCBzdGF0ZSBpcyB1cGRhdGVkXG4gICovXG5cdHNldFN0YXRlOiBmdW5jdGlvbiBzZXRTdGF0ZShzdGF0ZSwgY2FsbGJhY2spIHtcblx0XHR2YXIgcyA9IHRoaXMuc3RhdGU7XG5cdFx0aWYgKCF0aGlzLnByZXZTdGF0ZSkgdGhpcy5wcmV2U3RhdGUgPSBleHRlbmQoe30sIHMpO1xuXHRcdGV4dGVuZChzLCB0eXBlb2Ygc3RhdGUgPT09ICdmdW5jdGlvbicgPyBzdGF0ZShzLCB0aGlzLnByb3BzKSA6IHN0YXRlKTtcblx0XHRpZiAoY2FsbGJhY2spICh0aGlzLl9yZW5kZXJDYWxsYmFja3MgPSB0aGlzLl9yZW5kZXJDYWxsYmFja3MgfHwgW10pLnB1c2goY2FsbGJhY2spO1xuXHRcdGVucXVldWVSZW5kZXIodGhpcyk7XG5cdH0sXG5cblxuXHQvKiogSW1tZWRpYXRlbHkgcGVyZm9ybSBhIHN5bmNocm9ub3VzIHJlLXJlbmRlciBvZiB0aGUgY29tcG9uZW50LlxuICAqXHRAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1x0XHRBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhZnRlciBjb21wb25lbnQgaXMgcmUtcmVuZGVyZWQuXG4gICpcdEBwcml2YXRlXG4gICovXG5cdGZvcmNlVXBkYXRlOiBmdW5jdGlvbiBmb3JjZVVwZGF0ZShjYWxsYmFjaykge1xuXHRcdGlmIChjYWxsYmFjaykgKHRoaXMuX3JlbmRlckNhbGxiYWNrcyA9IHRoaXMuX3JlbmRlckNhbGxiYWNrcyB8fCBbXSkucHVzaChjYWxsYmFjayk7XG5cdFx0cmVuZGVyQ29tcG9uZW50KHRoaXMsIDIpO1xuXHR9LFxuXG5cblx0LyoqIEFjY2VwdHMgYHByb3BzYCBhbmQgYHN0YXRlYCwgYW5kIHJldHVybnMgYSBuZXcgVmlydHVhbCBET00gdHJlZSB0byBidWlsZC5cbiAgKlx0VmlydHVhbCBET00gaXMgZ2VuZXJhbGx5IGNvbnN0cnVjdGVkIHZpYSBbSlNYXShodHRwOi8vamFzb25mb3JtYXQuY29tL3d0Zi1pcy1qc3gpLlxuICAqXHRAcGFyYW0ge29iamVjdH0gcHJvcHNcdFx0UHJvcHMgKGVnOiBKU1ggYXR0cmlidXRlcykgcmVjZWl2ZWQgZnJvbSBwYXJlbnQgZWxlbWVudC9jb21wb25lbnRcbiAgKlx0QHBhcmFtIHtvYmplY3R9IHN0YXRlXHRcdFRoZSBjb21wb25lbnQncyBjdXJyZW50IHN0YXRlXG4gICpcdEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XHRcdENvbnRleHQgb2JqZWN0IChpZiBhIHBhcmVudCBjb21wb25lbnQgaGFzIHByb3ZpZGVkIGNvbnRleHQpXG4gICpcdEByZXR1cm5zIFZOb2RlXG4gICovXG5cdHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge31cbn0pO1xuXG4vKiogUmVuZGVyIEpTWCBpbnRvIGEgYHBhcmVudGAgRWxlbWVudC5cbiAqXHRAcGFyYW0ge1ZOb2RlfSB2bm9kZVx0XHRBIChKU1gpIFZOb2RlIHRvIHJlbmRlclxuICpcdEBwYXJhbSB7RWxlbWVudH0gcGFyZW50XHRcdERPTSBlbGVtZW50IHRvIHJlbmRlciBpbnRvXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBbbWVyZ2VdXHRBdHRlbXB0IHRvIHJlLXVzZSBhbiBleGlzdGluZyBET00gdHJlZSByb290ZWQgYXQgYG1lcmdlYFxuICpcdEBwdWJsaWNcbiAqXG4gKlx0QGV4YW1wbGVcbiAqXHQvLyByZW5kZXIgYSBkaXYgaW50byA8Ym9keT46XG4gKlx0cmVuZGVyKDxkaXYgaWQ9XCJoZWxsb1wiPmhlbGxvITwvZGl2PiwgZG9jdW1lbnQuYm9keSk7XG4gKlxuICpcdEBleGFtcGxlXG4gKlx0Ly8gcmVuZGVyIGEgXCJUaGluZ1wiIGNvbXBvbmVudCBpbnRvICNmb286XG4gKlx0Y29uc3QgVGhpbmcgPSAoeyBuYW1lIH0pID0+IDxzcGFuPnsgbmFtZSB9PC9zcGFuPjtcbiAqXHRyZW5kZXIoPFRoaW5nIG5hbWU9XCJvbmVcIiAvPiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZvbycpKTtcbiAqL1xuZnVuY3Rpb24gcmVuZGVyKHZub2RlLCBwYXJlbnQsIG1lcmdlKSB7XG4gIHJldHVybiBkaWZmKG1lcmdlLCB2bm9kZSwge30sIGZhbHNlLCBwYXJlbnQsIGZhbHNlKTtcbn1cblxudmFyIHByZWFjdCA9IHtcblx0aDogaCxcblx0Y3JlYXRlRWxlbWVudDogaCxcblx0Y2xvbmVFbGVtZW50OiBjbG9uZUVsZW1lbnQsXG5cdENvbXBvbmVudDogQ29tcG9uZW50LFxuXHRyZW5kZXI6IHJlbmRlcixcblx0cmVyZW5kZXI6IHJlcmVuZGVyLFxuXHRvcHRpb25zOiBvcHRpb25zXG59O1xuXG5leHBvcnQgeyBoLCBoIGFzIGNyZWF0ZUVsZW1lbnQsIGNsb25lRWxlbWVudCwgQ29tcG9uZW50LCByZW5kZXIsIHJlcmVuZGVyLCBvcHRpb25zIH07XG5leHBvcnQgZGVmYXVsdCBwcmVhY3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcmVhY3QuZXNtLmpzLm1hcFxuIiwibW9kdWxlLmV4cG9ydHMgPSB3aW5kb3cuY29udGVudGZ1bEV4dGVuc2lvbjsiLCJpbXBvcnQgKiBhcyBjb250ZW50ZnVsRXh0ZW5zaW9uIGZyb20gJ2NvbnRlbnRmdWwtdWktZXh0ZW5zaW9ucy1zZGsnXG5pbXBvcnQge0lDb250ZW50ZnVsRXh0ZW5zaW9uU2RrfSBmcm9tICdjb250ZW50ZnVsLXVpLWV4dGVuc2lvbnMtc2RrJ1xuaW1wb3J0IHtoLCByZW5kZXIsIENvbXBvbmVudH0gZnJvbSAncHJlYWN0J1xuXG5kZWNsYXJlIGZ1bmN0aW9uIHJlcXVpcmUobW9kdWxlOiBzdHJpbmcpOiBhbnk7XG5jb25zdCBzdHlsZXMgPSByZXF1aXJlKCcuL3N0eWxlLnNjc3MnKVxuXG5jb250ZW50ZnVsRXh0ZW5zaW9uLmluaXQoKGV4dGVuc2lvbikgPT4ge1xuICByZW5kZXIoPEFwcCB7Li4uZXh0ZW5zaW9ufSAvPixcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVhY3Qtcm9vdCcpKVxufSlcblxuaW50ZXJmYWNlIElBcHBTdGF0ZSB7XG4gIGZpZWxkVmFsdWU6IHN0cmluZ1xuICBwYXJlbnRTbHVnOiBzdHJpbmdcbn1cblxuY2xhc3MgQXBwIGV4dGVuZHMgQ29tcG9uZW50PElDb250ZW50ZnVsRXh0ZW5zaW9uU2RrLCBJQXBwU3RhdGU+IHtcblxuICBvblNsdWdDaGFuZ2UoZXZlbnQ6IHsgb2xkVmFsdWU6IHN0cmluZywgbmV3VmFsdWU6IHN0cmluZyB9KSB7XG4gICAgdGhpcy5wcm9wcy5maWVsZC5zZXRWYWx1ZShwYXRoSm9pbih0aGlzLnN0YXRlLnBhcmVudFNsdWcsIGV2ZW50Lm5ld1ZhbHVlKSlcbiAgfSBcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGZpZWxkVmFsdWU6IHRoaXMucHJvcHMuZmllbGQuZ2V0VmFsdWUoKVxuICAgIH0pXG5cbiAgICAvLyBmaW5kIHRoZSBwYWdlIHBvaW50aW5nIHRvIHRoaXMgcGFnZVxuICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnByb3BzLnNwYWNlLmdldEVudHJpZXMoe1xuICAgICAgY29udGVudF90eXBlOiAncGFnZScsXG4gICAgICAnZmllbGRzLnN1YnBhZ2VzLnN5cy5pZCc6IHRoaXMucHJvcHMuZW50cnkuZ2V0U3lzKCkuaWRcbiAgICB9KS50aGVuKChlbnRyaWVzKSA9PiB7XG4gICAgICBpZiAoZW50cmllcy5pdGVtcy5sZW5ndGggPD0gMCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyZW50U2x1ZyA9IGVudHJpZXMuaXRlbXNbMF0uZmllbGRzLnNsdWdbJ2VuLVVTJ11cbiAgICAgIGxldCBmaWVsZFZhbHVlID0gdGhpcy5zdGF0ZS5maWVsZFZhbHVlXG4gICAgICBmaWVsZFZhbHVlID0gdHJpbVN0YXJ0KGZpZWxkVmFsdWUsIHBhcmVudFNsdWcpXG4gICAgICBmaWVsZFZhbHVlID0gdHJpbVN0YXJ0KGZpZWxkVmFsdWUsICcvJylcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHBhcmVudFNsdWc6IHBhcmVudFNsdWcsXG4gICAgICAgIGZpZWxkVmFsdWVcbiAgICAgIH0pXG4gICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHF1ZXJ5aW5nIScsIGVycilcbiAgICB9KVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZmllbGRWYWx1ZSwgcGFyZW50U2x1ZyB9ID0gdGhpcy5zdGF0ZVxuXG4gICAgcmV0dXJuIDxkaXY+XG4gICAgICA8aDI+S1ZQIEVkaXRvcjwvaDI+XG4gICAgPC9kaXY+XG4gIH1cbn1cblxuZnVuY3Rpb24gcGF0aEpvaW4oLi4ucGF0aEFycjogc3RyaW5nW10pe1xuICByZXR1cm4gcGF0aEFyci5qb2luKFwiL1wiKS5yZXBsYWNlKC9cXC97Mix9LywgJy8nKTtcbn1cblxuZnVuY3Rpb24gYmFzZW5hbWUocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgcGF0aFBhcnRzID0gcGF0aC5zcGxpdCgnLycpXG4gIHJldHVybiBwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdXG59XG5cbmZ1bmN0aW9uIHRyaW1TdGFydCh0b1RyaW06IHN0cmluZywgdmFsdWVUb1JlbW92ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgd2hpbGUgKHRvVHJpbS5zdGFydHNXaXRoKHZhbHVlVG9SZW1vdmUpKSB7XG4gICAgdG9UcmltID0gdG9UcmltLnN1YnN0cmluZyh2YWx1ZVRvUmVtb3ZlLmxlbmd0aClcbiAgfVxuICByZXR1cm4gdG9UcmltXG59XG5cbi8vIHBvbHlmaWxsc1xuZGVjbGFyZSBnbG9iYWwge1xuICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvc3RhcnRzV2l0aFxuICBpbnRlcmZhY2UgU3RyaW5nIHtcbiAgICBzdGFydHNXaXRoKHNlYXJjaDogc3RyaW5nLCBwb3M/OiBudW1iZXIpOiBib29sZWFuXG4gIH1cbn1cblxuaWYgKCFTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGgpIHtcbiAgU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoID0gZnVuY3Rpb24oc2VhcmNoLCBwb3MpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzdHIoIXBvcyB8fCBwb3MgPCAwID8gMCA6ICtwb3MsIHNlYXJjaC5sZW5ndGgpID09PSBzZWFyY2g7XG4gIH07XG59Il0sInNvdXJjZVJvb3QiOiIifQ==</script></body>
</html>