<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="https://contentful.github.io/ui-extensions-sdk/cf-extension.css">
    <script src="https://contentful.github.io/ui-extensions-sdk/cf-extension-api.js"></script>
    <script
			  src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
    <style>
       #wm-logo {
        width: 16px;
        position: absolute;
        right: 0;
        top: 0;
       }
    </style>
    <title>kvp-editor@0.3.1</title>
  <style type="text/css">.kvp-form__form {
  width: 100%;
  display: inline-block;
  vertical-align: top; }
  .kvp-form__form button {
    margin-left: 4%;
    max-width: 12%; }

.kvp-form__table {
  width: 100%;
  display: inline-block;
  vertical-align: top; }
  .kvp-form__table table {
    width: 100%; }
  .kvp-form__table__row .buttons {
    float: right;
    display: flex; }
    .kvp-form__table__row .buttons .flex-vert {
      display: flex;
      flex-direction: column;
      padding-right: 4px; }
  .kvp-form__table__row td.text {
    border-bottom: 1px solid #dee2e6;
    margin: 0px 8px; }
    .kvp-form__table__row td.text:first-child {
      text-transform: uppercase;
      text-align: right; }
  .kvp-form__table__row.form td.text {
    border-bottom: none; }
  .kvp-form__table .divider {
    text-align: center;
    color: #dee2e6; }

.kvp-form .cf-form-input {
  display: inline-block;
  padding: 2px; }

.kvp-form .error {
  color: red; }

.disabled .kvp-form {
  cursor: wait !important; }
  .disabled .kvp-form a, .disabled .kvp-form input, .disabled .kvp-form button {
    cursor: wait !important;
    color: gray !important; }


/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMva3ZwLWVkaXRvci9zdHlsZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsbUJBQW1COztBQUVuQjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUI7O0FBRW5CO0FBQ0E7QUFDQSxlQUFlOztBQUVmO0FBQ0EsYUFBYTs7QUFFYjtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0EsMkJBQTJCIiwiZmlsZSI6ImRpc3Qva3ZwLWVkaXRvci9zdHlsZS5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIua3ZwLWZvcm1fX2Zvcm0ge1xuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB9XG4gIC5rdnAtZm9ybV9fZm9ybSBidXR0b24ge1xuICAgIG1hcmdpbi1sZWZ0OiA0JTtcbiAgICBtYXgtd2lkdGg6IDEyJTsgfVxuXG4ua3ZwLWZvcm1fX3RhYmxlIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDsgfVxuICAua3ZwLWZvcm1fX3RhYmxlIHRhYmxlIHtcbiAgICB3aWR0aDogMTAwJTsgfVxuICAua3ZwLWZvcm1fX3RhYmxlX19yb3cgLmJ1dHRvbnMge1xuICAgIGZsb2F0OiByaWdodDtcbiAgICBkaXNwbGF5OiBmbGV4OyB9XG4gICAgLmt2cC1mb3JtX190YWJsZV9fcm93IC5idXR0b25zIC5mbGV4LXZlcnQge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBwYWRkaW5nLXJpZ2h0OiA0cHg7IH1cbiAgLmt2cC1mb3JtX190YWJsZV9fcm93IHRkLnRleHQge1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGVlMmU2O1xuICAgIG1hcmdpbjogMHB4IDhweDsgfVxuICAgIC5rdnAtZm9ybV9fdGFibGVfX3JvdyB0ZC50ZXh0OmZpcnN0LWNoaWxkIHtcbiAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICB0ZXh0LWFsaWduOiByaWdodDsgfVxuICAua3ZwLWZvcm1fX3RhYmxlX19yb3cuZm9ybSB0ZC50ZXh0IHtcbiAgICBib3JkZXItYm90dG9tOiBub25lOyB9XG4gIC5rdnAtZm9ybV9fdGFibGUgLmRpdmlkZXIge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBjb2xvcjogI2RlZTJlNjsgfVxuXG4ua3ZwLWZvcm0gLmNmLWZvcm0taW5wdXQge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHBhZGRpbmc6IDJweDsgfVxuXG4ua3ZwLWZvcm0gLmVycm9yIHtcbiAgY29sb3I6IHJlZDsgfVxuXG4uZGlzYWJsZWQgLmt2cC1mb3JtIHtcbiAgY3Vyc29yOiB3YWl0ICFpbXBvcnRhbnQ7IH1cbiAgLmRpc2FibGVkIC5rdnAtZm9ybSBhLCAuZGlzYWJsZWQgLmt2cC1mb3JtIGlucHV0LCAuZGlzYWJsZWQgLmt2cC1mb3JtIGJ1dHRvbiB7XG4gICAgY3Vyc29yOiB3YWl0ICFpbXBvcnRhbnQ7XG4gICAgY29sb3I6IGdyYXkgIWltcG9ydGFudDsgfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==*/</style></head>
  <body>
    <div id="wm-logo" title="kvp-editor@0.3.1"><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 119.2 119.2"><path fill="#009dba" d="M84.9 0H34.4A34.4 34.4 0 0 0 0 34.4v50.5a34.46 34.46 0 0 0 34.4 34.4h50.5a34.46 34.46 0 0 0 34.4-34.4V34.4A34.53 34.53 0 0 0 84.9 0zM34.4 9.5h50.5a24.8 24.8 0 0 1 24.8 24.8v18.2c-9.3 7.8-18.8 8.9-28.9 7.5l5.3-20a4.75 4.75 0 0 0-9.2-2.4s-2.7 10-5.5 20.6c-.7-.2-1.3-.3-2-.5l-5-20a4.72 4.72 0 0 0-4.6-3.6 4.72 4.72 0 0 0-4.6 3.6s-1.7 6.9-3.8 15.3c-1.7-.4-3.4-.7-5.1-1-2.2-8-4-14.4-4-14.4a4.78 4.78 0 0 0-9.2 2.6l3 10.7H34a53.57 53.57 0 0 0-24.4 5.8V34.4A24.82 24.82 0 0 1 34.4 9.5zm50.5 100.2H34.4A24.8 24.8 0 0 1 9.6 84.9v-17A41.77 41.77 0 0 1 34 60.4c1.6 0 3.2.1 4.8.2l6 21.6a4.82 4.82 0 0 0 9.3-.1s2-8.1 4.4-17.4l2.1.6 1.2.3c2.2 8.9 4.1 16.5 4.1 16.5a4.72 4.72 0 0 0 4.6 3.6 4.63 4.63 0 0 0 4.6-3.5l3.4-12.7c10.4 1.6 20.9 1.1 31.3-5.1V85a25 25 0 0 1-24.9 24.7z"/></svg></img></div>
    
    <div id="react-root"></div>
  <script type="text/javascript">!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";n.r(t),n.d(t,"h",function(){return a}),n.d(t,"createElement",function(){return a}),n.d(t,"cloneElement",function(){return u}),n.d(t,"Component",function(){return j}),n.d(t,"render",function(){return R}),n.d(t,"rerender",function(){return d}),n.d(t,"options",function(){return o});var o={},r=[],i=[];function a(e,t){var n,a,s,l,u=i;for(l=arguments.length;l-- >2;)r.push(arguments[l]);for(t&&null!=t.children&&(r.length||r.push(t.children),delete t.children);r.length;)if((a=r.pop())&&void 0!==a.pop)for(l=a.length;l--;)r.push(a[l]);else"boolean"==typeof a&&(a=null),(s="function"!=typeof e)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(s=!1)),s&&n?u[u.length-1]+=a:u===i?u=[a]:u.push(a),n=s;var c=new function(){};return c.nodeName=e,c.children=u,c.attributes=null==t?void 0:t,c.key=null==t?void 0:t.key,void 0!==o.vnode&&o.vnode(c),c}function s(e,t){for(var n in t)e[n]=t[n];return e}var l="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function u(e,t){return a(e.nodeName,s(s({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var c=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function f(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&(o.debounceRendering||l)(d)}function d(){var e,t=p;for(p=[];e=t.pop();)e._dirty&&M(e)}function h(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function v(e){var t=s({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function m(e){var t=e.parentNode;t&&t.removeChild(e)}function _(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var i in n)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"==typeof o[i]&&!1===c.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,y,a):e.removeEventListener(t,y,a),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var s=r&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function y(e){return this._listeners[e.type](o.event&&o.event(e)||e)}var b=[],g=0,C=!1,w=!1;function x(){for(var e;e=b.pop();)o.afterMount&&o.afterMount(e),e.componentDidMount&&e.componentDidMount()}function N(e,t,n,o,r,i){g++||(C=null!=r&&void 0!==r.ownerSVGElement,w=null!=e&&!("__preactattr_"in e));var a=k(e,t,n,o,i);return r&&a.parentNode!==r&&r.appendChild(a),--g||(w=!1,i||x()),a}function k(e,t,n,o,r){var i=e,a=C;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),S(e,!0))),i.__preactattr_=!0,i;var s,l,u=t.nodeName;if("function"==typeof u)return function(e,t,n,o){var r=e&&e._component,i=r,a=e,s=r&&e._componentConstructor===t.nodeName,l=s,u=v(t);for(;r&&!l&&(r=r._parentComponent);)l=r.constructor===t.nodeName;r&&l&&(!o||r._component)?(U(r,u,3,n,o),e=r.base):(i&&!s&&(E(i),e=a=null),r=I(t.nodeName,u,n),e&&!r.nextBase&&(r.nextBase=e,a=null),U(r,u,1,n,o),e=r.base,a&&e!==a&&(a._component=null,S(a,!1)));return e}(e,t,n,o);if(C="svg"===u||"foreignObject"!==u&&C,u=String(u),(!e||!h(e,u))&&(s=u,(l=C?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,i=l,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),S(e,!0)}var c=i.firstChild,p=i.__preactattr_,f=t.children;if(null==p){p=i.__preactattr_={};for(var d=i.attributes,y=d.length;y--;)p[d[y].name]=d[y].value}return!w&&f&&1===f.length&&"string"==typeof f[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=f[0]&&(c.nodeValue=f[0]):(f&&f.length||null!=c)&&function(e,t,n,o,r){var i,a,s,l,u,c=e.childNodes,p=[],f={},d=0,v=0,_=c.length,y=0,b=t?t.length:0;if(0!==_)for(var g=0;g<_;g++){var C=c[g],w=C.__preactattr_,x=b&&w?C._component?C._component.__key:w.key:null;null!=x?(d++,f[x]=C):(w||(void 0!==C.splitText?!r||C.nodeValue.trim():r))&&(p[y++]=C)}if(0!==b)for(var g=0;g<b;g++){l=t[g],u=null;var x=l.key;if(null!=x)d&&void 0!==f[x]&&(u=f[x],f[x]=void 0,d--);else if(!u&&v<y)for(i=v;i<y;i++)if(void 0!==p[i]&&(N=a=p[i],V=r,"string"==typeof(P=l)||"number"==typeof P?void 0!==N.splitText:"string"==typeof P.nodeName?!N._componentConstructor&&h(N,P.nodeName):V||N._componentConstructor===P.nodeName)){u=a,p[i]=void 0,i===y-1&&y--,i===v&&v++;break}u=k(u,l,n,o),s=c[g],u&&u!==e&&u!==s&&(null==s?e.appendChild(u):u===s.nextSibling?m(s):e.insertBefore(u,s))}var N,P,V;if(d)for(var g in f)void 0!==f[g]&&S(f[g],!1);for(;v<=y;)void 0!==(u=p[y--])&&S(u,!1)}(i,f,n,o,w||null!=p.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||_(e,o,n[o],n[o]=void 0,C);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||_(e,o,n[o],n[o]=t[o],C)}(i,t.attributes,p),C=a,i}function S(e,t){var n=e._component;n?E(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||m(e),P(e))}function P(e){for(e=e.lastChild;e;){var t=e.previousSibling;S(e,!0),e=t}}var V={};function I(e,t,n){var o,r=V[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),j.call(o,t,n)):((o=new j(t,n)).constructor=e,o.render=O),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.nextBase=r[i].nextBase,r.splice(i,1);break}return o}function O(e,t,n){return this.constructor(e,n)}function U(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===o.syncComponentUpdates&&e.base?f(e):M(e,1,i)),e.__ref&&e.__ref(e))}function M(e,t,n,r){if(!e._disable){var i,a,l,u=e.props,c=e.state,p=e.context,f=e.prevProps||u,d=e.prevState||c,h=e.prevContext||p,m=e.base,_=e.nextBase,y=m||_,C=e._component,w=!1;if(m&&(e.props=f,e.state=d,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,c,p)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,p),e.props=u,e.state=c,e.context=p),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){i=e.render(u,c,p),e.getChildContext&&(p=s(s({},p),e.getChildContext()));var k,P,V=i&&i.nodeName;if("function"==typeof V){var O=v(i);(a=C)&&a.constructor===V&&O.key==a.__key?U(a,O,1,p,!1):(k=a,e._component=a=I(V,O,p),a.nextBase=a.nextBase||_,a._parentComponent=e,U(a,O,0,p,!1),M(a,1,n,!0)),P=a.base}else l=y,(k=C)&&(l=e._component=null),(y||1===t)&&(l&&(l._component=null),P=N(l,i,p,n||!m,y&&y.parentNode,!0));if(y&&P!==y&&a!==C){var j=y.parentNode;j&&P!==j&&(j.replaceChild(P,y),k||(y._component=null,S(y,!1)))}if(k&&E(k),e.base=P,P&&!r){for(var R=e,T=e;T=T._parentComponent;)(R=T).base=P;P._component=R,P._componentConstructor=R.constructor}}if(!m||n?b.unshift(e):w||(e.componentDidUpdate&&e.componentDidUpdate(f,d,h),o.afterUpdate&&o.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);g||r||x()}}function E(e){o.beforeUnmount&&o.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?E(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,m(t),function(e){var t=e.constructor.name;(V[t]||(V[t]=[])).push(e)}(e),P(t)),e.__ref&&e.__ref(null)}function j(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function R(e,t,n){return N(n,e,{},!1,t,!1)}s(j.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=s({},n)),s(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),f(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),M(this,2)},render:function(){}});var T={h:a,createElement:a,cloneElement:u,Component:j,render:R,rerender:d,options:o};t.default=T},function(e,t){e.exports=window.contentfulExtension},,,,,,,function(e,t,n){},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var i=n(9),a=n(0),s=function(e){function t(){var t=e.call(this)||this;return t.setKey=t.setKey.bind(t),t.setVal=t.setVal.bind(t),t.addRow=t.addRow.bind(t),t.deleteRow=t.deleteRow.bind(t),t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props.items;return a.h("div",{className:"kvp-form"},a.h("div",{className:"kvp-form__table"},a.h("table",null,a.h("tbody",null,t&&t.map(function(n,o){return a.h("tr",{key:o,className:"kvp-form__table__row"},a.h("td",{className:"text"},n.key),a.h("td",{className:"divider"},"|"),a.h("td",{className:"text"},n.value),a.h("td",{className:"buttons"},a.h("div",{className:"flex-vert"},a.h("a",{className:"",onClick:function(){return e.moveUp(o)}},o>0?"△":" "),a.h("a",{className:"",onClick:function(){return e.moveDown(o)}},o<t.length-1?"▽":" ")),a.h("button",{className:"cf-btn-secondary delete",onClick:function(){return e.deleteRow(n)}},"X")))}),a.h("tr",{className:"kvp-form__table__row form"},a.h("td",{className:"text"},a.h("input",{className:"cf-form-input",type:"text",id:"key",onChange:this.setKey,value:this.state.key})),a.h("td",{className:"divider"},a.h("span",{class:"divider"},"|")),a.h("td",{className:"text"},a.h("input",{className:"cf-form-input",type:"text",id:"value",onChange:this.setVal,value:this.state.value})),a.h("td",{className:"buttons"},a.h("button",{className:"cf-btn-primary",type:"submit",id:"add",onClick:this.addRow},"+"))))),this.state.errors&&this.state.errors.map(function(e){return a.h("div",{class:"error"},e)})))},t.prototype.setKey=function(e){this.setState({key:i(e.target).val().toString()})},t.prototype.setVal=function(e){this.setState({value:i(e.target).val().toString()})},t.prototype.addRow=function(){var e=[];if(this.state.key&&0!=this.state.key.length||e.push("Please set a key"),this.state.value&&0!=this.state.value.length||e.push("Please set a value"),0==e.length&&this.props.onItemsChanged){var t={key:this.state.key,value:this.state.value},n=this.props.items||[];this.props.onItemsChanged(n.concat([t])),this.setState({key:"",value:""})}this.setState({errors:e})},t.prototype.deleteRow=function(e){if(this.setState({key:e.key,value:e.value}),this.props.onItemsChanged){var t=this.props.items||[];if(0!=t.length){var n=t.findIndex(function(t){return t.key==e.key&&t.value==e.value});if(!(n<0)){var o=t.slice(0,n);o.push.apply(o,t.slice(n+1)),this.props.onItemsChanged(o)}}}},t.prototype.moveUp=function(e){var t=this.props.items||[];if(t.length>0&&e>0&&this.props.onItemsChanged){var n=t.splice(e,1);t.splice.apply(t,[e-1,0].concat(n)),this.props.onItemsChanged(t)}},t.prototype.moveDown=function(e){var t=this.props.items||[];if(t.length>0&&e<t.length-1&&this.props.onItemsChanged){var n=t.splice(e,1);t.splice.apply(t,[e+1,0].concat(n)),this.props.onItemsChanged(t)}},t}(a.Component);t.KVPForm=s},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};t.__esModule=!0;var l=n(1),u=n(0),c=n(10);n(8);l&&l.init(function(e){u.render(u.h(p,i({},e)),document.getElementById("react-root")),e.window.startAutoResizer()});var p=function(e){function t(){var t=e.call(this)||this;return t.onItemsChanged=t.onItemsChanged.bind(t),t}return r(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props;this.setState({fieldValue:(t.field.getValue()||[]).filter(function(e){return e})}),t.field.onValueChanged(function(t){e.setState({fieldValue:(t||[]).filter(function(e){return e})})})},t.prototype.render=function(){var e=this.state,t=e.fieldValue,n=e.waiting;return u.h("div",{className:n?"disabled":""},u.h(c.KVPForm,{items:t,onItemsChanged:this.onItemsChanged}))},t.prototype.onItemsChanged=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return t=this.props,this.setState({waiting:!0}),[4,t.field.setValue(e)];case 1:return n.sent(),this.setState({fieldValue:e,waiting:!1}),[2]}})})},t}(u.Component);t.KvpEditor=p}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3ByZWFjdC9kaXN0L3ByZWFjdC5lc20uanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwid2luZG93LmNvbnRlbnRmdWxFeHRlbnNpb25cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly8vLi9zcmMva3ZwLWVkaXRvci9rdnAtZm9ybS50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2t2cC1lZGl0b3IvaW5kZXgudHN4Il0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwib3B0aW9ucyIsInN0YWNrIiwiRU1QVFlfQ0hJTERSRU4iLCJoIiwibm9kZU5hbWUiLCJhdHRyaWJ1dGVzIiwibGFzdFNpbXBsZSIsImNoaWxkIiwic2ltcGxlIiwiY2hpbGRyZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwdXNoIiwicG9wIiwidW5kZWZpbmVkIiwiU3RyaW5nIiwia2V5Iiwidm5vZGUiLCJleHRlbmQiLCJvYmoiLCJwcm9wcyIsImRlZmVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiYmluZCIsInNldFRpbWVvdXQiLCJjbG9uZUVsZW1lbnQiLCJzbGljZSIsIklTX05PTl9ESU1FTlNJT05BTCIsIml0ZW1zIiwiZW5xdWV1ZVJlbmRlciIsImNvbXBvbmVudCIsIl9kaXJ0eSIsImRlYm91bmNlUmVuZGVyaW5nIiwicmVyZW5kZXIiLCJsaXN0IiwicmVuZGVyQ29tcG9uZW50IiwiaXNOYW1lZE5vZGUiLCJub2RlIiwibm9ybWFsaXplZE5vZGVOYW1lIiwidG9Mb3dlckNhc2UiLCJnZXROb2RlUHJvcHMiLCJkZWZhdWx0UHJvcHMiLCJyZW1vdmVOb2RlIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwic2V0QWNjZXNzb3IiLCJvbGQiLCJpc1N2ZyIsInN0eWxlIiwiY3NzVGV4dCIsInRlc3QiLCJpbm5lckhUTUwiLCJfX2h0bWwiLCJ1c2VDYXB0dXJlIiwicmVwbGFjZSIsInN1YnN0cmluZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudFByb3h5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9saXN0ZW5lcnMiLCJlIiwic2V0UHJvcGVydHkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJucyIsInJlbW92ZUF0dHJpYnV0ZU5TIiwic2V0QXR0cmlidXRlTlMiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc05hbWUiLCJ0aGlzIiwidHlwZSIsImV2ZW50IiwibW91bnRzIiwiZGlmZkxldmVsIiwiaXNTdmdNb2RlIiwiaHlkcmF0aW5nIiwiZmx1c2hNb3VudHMiLCJhZnRlck1vdW50IiwiY29tcG9uZW50RGlkTW91bnQiLCJkaWZmIiwiZG9tIiwiY29udGV4dCIsIm1vdW50QWxsIiwicGFyZW50IiwiY29tcG9uZW50Um9vdCIsIm93bmVyU1ZHRWxlbWVudCIsInJldCIsImlkaWZmIiwiYXBwZW5kQ2hpbGQiLCJvdXQiLCJwcmV2U3ZnTW9kZSIsInNwbGl0VGV4dCIsIl9jb21wb25lbnQiLCJub2RlVmFsdWUiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwicmVwbGFjZUNoaWxkIiwicmVjb2xsZWN0Tm9kZVRyZWUiLCJ2bm9kZU5hbWUiLCJvcmlnaW5hbENvbXBvbmVudCIsIm9sZERvbSIsImlzRGlyZWN0T3duZXIiLCJfY29tcG9uZW50Q29uc3RydWN0b3IiLCJpc093bmVyIiwiX3BhcmVudENvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwic2V0Q29tcG9uZW50UHJvcHMiLCJiYXNlIiwidW5tb3VudENvbXBvbmVudCIsImNyZWF0ZUNvbXBvbmVudCIsIm5leHRCYXNlIiwiYnVpbGRDb21wb25lbnRGcm9tVk5vZGUiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFbGVtZW50IiwiZmlyc3RDaGlsZCIsImZjIiwidmNoaWxkcmVuIiwiYSIsIm5leHRTaWJsaW5nIiwiaXNIeWRyYXRpbmciLCJqIiwiZiIsInZjaGlsZCIsIm9yaWdpbmFsQ2hpbGRyZW4iLCJjaGlsZE5vZGVzIiwia2V5ZWQiLCJrZXllZExlbiIsIm1pbiIsImxlbiIsImNoaWxkcmVuTGVuIiwidmxlbiIsIl9jaGlsZCIsIl9fa2V5IiwidHJpbSIsImluc2VydEJlZm9yZSIsImlubmVyRGlmZk5vZGUiLCJkYW5nZXJvdXNseVNldElubmVySFRNTCIsImF0dHJzIiwiZGlmZkF0dHJpYnV0ZXMiLCJ1bm1vdW50T25seSIsInJlZiIsInJlbW92ZUNoaWxkcmVuIiwibGFzdENoaWxkIiwibmV4dCIsInByZXZpb3VzU2libGluZyIsImNvbXBvbmVudHMiLCJDdG9yIiwiaW5zdCIsInJlbmRlciIsIkNvbXBvbmVudCIsImRvUmVuZGVyIiwic3BsaWNlIiwic3RhdGUiLCJvcHRzIiwiX2Rpc2FibGUiLCJfX3JlZiIsImNvbXBvbmVudFdpbGxNb3VudCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJwcmV2Q29udGV4dCIsInByZXZQcm9wcyIsInN5bmNDb21wb25lbnRVcGRhdGVzIiwiaXNDaGlsZCIsInJlbmRlcmVkIiwiY2Jhc2UiLCJwcmV2aW91c1Byb3BzIiwicHJldmlvdXNTdGF0ZSIsInByZXZTdGF0ZSIsInByZXZpb3VzQ29udGV4dCIsImlzVXBkYXRlIiwiaW5pdGlhbEJhc2UiLCJpbml0aWFsQ2hpbGRDb21wb25lbnQiLCJza2lwIiwic2hvdWxkQ29tcG9uZW50VXBkYXRlIiwiY29tcG9uZW50V2lsbFVwZGF0ZSIsImdldENoaWxkQ29udGV4dCIsInRvVW5tb3VudCIsImNoaWxkQ29tcG9uZW50IiwiY2hpbGRQcm9wcyIsImJhc2VQYXJlbnQiLCJjb21wb25lbnRSZWYiLCJ0IiwidW5zaGlmdCIsImNvbXBvbmVudERpZFVwZGF0ZSIsImFmdGVyVXBkYXRlIiwiX3JlbmRlckNhbGxiYWNrcyIsImJlZm9yZVVubW91bnQiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImlubmVyIiwiY29sbGVjdENvbXBvbmVudCIsIm1lcmdlIiwic2V0U3RhdGUiLCJjYWxsYmFjayIsImZvcmNlVXBkYXRlIiwicHJlYWN0Iiwid2luZG93IiwiY29udGVudGZ1bEV4dGVuc2lvbiIsImpRdWVyeSIsIiQiLCJwcmVhY3RfMSIsIktWUEZvcm0iLCJfc3VwZXIiLCJfdGhpcyIsInNldEtleSIsInNldFZhbCIsImFkZFJvdyIsImRlbGV0ZVJvdyIsIl9fZXh0ZW5kcyIsIm1hcCIsIml0ZW0iLCJpbmRleCIsIm9uQ2xpY2siLCJtb3ZlVXAiLCJtb3ZlRG93biIsImlkIiwib25DaGFuZ2UiLCJjbGFzcyIsImVycm9ycyIsImV2dCIsInRhcmdldCIsInZhbCIsInRvU3RyaW5nIiwib25JdGVtc0NoYW5nZWQiLCJjb25jYXQiLCJmaW5kSW5kZXgiLCJhcHBseSIsImt2cF9mb3JtXzEiLCJpbml0IiwiZXh0ZW5zaW9uIiwiS3ZwRWRpdG9yIiwiX19hc3NpZ24iLCJnZXRFbGVtZW50QnlJZCIsInN0YXJ0QXV0b1Jlc2l6ZXIiLCJzZGsiLCJmaWVsZFZhbHVlIiwiZmllbGQiLCJnZXRWYWx1ZSIsImZpbHRlciIsIm9uVmFsdWVDaGFuZ2VkIiwibmV3VmFsdWUiLCJfYSIsIndhaXRpbmciLCJuZXdJdGVtcyIsInNldFZhbHVlIiwic2VudCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixF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QUFlLFNBQUNDLEdBQ3hCckMsRUFBS1gsVUFDSDJDLFlBQWFLLE9BQWdCRixPQUFPLFNBQUN2USxHQUFXLE9BQUFBLFNBSy9DK1AsRUFBQTFPLFVBQUEwSixPQUFQLFdBQ1EsSUFBQTJGLEVBQUExSyxLQUFBbUYsTUFBRWlGLEVBQUFNLEVBQUFOLFdBQVlPLEVBQUFELEVBQUFDLFFBRXBCLE9BQU8xQyxFQUFBcE0sRUFBQSxPQUFLa0UsVUFBVzRLLEVBQVUsV0FBYSxJQUM1QzFDLEVBQUFwTSxFQUFDK04sRUFBQTFCLFNBQ0MxSyxNQUFPNE0sRUFDUFosZUFBZ0J4SixLQUFLd0osbUJBS2JPLEVBQUExTyxVQUFBbU8sZUFBZCxTQUE2Qm9CLGlHQU8zQixPQU5NVCxFQUFNbkssS0FBS2xELE1BRWpCa0QsS0FBS3lILFVBQ0hrRCxTQUFTLEtBR1gsRUFBTVIsRUFBSUUsTUFBTVEsU0FBU0Qsa0JBQXpCRixFQUFBSSxPQUNBOUssS0FBS3lILFVBQ0gyQyxXQUFZUSxFQUNaRCxTQUFTLGNBR2ZaLEVBNUNBLENBQStCOUIsRUFBQWpELFdBQWxCbEwsRUFBQWlRIiwiZmlsZSI6ImRpc3Qva3ZwLWVkaXRvci9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTEpO1xuIiwiLyoqIFZpcnR1YWwgRE9NIE5vZGUgKi9cbmZ1bmN0aW9uIFZOb2RlKCkge31cblxuLyoqIEdsb2JhbCBvcHRpb25zXG4gKlx0QHB1YmxpY1xuICpcdEBuYW1lc3BhY2Ugb3B0aW9ucyB7T2JqZWN0fVxuICovXG52YXIgb3B0aW9ucyA9IHtcblxuXHQvKiogSWYgYHRydWVgLCBgcHJvcGAgY2hhbmdlcyB0cmlnZ2VyIHN5bmNocm9ub3VzIGNvbXBvbmVudCB1cGRhdGVzLlxuICAqXHRAbmFtZSBzeW5jQ29tcG9uZW50VXBkYXRlc1xuICAqXHRAdHlwZSBCb29sZWFuXG4gICpcdEBkZWZhdWx0IHRydWVcbiAgKi9cblx0Ly9zeW5jQ29tcG9uZW50VXBkYXRlczogdHJ1ZSxcblxuXHQvKiogUHJvY2Vzc2VzIGFsbCBjcmVhdGVkIFZOb2Rlcy5cbiAgKlx0QHBhcmFtIHtWTm9kZX0gdm5vZGVcdEEgbmV3bHktY3JlYXRlZCBWTm9kZSB0byBub3JtYWxpemUvcHJvY2Vzc1xuICAqL1xuXHQvL3Zub2RlKHZub2RlKSB7IH1cblxuXHQvKiogSG9vayBpbnZva2VkIGFmdGVyIGEgY29tcG9uZW50IGlzIG1vdW50ZWQuICovXG5cdC8vIGFmdGVyTW91bnQoY29tcG9uZW50KSB7IH1cblxuXHQvKiogSG9vayBpbnZva2VkIGFmdGVyIHRoZSBET00gaXMgdXBkYXRlZCB3aXRoIGEgY29tcG9uZW50J3MgbGF0ZXN0IHJlbmRlci4gKi9cblx0Ly8gYWZ0ZXJVcGRhdGUoY29tcG9uZW50KSB7IH1cblxuXHQvKiogSG9vayBpbnZva2VkIGltbWVkaWF0ZWx5IGJlZm9yZSBhIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuICovXG5cdC8vIGJlZm9yZVVubW91bnQoY29tcG9uZW50KSB7IH1cbn07XG5cbnZhciBzdGFjayA9IFtdO1xuXG52YXIgRU1QVFlfQ0hJTERSRU4gPSBbXTtcblxuLyoqXG4gKiBKU1gvaHlwZXJzY3JpcHQgcmV2aXZlci5cbiAqIEBzZWUgaHR0cDovL2phc29uZm9ybWF0LmNvbS93dGYtaXMtanN4XG4gKiBCZW5jaG1hcmtzOiBodHRwczovL2VzYmVuY2guY29tL2JlbmNoLzU3ZWU4ZjhlMzMwYWIwOTkwMGExYTFhMFxuICpcbiAqIE5vdGU6IHRoaXMgaXMgZXhwb3J0ZWQgYXMgYm90aCBgaCgpYCBhbmQgYGNyZWF0ZUVsZW1lbnQoKWAgZm9yIGNvbXBhdGliaWxpdHkgcmVhc29ucy5cbiAqXG4gKiBDcmVhdGVzIGEgVk5vZGUgKHZpcnR1YWwgRE9NIGVsZW1lbnQpLiBBIHRyZWUgb2YgVk5vZGVzIGNhbiBiZSB1c2VkIGFzIGEgbGlnaHR3ZWlnaHQgcmVwcmVzZW50YXRpb25cbiAqIG9mIHRoZSBzdHJ1Y3R1cmUgb2YgYSBET00gdHJlZS4gVGhpcyBzdHJ1Y3R1cmUgY2FuIGJlIHJlYWxpemVkIGJ5IHJlY3Vyc2l2ZWx5IGNvbXBhcmluZyBpdCBhZ2FpbnN0XG4gKiB0aGUgY3VycmVudCBfYWN0dWFsXyBET00gc3RydWN0dXJlLCBhbmQgYXBwbHlpbmcgb25seSB0aGUgZGlmZmVyZW5jZXMuXG4gKlxuICogYGgoKWAvYGNyZWF0ZUVsZW1lbnQoKWAgYWNjZXB0cyBhbiBlbGVtZW50IG5hbWUsIGEgbGlzdCBvZiBhdHRyaWJ1dGVzL3Byb3BzLFxuICogYW5kIG9wdGlvbmFsbHkgY2hpbGRyZW4gdG8gYXBwZW5kIHRvIHRoZSBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlIFRoZSBmb2xsb3dpbmcgRE9NIHRyZWVcbiAqXG4gKiBgPGRpdiBpZD1cImZvb1wiIG5hbWU9XCJiYXJcIj5IZWxsbyE8L2Rpdj5gXG4gKlxuICogY2FuIGJlIGNvbnN0cnVjdGVkIHVzaW5nIHRoaXMgZnVuY3Rpb24gYXM6XG4gKlxuICogYGgoJ2RpdicsIHsgaWQ6ICdmb28nLCBuYW1lIDogJ2JhcicgfSwgJ0hlbGxvIScpO2BcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbm9kZU5hbWVcdEFuIGVsZW1lbnQgbmFtZS4gRXg6IGBkaXZgLCBgYWAsIGBzcGFuYCwgZXRjLlxuICogQHBhcmFtIHtPYmplY3R9IGF0dHJpYnV0ZXNcdEFueSBhdHRyaWJ1dGVzL3Byb3BzIHRvIHNldCBvbiB0aGUgY3JlYXRlZCBlbGVtZW50LlxuICogQHBhcmFtIHJlc3RcdFx0XHRBZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgdGFrZW4gdG8gYmUgY2hpbGRyZW4gdG8gYXBwZW5kLiBDYW4gYmUgaW5maW5pdGVseSBuZXN0ZWQgQXJyYXlzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gaChub2RlTmFtZSwgYXR0cmlidXRlcykge1xuXHR2YXIgY2hpbGRyZW4gPSBFTVBUWV9DSElMRFJFTixcblx0ICAgIGxhc3RTaW1wbGUsXG5cdCAgICBjaGlsZCxcblx0ICAgIHNpbXBsZSxcblx0ICAgIGk7XG5cdGZvciAoaSA9IGFyZ3VtZW50cy5sZW5ndGg7IGktLSA+IDI7KSB7XG5cdFx0c3RhY2sucHVzaChhcmd1bWVudHNbaV0pO1xuXHR9XG5cdGlmIChhdHRyaWJ1dGVzICYmIGF0dHJpYnV0ZXMuY2hpbGRyZW4gIT0gbnVsbCkge1xuXHRcdGlmICghc3RhY2subGVuZ3RoKSBzdGFjay5wdXNoKGF0dHJpYnV0ZXMuY2hpbGRyZW4pO1xuXHRcdGRlbGV0ZSBhdHRyaWJ1dGVzLmNoaWxkcmVuO1xuXHR9XG5cdHdoaWxlIChzdGFjay5sZW5ndGgpIHtcblx0XHRpZiAoKGNoaWxkID0gc3RhY2sucG9wKCkpICYmIGNoaWxkLnBvcCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRmb3IgKGkgPSBjaGlsZC5sZW5ndGg7IGktLTspIHtcblx0XHRcdFx0c3RhY2sucHVzaChjaGlsZFtpXSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICh0eXBlb2YgY2hpbGQgPT09ICdib29sZWFuJykgY2hpbGQgPSBudWxsO1xuXG5cdFx0XHRpZiAoc2ltcGxlID0gdHlwZW9mIG5vZGVOYW1lICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGlmIChjaGlsZCA9PSBudWxsKSBjaGlsZCA9ICcnO2Vsc2UgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ251bWJlcicpIGNoaWxkID0gU3RyaW5nKGNoaWxkKTtlbHNlIGlmICh0eXBlb2YgY2hpbGQgIT09ICdzdHJpbmcnKSBzaW1wbGUgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHNpbXBsZSAmJiBsYXN0U2ltcGxlKSB7XG5cdFx0XHRcdGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdICs9IGNoaWxkO1xuXHRcdFx0fSBlbHNlIGlmIChjaGlsZHJlbiA9PT0gRU1QVFlfQ0hJTERSRU4pIHtcblx0XHRcdFx0Y2hpbGRyZW4gPSBbY2hpbGRdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2hpbGRyZW4ucHVzaChjaGlsZCk7XG5cdFx0XHR9XG5cblx0XHRcdGxhc3RTaW1wbGUgPSBzaW1wbGU7XG5cdFx0fVxuXHR9XG5cblx0dmFyIHAgPSBuZXcgVk5vZGUoKTtcblx0cC5ub2RlTmFtZSA9IG5vZGVOYW1lO1xuXHRwLmNoaWxkcmVuID0gY2hpbGRyZW47XG5cdHAuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGF0dHJpYnV0ZXM7XG5cdHAua2V5ID0gYXR0cmlidXRlcyA9PSBudWxsID8gdW5kZWZpbmVkIDogYXR0cmlidXRlcy5rZXk7XG5cblx0Ly8gaWYgYSBcInZub2RlIGhvb2tcIiBpcyBkZWZpbmVkLCBwYXNzIGV2ZXJ5IGNyZWF0ZWQgVk5vZGUgdG8gaXRcblx0aWYgKG9wdGlvbnMudm5vZGUgIT09IHVuZGVmaW5lZCkgb3B0aW9ucy52bm9kZShwKTtcblxuXHRyZXR1cm4gcDtcbn1cblxuLyoqXG4gKiAgQ29weSBhbGwgcHJvcGVydGllcyBmcm9tIGBwcm9wc2Agb250byBgb2JqYC5cbiAqICBAcGFyYW0ge09iamVjdH0gb2JqXHRcdE9iamVjdCBvbnRvIHdoaWNoIHByb3BlcnRpZXMgc2hvdWxkIGJlIGNvcGllZC5cbiAqICBAcGFyYW0ge09iamVjdH0gcHJvcHNcdE9iamVjdCBmcm9tIHdoaWNoIHRvIGNvcHkgcHJvcGVydGllcy5cbiAqICBAcmV0dXJucyBvYmpcbiAqICBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBleHRlbmQob2JqLCBwcm9wcykge1xuICBmb3IgKHZhciBpIGluIHByb3BzKSB7XG4gICAgb2JqW2ldID0gcHJvcHNbaV07XG4gIH1yZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIENhbGwgYSBmdW5jdGlvbiBhc3luY2hyb25vdXNseSwgYXMgc29vbiBhcyBwb3NzaWJsZS4gTWFrZXNcbiAqIHVzZSBvZiBIVE1MIFByb21pc2UgdG8gc2NoZWR1bGUgdGhlIGNhbGxiYWNrIGlmIGF2YWlsYWJsZSxcbiAqIG90aGVyd2lzZSBmYWxsaW5nIGJhY2sgdG8gYHNldFRpbWVvdXRgIChtYWlubHkgZm9yIElFPDExKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICovXG52YXIgZGVmZXIgPSB0eXBlb2YgUHJvbWlzZSA9PSAnZnVuY3Rpb24nID8gUHJvbWlzZS5yZXNvbHZlKCkudGhlbi5iaW5kKFByb21pc2UucmVzb2x2ZSgpKSA6IHNldFRpbWVvdXQ7XG5cbi8qKlxuICogQ2xvbmVzIHRoZSBnaXZlbiBWTm9kZSwgb3B0aW9uYWxseSBhZGRpbmcgYXR0cmlidXRlcy9wcm9wcyBhbmQgcmVwbGFjaW5nIGl0cyBjaGlsZHJlbi5cbiAqIEBwYXJhbSB7Vk5vZGV9IHZub2RlXHRcdFRoZSB2aXJ0dWFsIERPTSBlbGVtZW50IHRvIGNsb25lXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcdEF0dHJpYnV0ZXMvcHJvcHMgdG8gYWRkIHdoZW4gY2xvbmluZ1xuICogQHBhcmFtIHtWTm9kZX0gcmVzdFx0XHRBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgd2lsbCBiZSB1c2VkIGFzIHJlcGxhY2VtZW50IGNoaWxkcmVuLlxuICovXG5mdW5jdGlvbiBjbG9uZUVsZW1lbnQodm5vZGUsIHByb3BzKSB7XG4gIHJldHVybiBoKHZub2RlLm5vZGVOYW1lLCBleHRlbmQoZXh0ZW5kKHt9LCB2bm9kZS5hdHRyaWJ1dGVzKSwgcHJvcHMpLCBhcmd1bWVudHMubGVuZ3RoID4gMiA/IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSA6IHZub2RlLmNoaWxkcmVuKTtcbn1cblxuLy8gRE9NIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgTk9UIGhhdmUgXCJweFwiIGFkZGVkIHdoZW4gbnVtZXJpY1xudmFyIElTX05PTl9ESU1FTlNJT05BTCA9IC9hY2l0fGV4KD86c3xnfG58cHwkKXxycGh8b3dzfG1uY3xudHd8aW5lW2NoXXx6b298Xm9yZC9pO1xuXG4vKiogTWFuYWdlZCBxdWV1ZSBvZiBkaXJ0eSBjb21wb25lbnRzIHRvIGJlIHJlLXJlbmRlcmVkICovXG5cbnZhciBpdGVtcyA9IFtdO1xuXG5mdW5jdGlvbiBlbnF1ZXVlUmVuZGVyKGNvbXBvbmVudCkge1xuXHRpZiAoIWNvbXBvbmVudC5fZGlydHkgJiYgKGNvbXBvbmVudC5fZGlydHkgPSB0cnVlKSAmJiBpdGVtcy5wdXNoKGNvbXBvbmVudCkgPT0gMSkge1xuXHRcdChvcHRpb25zLmRlYm91bmNlUmVuZGVyaW5nIHx8IGRlZmVyKShyZXJlbmRlcik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVyZW5kZXIoKSB7XG5cdHZhciBwLFxuXHQgICAgbGlzdCA9IGl0ZW1zO1xuXHRpdGVtcyA9IFtdO1xuXHR3aGlsZSAocCA9IGxpc3QucG9wKCkpIHtcblx0XHRpZiAocC5fZGlydHkpIHJlbmRlckNvbXBvbmVudChwKTtcblx0fVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHR3byBub2RlcyBhcmUgZXF1aXZhbGVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcdFx0XHRET00gTm9kZSB0byBjb21wYXJlXG4gKiBAcGFyYW0ge1ZOb2RlfSB2bm9kZVx0XHRcdFZpcnR1YWwgRE9NIG5vZGUgdG8gY29tcGFyZVxuICogQHBhcmFtIHtib29sZWFufSBbaHlkcmF0aW5nPWZhbHNlXVx0SWYgdHJ1ZSwgaWdub3JlcyBjb21wb25lbnQgY29uc3RydWN0b3JzIHdoZW4gY29tcGFyaW5nLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaXNTYW1lTm9kZVR5cGUobm9kZSwgdm5vZGUsIGh5ZHJhdGluZykge1xuICBpZiAodHlwZW9mIHZub2RlID09PSAnc3RyaW5nJyB8fCB0eXBlb2Ygdm5vZGUgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIG5vZGUuc3BsaXRUZXh0ICE9PSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiB2bm9kZS5ub2RlTmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gIW5vZGUuX2NvbXBvbmVudENvbnN0cnVjdG9yICYmIGlzTmFtZWROb2RlKG5vZGUsIHZub2RlLm5vZGVOYW1lKTtcbiAgfVxuICByZXR1cm4gaHlkcmF0aW5nIHx8IG5vZGUuX2NvbXBvbmVudENvbnN0cnVjdG9yID09PSB2bm9kZS5ub2RlTmFtZTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBFbGVtZW50IGhhcyBhIGdpdmVuIG5vZGVOYW1lLCBjYXNlLWluc2Vuc2l0aXZlbHkuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBub2RlXHRBIERPTSBFbGVtZW50IHRvIGluc3BlY3QgdGhlIG5hbWUgb2YuXG4gKiBAcGFyYW0ge1N0cmluZ30gbm9kZU5hbWVcdFVubm9ybWFsaXplZCBuYW1lIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAqL1xuZnVuY3Rpb24gaXNOYW1lZE5vZGUobm9kZSwgbm9kZU5hbWUpIHtcbiAgcmV0dXJuIG5vZGUubm9ybWFsaXplZE5vZGVOYW1lID09PSBub2RlTmFtZSB8fCBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogUmVjb25zdHJ1Y3QgQ29tcG9uZW50LXN0eWxlIGBwcm9wc2AgZnJvbSBhIFZOb2RlLlxuICogRW5zdXJlcyBkZWZhdWx0L2ZhbGxiYWNrIHZhbHVlcyBmcm9tIGBkZWZhdWx0UHJvcHNgOlxuICogT3duLXByb3BlcnRpZXMgb2YgYGRlZmF1bHRQcm9wc2Agbm90IHByZXNlbnQgaW4gYHZub2RlLmF0dHJpYnV0ZXNgIGFyZSBhZGRlZC5cbiAqXG4gKiBAcGFyYW0ge1ZOb2RlfSB2bm9kZVxuICogQHJldHVybnMge09iamVjdH0gcHJvcHNcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZVByb3BzKHZub2RlKSB7XG4gIHZhciBwcm9wcyA9IGV4dGVuZCh7fSwgdm5vZGUuYXR0cmlidXRlcyk7XG4gIHByb3BzLmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG5cbiAgdmFyIGRlZmF1bHRQcm9wcyA9IHZub2RlLm5vZGVOYW1lLmRlZmF1bHRQcm9wcztcbiAgaWYgKGRlZmF1bHRQcm9wcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yICh2YXIgaSBpbiBkZWZhdWx0UHJvcHMpIHtcbiAgICAgIGlmIChwcm9wc1tpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb3BzW2ldID0gZGVmYXVsdFByb3BzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwcm9wcztcbn1cblxuLyoqIENyZWF0ZSBhbiBlbGVtZW50IHdpdGggdGhlIGdpdmVuIG5vZGVOYW1lLlxuICpcdEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVxuICpcdEBwYXJhbSB7Qm9vbGVhbn0gW2lzU3ZnPWZhbHNlXVx0SWYgYHRydWVgLCBjcmVhdGVzIGFuIGVsZW1lbnQgd2l0aGluIHRoZSBTVkcgbmFtZXNwYWNlLlxuICpcdEByZXR1cm5zIHtFbGVtZW50fSBub2RlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU5vZGUobm9kZU5hbWUsIGlzU3ZnKSB7XG5cdHZhciBub2RlID0gaXNTdmcgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgbm9kZU5hbWUpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG5cdG5vZGUubm9ybWFsaXplZE5vZGVOYW1lID0gbm9kZU5hbWU7XG5cdHJldHVybiBub2RlO1xufVxuXG4vKiogUmVtb3ZlIGEgY2hpbGQgbm9kZSBmcm9tIGl0cyBwYXJlbnQgaWYgYXR0YWNoZWQuXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBub2RlXHRcdFRoZSBub2RlIHRvIHJlbW92ZVxuICovXG5mdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcblx0dmFyIHBhcmVudE5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG5cdGlmIChwYXJlbnROb2RlKSBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xufVxuXG4vKiogU2V0IGEgbmFtZWQgYXR0cmlidXRlIG9uIHRoZSBnaXZlbiBOb2RlLCB3aXRoIHNwZWNpYWwgYmVoYXZpb3IgZm9yIHNvbWUgbmFtZXMgYW5kIGV2ZW50IGhhbmRsZXJzLlxuICpcdElmIGB2YWx1ZWAgaXMgYG51bGxgLCB0aGUgYXR0cmlidXRlL2hhbmRsZXIgd2lsbCBiZSByZW1vdmVkLlxuICpcdEBwYXJhbSB7RWxlbWVudH0gbm9kZVx0QW4gZWxlbWVudCB0byBtdXRhdGVcbiAqXHRAcGFyYW0ge3N0cmluZ30gbmFtZVx0VGhlIG5hbWUva2V5IHRvIHNldCwgc3VjaCBhcyBhbiBldmVudCBvciBhdHRyaWJ1dGUgbmFtZVxuICpcdEBwYXJhbSB7YW55fSBvbGRcdFRoZSBsYXN0IHZhbHVlIHRoYXQgd2FzIHNldCBmb3IgdGhpcyBuYW1lL25vZGUgcGFpclxuICpcdEBwYXJhbSB7YW55fSB2YWx1ZVx0QW4gYXR0cmlidXRlIHZhbHVlLCBzdWNoIGFzIGEgZnVuY3Rpb24gdG8gYmUgdXNlZCBhcyBhbiBldmVudCBoYW5kbGVyXG4gKlx0QHBhcmFtIHtCb29sZWFufSBpc1N2Z1x0QXJlIHdlIGN1cnJlbnRseSBkaWZmaW5nIGluc2lkZSBhbiBzdmc/XG4gKlx0QHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2V0QWNjZXNzb3Iobm9kZSwgbmFtZSwgb2xkLCB2YWx1ZSwgaXNTdmcpIHtcblx0aWYgKG5hbWUgPT09ICdjbGFzc05hbWUnKSBuYW1lID0gJ2NsYXNzJztcblxuXHRpZiAobmFtZSA9PT0gJ2tleScpIHtcblx0XHQvLyBpZ25vcmVcblx0fSBlbHNlIGlmIChuYW1lID09PSAncmVmJykge1xuXHRcdGlmIChvbGQpIG9sZChudWxsKTtcblx0XHRpZiAodmFsdWUpIHZhbHVlKG5vZGUpO1xuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgIWlzU3ZnKSB7XG5cdFx0bm9kZS5jbGFzc05hbWUgPSB2YWx1ZSB8fCAnJztcblx0fSBlbHNlIGlmIChuYW1lID09PSAnc3R5bGUnKSB7XG5cdFx0aWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBvbGQgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRub2RlLnN0eWxlLmNzc1RleHQgPSB2YWx1ZSB8fCAnJztcblx0XHR9XG5cdFx0aWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdGlmICh0eXBlb2Ygb2xkICE9PSAnc3RyaW5nJykge1xuXHRcdFx0XHRmb3IgKHZhciBpIGluIG9sZCkge1xuXHRcdFx0XHRcdGlmICghKGkgaW4gdmFsdWUpKSBub2RlLnN0eWxlW2ldID0gJyc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZvciAodmFyIGkgaW4gdmFsdWUpIHtcblx0XHRcdFx0bm9kZS5zdHlsZVtpXSA9IHR5cGVvZiB2YWx1ZVtpXSA9PT0gJ251bWJlcicgJiYgSVNfTk9OX0RJTUVOU0lPTkFMLnRlc3QoaSkgPT09IGZhbHNlID8gdmFsdWVbaV0gKyAncHgnIDogdmFsdWVbaV07XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICdkYW5nZXJvdXNseVNldElubmVySFRNTCcpIHtcblx0XHRpZiAodmFsdWUpIG5vZGUuaW5uZXJIVE1MID0gdmFsdWUuX19odG1sIHx8ICcnO1xuXHR9IGVsc2UgaWYgKG5hbWVbMF0gPT0gJ28nICYmIG5hbWVbMV0gPT0gJ24nKSB7XG5cdFx0dmFyIHVzZUNhcHR1cmUgPSBuYW1lICE9PSAobmFtZSA9IG5hbWUucmVwbGFjZSgvQ2FwdHVyZSQvLCAnJykpO1xuXHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKDIpO1xuXHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0aWYgKCFvbGQpIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBldmVudFByb3h5LCB1c2VDYXB0dXJlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50UHJveHksIHVzZUNhcHR1cmUpO1xuXHRcdH1cblx0XHQobm9kZS5fbGlzdGVuZXJzIHx8IChub2RlLl9saXN0ZW5lcnMgPSB7fSkpW25hbWVdID0gdmFsdWU7XG5cdH0gZWxzZSBpZiAobmFtZSAhPT0gJ2xpc3QnICYmIG5hbWUgIT09ICd0eXBlJyAmJiAhaXNTdmcgJiYgbmFtZSBpbiBub2RlKSB7XG5cdFx0c2V0UHJvcGVydHkobm9kZSwgbmFtZSwgdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUpO1xuXHRcdGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlID09PSBmYWxzZSkgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIG5zID0gaXNTdmcgJiYgbmFtZSAhPT0gKG5hbWUgPSBuYW1lLnJlcGxhY2UoL154bGluazo/LywgJycpKTtcblx0XHRpZiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSA9PT0gZmFsc2UpIHtcblx0XHRcdGlmIChucykgbm9kZS5yZW1vdmVBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIG5hbWUudG9Mb3dlckNhc2UoKSk7ZWxzZSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0aWYgKG5zKSBub2RlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgbmFtZS50b0xvd2VyQ2FzZSgpLCB2YWx1ZSk7ZWxzZSBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKiBBdHRlbXB0IHRvIHNldCBhIERPTSBwcm9wZXJ0eSB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlx0SUUgJiBGRiB0aHJvdyBmb3IgY2VydGFpbiBwcm9wZXJ0eS12YWx1ZSBjb21iaW5hdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIHNldFByb3BlcnR5KG5vZGUsIG5hbWUsIHZhbHVlKSB7XG5cdHRyeSB7XG5cdFx0bm9kZVtuYW1lXSA9IHZhbHVlO1xuXHR9IGNhdGNoIChlKSB7fVxufVxuXG4vKiogUHJveHkgYW4gZXZlbnQgdG8gaG9va2VkIGV2ZW50IGhhbmRsZXJzXG4gKlx0QHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZXZlbnRQcm94eShlKSB7XG5cdHJldHVybiB0aGlzLl9saXN0ZW5lcnNbZS50eXBlXShvcHRpb25zLmV2ZW50ICYmIG9wdGlvbnMuZXZlbnQoZSkgfHwgZSk7XG59XG5cbi8qKiBRdWV1ZSBvZiBjb21wb25lbnRzIHRoYXQgaGF2ZSBiZWVuIG1vdW50ZWQgYW5kIGFyZSBhd2FpdGluZyBjb21wb25lbnREaWRNb3VudCAqL1xudmFyIG1vdW50cyA9IFtdO1xuXG4vKiogRGlmZiByZWN1cnNpb24gY291bnQsIHVzZWQgdG8gdHJhY2sgdGhlIGVuZCBvZiB0aGUgZGlmZiBjeWNsZS4gKi9cbnZhciBkaWZmTGV2ZWwgPSAwO1xuXG4vKiogR2xvYmFsIGZsYWcgaW5kaWNhdGluZyBpZiB0aGUgZGlmZiBpcyBjdXJyZW50bHkgd2l0aGluIGFuIFNWRyAqL1xudmFyIGlzU3ZnTW9kZSA9IGZhbHNlO1xuXG4vKiogR2xvYmFsIGZsYWcgaW5kaWNhdGluZyBpZiB0aGUgZGlmZiBpcyBwZXJmb3JtaW5nIGh5ZHJhdGlvbiAqL1xudmFyIGh5ZHJhdGluZyA9IGZhbHNlO1xuXG4vKiogSW52b2tlIHF1ZXVlZCBjb21wb25lbnREaWRNb3VudCBsaWZlY3ljbGUgbWV0aG9kcyAqL1xuZnVuY3Rpb24gZmx1c2hNb3VudHMoKSB7XG5cdHZhciBjO1xuXHR3aGlsZSAoYyA9IG1vdW50cy5wb3AoKSkge1xuXHRcdGlmIChvcHRpb25zLmFmdGVyTW91bnQpIG9wdGlvbnMuYWZ0ZXJNb3VudChjKTtcblx0XHRpZiAoYy5jb21wb25lbnREaWRNb3VudCkgYy5jb21wb25lbnREaWRNb3VudCgpO1xuXHR9XG59XG5cbi8qKiBBcHBseSBkaWZmZXJlbmNlcyBpbiBhIGdpdmVuIHZub2RlIChhbmQgaXQncyBkZWVwIGNoaWxkcmVuKSB0byBhIHJlYWwgRE9NIE5vZGUuXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBbZG9tPW51bGxdXHRcdEEgRE9NIG5vZGUgdG8gbXV0YXRlIGludG8gdGhlIHNoYXBlIG9mIHRoZSBgdm5vZGVgXG4gKlx0QHBhcmFtIHtWTm9kZX0gdm5vZGVcdFx0XHRBIFZOb2RlICh3aXRoIGRlc2NlbmRhbnRzIGZvcm1pbmcgYSB0cmVlKSByZXByZXNlbnRpbmcgdGhlIGRlc2lyZWQgRE9NIHN0cnVjdHVyZVxuICpcdEByZXR1cm5zIHtFbGVtZW50fSBkb21cdFx0XHRUaGUgY3JlYXRlZC9tdXRhdGVkIGVsZW1lbnRcbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBwYXJlbnQsIGNvbXBvbmVudFJvb3QpIHtcblx0Ly8gZGlmZkxldmVsIGhhdmluZyBiZWVuIDAgaGVyZSBpbmRpY2F0ZXMgaW5pdGlhbCBlbnRyeSBpbnRvIHRoZSBkaWZmIChub3QgYSBzdWJkaWZmKVxuXHRpZiAoIWRpZmZMZXZlbCsrKSB7XG5cdFx0Ly8gd2hlbiBmaXJzdCBzdGFydGluZyB0aGUgZGlmZiwgY2hlY2sgaWYgd2UncmUgZGlmZmluZyBhbiBTVkcgb3Igd2l0aGluIGFuIFNWR1xuXHRcdGlzU3ZnTW9kZSA9IHBhcmVudCAhPSBudWxsICYmIHBhcmVudC5vd25lclNWR0VsZW1lbnQgIT09IHVuZGVmaW5lZDtcblxuXHRcdC8vIGh5ZHJhdGlvbiBpcyBpbmRpY2F0ZWQgYnkgdGhlIGV4aXN0aW5nIGVsZW1lbnQgdG8gYmUgZGlmZmVkIG5vdCBoYXZpbmcgYSBwcm9wIGNhY2hlXG5cdFx0aHlkcmF0aW5nID0gZG9tICE9IG51bGwgJiYgISgnX19wcmVhY3RhdHRyXycgaW4gZG9tKTtcblx0fVxuXG5cdHZhciByZXQgPSBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCwgY29tcG9uZW50Um9vdCk7XG5cblx0Ly8gYXBwZW5kIHRoZSBlbGVtZW50IGlmIGl0cyBhIG5ldyBwYXJlbnRcblx0aWYgKHBhcmVudCAmJiByZXQucGFyZW50Tm9kZSAhPT0gcGFyZW50KSBwYXJlbnQuYXBwZW5kQ2hpbGQocmV0KTtcblxuXHQvLyBkaWZmTGV2ZWwgYmVpbmcgcmVkdWNlZCB0byAwIG1lYW5zIHdlJ3JlIGV4aXRpbmcgdGhlIGRpZmZcblx0aWYgKCEgLS1kaWZmTGV2ZWwpIHtcblx0XHRoeWRyYXRpbmcgPSBmYWxzZTtcblx0XHQvLyBpbnZva2UgcXVldWVkIGNvbXBvbmVudERpZE1vdW50IGxpZmVjeWNsZSBtZXRob2RzXG5cdFx0aWYgKCFjb21wb25lbnRSb290KSBmbHVzaE1vdW50cygpO1xuXHR9XG5cblx0cmV0dXJuIHJldDtcbn1cblxuLyoqIEludGVybmFscyBvZiBgZGlmZigpYCwgc2VwYXJhdGVkIHRvIGFsbG93IGJ5cGFzc2luZyBkaWZmTGV2ZWwgLyBtb3VudCBmbHVzaGluZy4gKi9cbmZ1bmN0aW9uIGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBjb21wb25lbnRSb290KSB7XG5cdHZhciBvdXQgPSBkb20sXG5cdCAgICBwcmV2U3ZnTW9kZSA9IGlzU3ZnTW9kZTtcblxuXHQvLyBlbXB0eSB2YWx1ZXMgKG51bGwsIHVuZGVmaW5lZCwgYm9vbGVhbnMpIHJlbmRlciBhcyBlbXB0eSBUZXh0IG5vZGVzXG5cdGlmICh2bm9kZSA9PSBudWxsIHx8IHR5cGVvZiB2bm9kZSA9PT0gJ2Jvb2xlYW4nKSB2bm9kZSA9ICcnO1xuXG5cdC8vIEZhc3QgY2FzZTogU3RyaW5ncyAmIE51bWJlcnMgY3JlYXRlL3VwZGF0ZSBUZXh0IG5vZGVzLlxuXHRpZiAodHlwZW9mIHZub2RlID09PSAnc3RyaW5nJyB8fCB0eXBlb2Ygdm5vZGUgPT09ICdudW1iZXInKSB7XG5cblx0XHQvLyB1cGRhdGUgaWYgaXQncyBhbHJlYWR5IGEgVGV4dCBub2RlOlxuXHRcdGlmIChkb20gJiYgZG9tLnNwbGl0VGV4dCAhPT0gdW5kZWZpbmVkICYmIGRvbS5wYXJlbnROb2RlICYmICghZG9tLl9jb21wb25lbnQgfHwgY29tcG9uZW50Um9vdCkpIHtcblx0XHRcdC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLyAvKiBCcm93c2VyIHF1aXJrIHRoYXQgY2FuJ3QgYmUgY292ZXJlZDogaHR0cHM6Ly9naXRodWIuY29tL2RldmVsb3BpdC9wcmVhY3QvY29tbWl0L2ZkNGYyMWY1YzQ1ZGZkNzUxNTFiZDI3YjRjMjE3ZDgwMDNhYTVlYjkgKi9cblx0XHRcdGlmIChkb20ubm9kZVZhbHVlICE9IHZub2RlKSB7XG5cdFx0XHRcdGRvbS5ub2RlVmFsdWUgPSB2bm9kZTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gaXQgd2Fzbid0IGEgVGV4dCBub2RlOiByZXBsYWNlIGl0IHdpdGggb25lIGFuZCByZWN5Y2xlIHRoZSBvbGQgRWxlbWVudFxuXHRcdFx0b3V0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodm5vZGUpO1xuXHRcdFx0aWYgKGRvbSkge1xuXHRcdFx0XHRpZiAoZG9tLnBhcmVudE5vZGUpIGRvbS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChvdXQsIGRvbSk7XG5cdFx0XHRcdHJlY29sbGVjdE5vZGVUcmVlKGRvbSwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0b3V0WydfX3ByZWFjdGF0dHJfJ10gPSB0cnVlO1xuXG5cdFx0cmV0dXJuIG91dDtcblx0fVxuXG5cdC8vIElmIHRoZSBWTm9kZSByZXByZXNlbnRzIGEgQ29tcG9uZW50LCBwZXJmb3JtIGEgY29tcG9uZW50IGRpZmY6XG5cdHZhciB2bm9kZU5hbWUgPSB2bm9kZS5ub2RlTmFtZTtcblx0aWYgKHR5cGVvZiB2bm9kZU5hbWUgPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpO1xuXHR9XG5cblx0Ly8gVHJhY2tzIGVudGVyaW5nIGFuZCBleGl0aW5nIFNWRyBuYW1lc3BhY2Ugd2hlbiBkZXNjZW5kaW5nIHRocm91Z2ggdGhlIHRyZWUuXG5cdGlzU3ZnTW9kZSA9IHZub2RlTmFtZSA9PT0gJ3N2ZycgPyB0cnVlIDogdm5vZGVOYW1lID09PSAnZm9yZWlnbk9iamVjdCcgPyBmYWxzZSA6IGlzU3ZnTW9kZTtcblxuXHQvLyBJZiB0aGVyZSdzIG5vIGV4aXN0aW5nIGVsZW1lbnQgb3IgaXQncyB0aGUgd3JvbmcgdHlwZSwgY3JlYXRlIGEgbmV3IG9uZTpcblx0dm5vZGVOYW1lID0gU3RyaW5nKHZub2RlTmFtZSk7XG5cdGlmICghZG9tIHx8ICFpc05hbWVkTm9kZShkb20sIHZub2RlTmFtZSkpIHtcblx0XHRvdXQgPSBjcmVhdGVOb2RlKHZub2RlTmFtZSwgaXNTdmdNb2RlKTtcblxuXHRcdGlmIChkb20pIHtcblx0XHRcdC8vIG1vdmUgY2hpbGRyZW4gaW50byB0aGUgcmVwbGFjZW1lbnQgbm9kZVxuXHRcdFx0d2hpbGUgKGRvbS5maXJzdENoaWxkKSB7XG5cdFx0XHRcdG91dC5hcHBlbmRDaGlsZChkb20uZmlyc3RDaGlsZCk7XG5cdFx0XHR9IC8vIGlmIHRoZSBwcmV2aW91cyBFbGVtZW50IHdhcyBtb3VudGVkIGludG8gdGhlIERPTSwgcmVwbGFjZSBpdCBpbmxpbmVcblx0XHRcdGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTtcblxuXHRcdFx0Ly8gcmVjeWNsZSB0aGUgb2xkIGVsZW1lbnQgKHNraXBzIG5vbi1FbGVtZW50IG5vZGUgdHlwZXMpXG5cdFx0XHRyZWNvbGxlY3ROb2RlVHJlZShkb20sIHRydWUpO1xuXHRcdH1cblx0fVxuXG5cdHZhciBmYyA9IG91dC5maXJzdENoaWxkLFxuXHQgICAgcHJvcHMgPSBvdXRbJ19fcHJlYWN0YXR0cl8nXSxcblx0ICAgIHZjaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xuXG5cdGlmIChwcm9wcyA9PSBudWxsKSB7XG5cdFx0cHJvcHMgPSBvdXRbJ19fcHJlYWN0YXR0cl8nXSA9IHt9O1xuXHRcdGZvciAodmFyIGEgPSBvdXQuYXR0cmlidXRlcywgaSA9IGEubGVuZ3RoOyBpLS07KSB7XG5cdFx0XHRwcm9wc1thW2ldLm5hbWVdID0gYVtpXS52YWx1ZTtcblx0XHR9XG5cdH1cblxuXHQvLyBPcHRpbWl6YXRpb246IGZhc3QtcGF0aCBmb3IgZWxlbWVudHMgY29udGFpbmluZyBhIHNpbmdsZSBUZXh0Tm9kZTpcblx0aWYgKCFoeWRyYXRpbmcgJiYgdmNoaWxkcmVuICYmIHZjaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgdHlwZW9mIHZjaGlsZHJlblswXSA9PT0gJ3N0cmluZycgJiYgZmMgIT0gbnVsbCAmJiBmYy5zcGxpdFRleHQgIT09IHVuZGVmaW5lZCAmJiBmYy5uZXh0U2libGluZyA9PSBudWxsKSB7XG5cdFx0aWYgKGZjLm5vZGVWYWx1ZSAhPSB2Y2hpbGRyZW5bMF0pIHtcblx0XHRcdGZjLm5vZGVWYWx1ZSA9IHZjaGlsZHJlblswXTtcblx0XHR9XG5cdH1cblx0Ly8gb3RoZXJ3aXNlLCBpZiB0aGVyZSBhcmUgZXhpc3Rpbmcgb3IgbmV3IGNoaWxkcmVuLCBkaWZmIHRoZW06XG5cdGVsc2UgaWYgKHZjaGlsZHJlbiAmJiB2Y2hpbGRyZW4ubGVuZ3RoIHx8IGZjICE9IG51bGwpIHtcblx0XHRcdGlubmVyRGlmZk5vZGUob3V0LCB2Y2hpbGRyZW4sIGNvbnRleHQsIG1vdW50QWxsLCBoeWRyYXRpbmcgfHwgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgIT0gbnVsbCk7XG5cdFx0fVxuXG5cdC8vIEFwcGx5IGF0dHJpYnV0ZXMvcHJvcHMgZnJvbSBWTm9kZSB0byB0aGUgRE9NIEVsZW1lbnQ6XG5cdGRpZmZBdHRyaWJ1dGVzKG91dCwgdm5vZGUuYXR0cmlidXRlcywgcHJvcHMpO1xuXG5cdC8vIHJlc3RvcmUgcHJldmlvdXMgU1ZHIG1vZGU6IChpbiBjYXNlIHdlJ3JlIGV4aXRpbmcgYW4gU1ZHIG5hbWVzcGFjZSlcblx0aXNTdmdNb2RlID0gcHJldlN2Z01vZGU7XG5cblx0cmV0dXJuIG91dDtcbn1cblxuLyoqIEFwcGx5IGNoaWxkIGFuZCBhdHRyaWJ1dGUgY2hhbmdlcyBiZXR3ZWVuIGEgVk5vZGUgYW5kIGEgRE9NIE5vZGUgdG8gdGhlIERPTS5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IGRvbVx0XHRcdEVsZW1lbnQgd2hvc2UgY2hpbGRyZW4gc2hvdWxkIGJlIGNvbXBhcmVkICYgbXV0YXRlZFxuICpcdEBwYXJhbSB7QXJyYXl9IHZjaGlsZHJlblx0XHRBcnJheSBvZiBWTm9kZXMgdG8gY29tcGFyZSB0byBgZG9tLmNoaWxkTm9kZXNgXG4gKlx0QHBhcmFtIHtPYmplY3R9IGNvbnRleHRcdFx0XHRJbXBsaWNpdGx5IGRlc2NlbmRhbnQgY29udGV4dCBvYmplY3QgKGZyb20gbW9zdCByZWNlbnQgYGdldENoaWxkQ29udGV4dCgpYClcbiAqXHRAcGFyYW0ge0Jvb2xlYW59IG1vdW50QWxsXG4gKlx0QHBhcmFtIHtCb29sZWFufSBpc0h5ZHJhdGluZ1x0SWYgYHRydWVgLCBjb25zdW1lcyBleHRlcm5hbGx5IGNyZWF0ZWQgZWxlbWVudHMgc2ltaWxhciB0byBoeWRyYXRpb25cbiAqL1xuZnVuY3Rpb24gaW5uZXJEaWZmTm9kZShkb20sIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwsIGlzSHlkcmF0aW5nKSB7XG5cdHZhciBvcmlnaW5hbENoaWxkcmVuID0gZG9tLmNoaWxkTm9kZXMsXG5cdCAgICBjaGlsZHJlbiA9IFtdLFxuXHQgICAga2V5ZWQgPSB7fSxcblx0ICAgIGtleWVkTGVuID0gMCxcblx0ICAgIG1pbiA9IDAsXG5cdCAgICBsZW4gPSBvcmlnaW5hbENoaWxkcmVuLmxlbmd0aCxcblx0ICAgIGNoaWxkcmVuTGVuID0gMCxcblx0ICAgIHZsZW4gPSB2Y2hpbGRyZW4gPyB2Y2hpbGRyZW4ubGVuZ3RoIDogMCxcblx0ICAgIGosXG5cdCAgICBjLFxuXHQgICAgZixcblx0ICAgIHZjaGlsZCxcblx0ICAgIGNoaWxkO1xuXG5cdC8vIEJ1aWxkIHVwIGEgbWFwIG9mIGtleWVkIGNoaWxkcmVuIGFuZCBhbiBBcnJheSBvZiB1bmtleWVkIGNoaWxkcmVuOlxuXHRpZiAobGVuICE9PSAwKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0dmFyIF9jaGlsZCA9IG9yaWdpbmFsQ2hpbGRyZW5baV0sXG5cdFx0XHQgICAgcHJvcHMgPSBfY2hpbGRbJ19fcHJlYWN0YXR0cl8nXSxcblx0XHRcdCAgICBrZXkgPSB2bGVuICYmIHByb3BzID8gX2NoaWxkLl9jb21wb25lbnQgPyBfY2hpbGQuX2NvbXBvbmVudC5fX2tleSA6IHByb3BzLmtleSA6IG51bGw7XG5cdFx0XHRpZiAoa2V5ICE9IG51bGwpIHtcblx0XHRcdFx0a2V5ZWRMZW4rKztcblx0XHRcdFx0a2V5ZWRba2V5XSA9IF9jaGlsZDtcblx0XHRcdH0gZWxzZSBpZiAocHJvcHMgfHwgKF9jaGlsZC5zcGxpdFRleHQgIT09IHVuZGVmaW5lZCA/IGlzSHlkcmF0aW5nID8gX2NoaWxkLm5vZGVWYWx1ZS50cmltKCkgOiB0cnVlIDogaXNIeWRyYXRpbmcpKSB7XG5cdFx0XHRcdGNoaWxkcmVuW2NoaWxkcmVuTGVuKytdID0gX2NoaWxkO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmICh2bGVuICE9PSAwKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2bGVuOyBpKyspIHtcblx0XHRcdHZjaGlsZCA9IHZjaGlsZHJlbltpXTtcblx0XHRcdGNoaWxkID0gbnVsbDtcblxuXHRcdFx0Ly8gYXR0ZW1wdCB0byBmaW5kIGEgbm9kZSBiYXNlZCBvbiBrZXkgbWF0Y2hpbmdcblx0XHRcdHZhciBrZXkgPSB2Y2hpbGQua2V5O1xuXHRcdFx0aWYgKGtleSAhPSBudWxsKSB7XG5cdFx0XHRcdGlmIChrZXllZExlbiAmJiBrZXllZFtrZXldICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRjaGlsZCA9IGtleWVkW2tleV07XG5cdFx0XHRcdFx0a2V5ZWRba2V5XSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRrZXllZExlbi0tO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBhdHRlbXB0IHRvIHBsdWNrIGEgbm9kZSBvZiB0aGUgc2FtZSB0eXBlIGZyb20gdGhlIGV4aXN0aW5nIGNoaWxkcmVuXG5cdFx0XHRlbHNlIGlmICghY2hpbGQgJiYgbWluIDwgY2hpbGRyZW5MZW4pIHtcblx0XHRcdFx0XHRmb3IgKGogPSBtaW47IGogPCBjaGlsZHJlbkxlbjsgaisrKSB7XG5cdFx0XHRcdFx0XHRpZiAoY2hpbGRyZW5bal0gIT09IHVuZGVmaW5lZCAmJiBpc1NhbWVOb2RlVHlwZShjID0gY2hpbGRyZW5bal0sIHZjaGlsZCwgaXNIeWRyYXRpbmcpKSB7XG5cdFx0XHRcdFx0XHRcdGNoaWxkID0gYztcblx0XHRcdFx0XHRcdFx0Y2hpbGRyZW5bal0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdGlmIChqID09PSBjaGlsZHJlbkxlbiAtIDEpIGNoaWxkcmVuTGVuLS07XG5cdFx0XHRcdFx0XHRcdGlmIChqID09PSBtaW4pIG1pbisrO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gbW9ycGggdGhlIG1hdGNoZWQvZm91bmQvY3JlYXRlZCBET00gY2hpbGQgdG8gbWF0Y2ggdmNoaWxkIChkZWVwKVxuXHRcdFx0Y2hpbGQgPSBpZGlmZihjaGlsZCwgdmNoaWxkLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cblx0XHRcdGYgPSBvcmlnaW5hbENoaWxkcmVuW2ldO1xuXHRcdFx0aWYgKGNoaWxkICYmIGNoaWxkICE9PSBkb20gJiYgY2hpbGQgIT09IGYpIHtcblx0XHRcdFx0aWYgKGYgPT0gbnVsbCkge1xuXHRcdFx0XHRcdGRvbS5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2hpbGQgPT09IGYubmV4dFNpYmxpbmcpIHtcblx0XHRcdFx0XHRyZW1vdmVOb2RlKGYpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRvbS5pbnNlcnRCZWZvcmUoY2hpbGQsIGYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gcmVtb3ZlIHVudXNlZCBrZXllZCBjaGlsZHJlbjpcblx0aWYgKGtleWVkTGVuKSB7XG5cdFx0Zm9yICh2YXIgaSBpbiBrZXllZCkge1xuXHRcdFx0aWYgKGtleWVkW2ldICE9PSB1bmRlZmluZWQpIHJlY29sbGVjdE5vZGVUcmVlKGtleWVkW2ldLCBmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gcmVtb3ZlIG9ycGhhbmVkIHVua2V5ZWQgY2hpbGRyZW46XG5cdHdoaWxlIChtaW4gPD0gY2hpbGRyZW5MZW4pIHtcblx0XHRpZiAoKGNoaWxkID0gY2hpbGRyZW5bY2hpbGRyZW5MZW4tLV0pICE9PSB1bmRlZmluZWQpIHJlY29sbGVjdE5vZGVUcmVlKGNoaWxkLCBmYWxzZSk7XG5cdH1cbn1cblxuLyoqIFJlY3Vyc2l2ZWx5IHJlY3ljbGUgKG9yIGp1c3QgdW5tb3VudCkgYSBub2RlIGFuZCBpdHMgZGVzY2VuZGFudHMuXG4gKlx0QHBhcmFtIHtOb2RlfSBub2RlXHRcdFx0XHRcdFx0RE9NIG5vZGUgdG8gc3RhcnQgdW5tb3VudC9yZW1vdmFsIGZyb21cbiAqXHRAcGFyYW0ge0Jvb2xlYW59IFt1bm1vdW50T25seT1mYWxzZV1cdElmIGB0cnVlYCwgb25seSB0cmlnZ2VycyB1bm1vdW50IGxpZmVjeWNsZSwgc2tpcHMgcmVtb3ZhbFxuICovXG5mdW5jdGlvbiByZWNvbGxlY3ROb2RlVHJlZShub2RlLCB1bm1vdW50T25seSkge1xuXHR2YXIgY29tcG9uZW50ID0gbm9kZS5fY29tcG9uZW50O1xuXHRpZiAoY29tcG9uZW50KSB7XG5cdFx0Ly8gaWYgbm9kZSBpcyBvd25lZCBieSBhIENvbXBvbmVudCwgdW5tb3VudCB0aGF0IGNvbXBvbmVudCAoZW5kcyB1cCByZWN1cnNpbmcgYmFjayBoZXJlKVxuXHRcdHVubW91bnRDb21wb25lbnQoY29tcG9uZW50KTtcblx0fSBlbHNlIHtcblx0XHQvLyBJZiB0aGUgbm9kZSdzIFZOb2RlIGhhZCBhIHJlZiBmdW5jdGlvbiwgaW52b2tlIGl0IHdpdGggbnVsbCBoZXJlLlxuXHRcdC8vICh0aGlzIGlzIHBhcnQgb2YgdGhlIFJlYWN0IHNwZWMsIGFuZCBzbWFydCBmb3IgdW5zZXR0aW5nIHJlZmVyZW5jZXMpXG5cdFx0aWYgKG5vZGVbJ19fcHJlYWN0YXR0cl8nXSAhPSBudWxsICYmIG5vZGVbJ19fcHJlYWN0YXR0cl8nXS5yZWYpIG5vZGVbJ19fcHJlYWN0YXR0cl8nXS5yZWYobnVsbCk7XG5cblx0XHRpZiAodW5tb3VudE9ubHkgPT09IGZhbHNlIHx8IG5vZGVbJ19fcHJlYWN0YXR0cl8nXSA9PSBudWxsKSB7XG5cdFx0XHRyZW1vdmVOb2RlKG5vZGUpO1xuXHRcdH1cblxuXHRcdHJlbW92ZUNoaWxkcmVuKG5vZGUpO1xuXHR9XG59XG5cbi8qKiBSZWNvbGxlY3QvdW5tb3VudCBhbGwgY2hpbGRyZW4uXG4gKlx0LSB3ZSB1c2UgLmxhc3RDaGlsZCBoZXJlIGJlY2F1c2UgaXQgY2F1c2VzIGxlc3MgcmVmbG93IHRoYW4gLmZpcnN0Q2hpbGRcbiAqXHQtIGl0J3MgYWxzbyBjaGVhcGVyIHRoYW4gYWNjZXNzaW5nIHRoZSAuY2hpbGROb2RlcyBMaXZlIE5vZGVMaXN0XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKG5vZGUpIHtcblx0bm9kZSA9IG5vZGUubGFzdENoaWxkO1xuXHR3aGlsZSAobm9kZSkge1xuXHRcdHZhciBuZXh0ID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XG5cdFx0cmVjb2xsZWN0Tm9kZVRyZWUobm9kZSwgdHJ1ZSk7XG5cdFx0bm9kZSA9IG5leHQ7XG5cdH1cbn1cblxuLyoqIEFwcGx5IGRpZmZlcmVuY2VzIGluIGF0dHJpYnV0ZXMgZnJvbSBhIFZOb2RlIHRvIHRoZSBnaXZlbiBET00gRWxlbWVudC5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IGRvbVx0XHRFbGVtZW50IHdpdGggYXR0cmlidXRlcyB0byBkaWZmIGBhdHRyc2AgYWdhaW5zdFxuICpcdEBwYXJhbSB7T2JqZWN0fSBhdHRyc1x0XHRUaGUgZGVzaXJlZCBlbmQtc3RhdGUga2V5LXZhbHVlIGF0dHJpYnV0ZSBwYWlyc1xuICpcdEBwYXJhbSB7T2JqZWN0fSBvbGRcdFx0XHRDdXJyZW50L3ByZXZpb3VzIGF0dHJpYnV0ZXMgKGZyb20gcHJldmlvdXMgVk5vZGUgb3IgZWxlbWVudCdzIHByb3AgY2FjaGUpXG4gKi9cbmZ1bmN0aW9uIGRpZmZBdHRyaWJ1dGVzKGRvbSwgYXR0cnMsIG9sZCkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyByZW1vdmUgYXR0cmlidXRlcyBubyBsb25nZXIgcHJlc2VudCBvbiB0aGUgdm5vZGUgYnkgc2V0dGluZyB0aGVtIHRvIHVuZGVmaW5lZFxuXHRmb3IgKG5hbWUgaW4gb2xkKSB7XG5cdFx0aWYgKCEoYXR0cnMgJiYgYXR0cnNbbmFtZV0gIT0gbnVsbCkgJiYgb2xkW25hbWVdICE9IG51bGwpIHtcblx0XHRcdHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSB1bmRlZmluZWQsIGlzU3ZnTW9kZSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gYWRkIG5ldyAmIHVwZGF0ZSBjaGFuZ2VkIGF0dHJpYnV0ZXNcblx0Zm9yIChuYW1lIGluIGF0dHJzKSB7XG5cdFx0aWYgKG5hbWUgIT09ICdjaGlsZHJlbicgJiYgbmFtZSAhPT0gJ2lubmVySFRNTCcgJiYgKCEobmFtZSBpbiBvbGQpIHx8IGF0dHJzW25hbWVdICE9PSAobmFtZSA9PT0gJ3ZhbHVlJyB8fCBuYW1lID09PSAnY2hlY2tlZCcgPyBkb21bbmFtZV0gOiBvbGRbbmFtZV0pKSkge1xuXHRcdFx0c2V0QWNjZXNzb3IoZG9tLCBuYW1lLCBvbGRbbmFtZV0sIG9sZFtuYW1lXSA9IGF0dHJzW25hbWVdLCBpc1N2Z01vZGUpO1xuXHRcdH1cblx0fVxufVxuXG4vKiogUmV0YWlucyBhIHBvb2wgb2YgQ29tcG9uZW50cyBmb3IgcmUtdXNlLCBrZXllZCBvbiBjb21wb25lbnQgbmFtZS5cbiAqXHROb3RlOiBzaW5jZSBjb21wb25lbnQgbmFtZXMgYXJlIG5vdCB1bmlxdWUgb3IgZXZlbiBuZWNlc3NhcmlseSBhdmFpbGFibGUsIHRoZXNlIGFyZSBwcmltYXJpbHkgYSBmb3JtIG9mIHNoYXJkaW5nLlxuICpcdEBwcml2YXRlXG4gKi9cbnZhciBjb21wb25lbnRzID0ge307XG5cbi8qKiBSZWNsYWltIGEgY29tcG9uZW50IGZvciBsYXRlciByZS11c2UgYnkgdGhlIHJlY3ljbGVyLiAqL1xuZnVuY3Rpb24gY29sbGVjdENvbXBvbmVudChjb21wb25lbnQpIHtcblx0dmFyIG5hbWUgPSBjb21wb25lbnQuY29uc3RydWN0b3IubmFtZTtcblx0KGNvbXBvbmVudHNbbmFtZV0gfHwgKGNvbXBvbmVudHNbbmFtZV0gPSBbXSkpLnB1c2goY29tcG9uZW50KTtcbn1cblxuLyoqIENyZWF0ZSBhIGNvbXBvbmVudC4gTm9ybWFsaXplcyBkaWZmZXJlbmNlcyBiZXR3ZWVuIFBGQydzIGFuZCBjbGFzc2Z1bCBDb21wb25lbnRzLiAqL1xuZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50KEN0b3IsIHByb3BzLCBjb250ZXh0KSB7XG5cdHZhciBsaXN0ID0gY29tcG9uZW50c1tDdG9yLm5hbWVdLFxuXHQgICAgaW5zdDtcblxuXHRpZiAoQ3Rvci5wcm90b3R5cGUgJiYgQ3Rvci5wcm90b3R5cGUucmVuZGVyKSB7XG5cdFx0aW5zdCA9IG5ldyBDdG9yKHByb3BzLCBjb250ZXh0KTtcblx0XHRDb21wb25lbnQuY2FsbChpbnN0LCBwcm9wcywgY29udGV4dCk7XG5cdH0gZWxzZSB7XG5cdFx0aW5zdCA9IG5ldyBDb21wb25lbnQocHJvcHMsIGNvbnRleHQpO1xuXHRcdGluc3QuY29uc3RydWN0b3IgPSBDdG9yO1xuXHRcdGluc3QucmVuZGVyID0gZG9SZW5kZXI7XG5cdH1cblxuXHRpZiAobGlzdCkge1xuXHRcdGZvciAodmFyIGkgPSBsaXN0Lmxlbmd0aDsgaS0tOykge1xuXHRcdFx0aWYgKGxpc3RbaV0uY29uc3RydWN0b3IgPT09IEN0b3IpIHtcblx0XHRcdFx0aW5zdC5uZXh0QmFzZSA9IGxpc3RbaV0ubmV4dEJhc2U7XG5cdFx0XHRcdGxpc3Quc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIGluc3Q7XG59XG5cbi8qKiBUaGUgYC5yZW5kZXIoKWAgbWV0aG9kIGZvciBhIFBGQyBiYWNraW5nIGluc3RhbmNlLiAqL1xuZnVuY3Rpb24gZG9SZW5kZXIocHJvcHMsIHN0YXRlLCBjb250ZXh0KSB7XG5cdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKHByb3BzLCBjb250ZXh0KTtcbn1cblxuLyoqIFNldCBhIGNvbXBvbmVudCdzIGBwcm9wc2AgKGdlbmVyYWxseSBkZXJpdmVkIGZyb20gSlNYIGF0dHJpYnV0ZXMpLlxuICpcdEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICpcdEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqXHRAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnJlbmRlclN5bmM9ZmFsc2VdXHRJZiBgdHJ1ZWAgYW5kIHtAbGluayBvcHRpb25zLnN5bmNDb21wb25lbnRVcGRhdGVzfSBpcyBgdHJ1ZWAsIHRyaWdnZXJzIHN5bmNocm9ub3VzIHJlbmRlcmluZy5cbiAqXHRAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnJlbmRlcj10cnVlXVx0XHRcdElmIGBmYWxzZWAsIG5vIHJlbmRlciB3aWxsIGJlIHRyaWdnZXJlZC5cbiAqL1xuZnVuY3Rpb24gc2V0Q29tcG9uZW50UHJvcHMoY29tcG9uZW50LCBwcm9wcywgb3B0cywgY29udGV4dCwgbW91bnRBbGwpIHtcblx0aWYgKGNvbXBvbmVudC5fZGlzYWJsZSkgcmV0dXJuO1xuXHRjb21wb25lbnQuX2Rpc2FibGUgPSB0cnVlO1xuXG5cdGlmIChjb21wb25lbnQuX19yZWYgPSBwcm9wcy5yZWYpIGRlbGV0ZSBwcm9wcy5yZWY7XG5cdGlmIChjb21wb25lbnQuX19rZXkgPSBwcm9wcy5rZXkpIGRlbGV0ZSBwcm9wcy5rZXk7XG5cblx0aWYgKCFjb21wb25lbnQuYmFzZSB8fCBtb3VudEFsbCkge1xuXHRcdGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbE1vdW50KSBjb21wb25lbnQuY29tcG9uZW50V2lsbE1vdW50KCk7XG5cdH0gZWxzZSBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMpIHtcblx0XHRjb21wb25lbnQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhwcm9wcywgY29udGV4dCk7XG5cdH1cblxuXHRpZiAoY29udGV4dCAmJiBjb250ZXh0ICE9PSBjb21wb25lbnQuY29udGV4dCkge1xuXHRcdGlmICghY29tcG9uZW50LnByZXZDb250ZXh0KSBjb21wb25lbnQucHJldkNvbnRleHQgPSBjb21wb25lbnQuY29udGV4dDtcblx0XHRjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7XG5cdH1cblxuXHRpZiAoIWNvbXBvbmVudC5wcmV2UHJvcHMpIGNvbXBvbmVudC5wcmV2UHJvcHMgPSBjb21wb25lbnQucHJvcHM7XG5cdGNvbXBvbmVudC5wcm9wcyA9IHByb3BzO1xuXG5cdGNvbXBvbmVudC5fZGlzYWJsZSA9IGZhbHNlO1xuXG5cdGlmIChvcHRzICE9PSAwKSB7XG5cdFx0aWYgKG9wdHMgPT09IDEgfHwgb3B0aW9ucy5zeW5jQ29tcG9uZW50VXBkYXRlcyAhPT0gZmFsc2UgfHwgIWNvbXBvbmVudC5iYXNlKSB7XG5cdFx0XHRyZW5kZXJDb21wb25lbnQoY29tcG9uZW50LCAxLCBtb3VudEFsbCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVucXVldWVSZW5kZXIoY29tcG9uZW50KTtcblx0XHR9XG5cdH1cblxuXHRpZiAoY29tcG9uZW50Ll9fcmVmKSBjb21wb25lbnQuX19yZWYoY29tcG9uZW50KTtcbn1cblxuLyoqIFJlbmRlciBhIENvbXBvbmVudCwgdHJpZ2dlcmluZyBuZWNlc3NhcnkgbGlmZWN5Y2xlIGV2ZW50cyBhbmQgdGFraW5nIEhpZ2gtT3JkZXIgQ29tcG9uZW50cyBpbnRvIGFjY291bnQuXG4gKlx0QHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudFxuICpcdEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqXHRAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmJ1aWxkPWZhbHNlXVx0XHRJZiBgdHJ1ZWAsIGNvbXBvbmVudCB3aWxsIGJ1aWxkIGFuZCBzdG9yZSBhIERPTSBub2RlIGlmIG5vdCBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBvbmUuXG4gKlx0QHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudCwgb3B0cywgbW91bnRBbGwsIGlzQ2hpbGQpIHtcblx0aWYgKGNvbXBvbmVudC5fZGlzYWJsZSkgcmV0dXJuO1xuXG5cdHZhciBwcm9wcyA9IGNvbXBvbmVudC5wcm9wcyxcblx0ICAgIHN0YXRlID0gY29tcG9uZW50LnN0YXRlLFxuXHQgICAgY29udGV4dCA9IGNvbXBvbmVudC5jb250ZXh0LFxuXHQgICAgcHJldmlvdXNQcm9wcyA9IGNvbXBvbmVudC5wcmV2UHJvcHMgfHwgcHJvcHMsXG5cdCAgICBwcmV2aW91c1N0YXRlID0gY29tcG9uZW50LnByZXZTdGF0ZSB8fCBzdGF0ZSxcblx0ICAgIHByZXZpb3VzQ29udGV4dCA9IGNvbXBvbmVudC5wcmV2Q29udGV4dCB8fCBjb250ZXh0LFxuXHQgICAgaXNVcGRhdGUgPSBjb21wb25lbnQuYmFzZSxcblx0ICAgIG5leHRCYXNlID0gY29tcG9uZW50Lm5leHRCYXNlLFxuXHQgICAgaW5pdGlhbEJhc2UgPSBpc1VwZGF0ZSB8fCBuZXh0QmFzZSxcblx0ICAgIGluaXRpYWxDaGlsZENvbXBvbmVudCA9IGNvbXBvbmVudC5fY29tcG9uZW50LFxuXHQgICAgc2tpcCA9IGZhbHNlLFxuXHQgICAgcmVuZGVyZWQsXG5cdCAgICBpbnN0LFxuXHQgICAgY2Jhc2U7XG5cblx0Ly8gaWYgdXBkYXRpbmdcblx0aWYgKGlzVXBkYXRlKSB7XG5cdFx0Y29tcG9uZW50LnByb3BzID0gcHJldmlvdXNQcm9wcztcblx0XHRjb21wb25lbnQuc3RhdGUgPSBwcmV2aW91c1N0YXRlO1xuXHRcdGNvbXBvbmVudC5jb250ZXh0ID0gcHJldmlvdXNDb250ZXh0O1xuXHRcdGlmIChvcHRzICE9PSAyICYmIGNvbXBvbmVudC5zaG91bGRDb21wb25lbnRVcGRhdGUgJiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpID09PSBmYWxzZSkge1xuXHRcdFx0c2tpcCA9IHRydWU7XG5cdFx0fSBlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZSkge1xuXHRcdFx0Y29tcG9uZW50LmNvbXBvbmVudFdpbGxVcGRhdGUocHJvcHMsIHN0YXRlLCBjb250ZXh0KTtcblx0XHR9XG5cdFx0Y29tcG9uZW50LnByb3BzID0gcHJvcHM7XG5cdFx0Y29tcG9uZW50LnN0YXRlID0gc3RhdGU7XG5cdFx0Y29tcG9uZW50LmNvbnRleHQgPSBjb250ZXh0O1xuXHR9XG5cblx0Y29tcG9uZW50LnByZXZQcm9wcyA9IGNvbXBvbmVudC5wcmV2U3RhdGUgPSBjb21wb25lbnQucHJldkNvbnRleHQgPSBjb21wb25lbnQubmV4dEJhc2UgPSBudWxsO1xuXHRjb21wb25lbnQuX2RpcnR5ID0gZmFsc2U7XG5cblx0aWYgKCFza2lwKSB7XG5cdFx0cmVuZGVyZWQgPSBjb21wb25lbnQucmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCk7XG5cblx0XHQvLyBjb250ZXh0IHRvIHBhc3MgdG8gdGhlIGNoaWxkLCBjYW4gYmUgdXBkYXRlZCB2aWEgKGdyYW5kLSlwYXJlbnQgY29tcG9uZW50XG5cdFx0aWYgKGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQpIHtcblx0XHRcdGNvbnRleHQgPSBleHRlbmQoZXh0ZW5kKHt9LCBjb250ZXh0KSwgY29tcG9uZW50LmdldENoaWxkQ29udGV4dCgpKTtcblx0XHR9XG5cblx0XHR2YXIgY2hpbGRDb21wb25lbnQgPSByZW5kZXJlZCAmJiByZW5kZXJlZC5ub2RlTmFtZSxcblx0XHQgICAgdG9Vbm1vdW50LFxuXHRcdCAgICBiYXNlO1xuXG5cdFx0aWYgKHR5cGVvZiBjaGlsZENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Ly8gc2V0IHVwIGhpZ2ggb3JkZXIgY29tcG9uZW50IGxpbmtcblxuXHRcdFx0dmFyIGNoaWxkUHJvcHMgPSBnZXROb2RlUHJvcHMocmVuZGVyZWQpO1xuXHRcdFx0aW5zdCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDtcblxuXHRcdFx0aWYgKGluc3QgJiYgaW5zdC5jb25zdHJ1Y3RvciA9PT0gY2hpbGRDb21wb25lbnQgJiYgY2hpbGRQcm9wcy5rZXkgPT0gaW5zdC5fX2tleSkge1xuXHRcdFx0XHRzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAxLCBjb250ZXh0LCBmYWxzZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0b1VubW91bnQgPSBpbnN0O1xuXG5cdFx0XHRcdGNvbXBvbmVudC5fY29tcG9uZW50ID0gaW5zdCA9IGNyZWF0ZUNvbXBvbmVudChjaGlsZENvbXBvbmVudCwgY2hpbGRQcm9wcywgY29udGV4dCk7XG5cdFx0XHRcdGluc3QubmV4dEJhc2UgPSBpbnN0Lm5leHRCYXNlIHx8IG5leHRCYXNlO1xuXHRcdFx0XHRpbnN0Ll9wYXJlbnRDb21wb25lbnQgPSBjb21wb25lbnQ7XG5cdFx0XHRcdHNldENvbXBvbmVudFByb3BzKGluc3QsIGNoaWxkUHJvcHMsIDAsIGNvbnRleHQsIGZhbHNlKTtcblx0XHRcdFx0cmVuZGVyQ29tcG9uZW50KGluc3QsIDEsIG1vdW50QWxsLCB0cnVlKTtcblx0XHRcdH1cblxuXHRcdFx0YmFzZSA9IGluc3QuYmFzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2Jhc2UgPSBpbml0aWFsQmFzZTtcblxuXHRcdFx0Ly8gZGVzdHJveSBoaWdoIG9yZGVyIGNvbXBvbmVudCBsaW5rXG5cdFx0XHR0b1VubW91bnQgPSBpbml0aWFsQ2hpbGRDb21wb25lbnQ7XG5cdFx0XHRpZiAodG9Vbm1vdW50KSB7XG5cdFx0XHRcdGNiYXNlID0gY29tcG9uZW50Ll9jb21wb25lbnQgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaW5pdGlhbEJhc2UgfHwgb3B0cyA9PT0gMSkge1xuXHRcdFx0XHRpZiAoY2Jhc2UpIGNiYXNlLl9jb21wb25lbnQgPSBudWxsO1xuXHRcdFx0XHRiYXNlID0gZGlmZihjYmFzZSwgcmVuZGVyZWQsIGNvbnRleHQsIG1vdW50QWxsIHx8ICFpc1VwZGF0ZSwgaW5pdGlhbEJhc2UgJiYgaW5pdGlhbEJhc2UucGFyZW50Tm9kZSwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGluaXRpYWxCYXNlICYmIGJhc2UgIT09IGluaXRpYWxCYXNlICYmIGluc3QgIT09IGluaXRpYWxDaGlsZENvbXBvbmVudCkge1xuXHRcdFx0dmFyIGJhc2VQYXJlbnQgPSBpbml0aWFsQmFzZS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKGJhc2VQYXJlbnQgJiYgYmFzZSAhPT0gYmFzZVBhcmVudCkge1xuXHRcdFx0XHRiYXNlUGFyZW50LnJlcGxhY2VDaGlsZChiYXNlLCBpbml0aWFsQmFzZSk7XG5cblx0XHRcdFx0aWYgKCF0b1VubW91bnQpIHtcblx0XHRcdFx0XHRpbml0aWFsQmFzZS5fY29tcG9uZW50ID0gbnVsbDtcblx0XHRcdFx0XHRyZWNvbGxlY3ROb2RlVHJlZShpbml0aWFsQmFzZSwgZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRvVW5tb3VudCkge1xuXHRcdFx0dW5tb3VudENvbXBvbmVudCh0b1VubW91bnQpO1xuXHRcdH1cblxuXHRcdGNvbXBvbmVudC5iYXNlID0gYmFzZTtcblx0XHRpZiAoYmFzZSAmJiAhaXNDaGlsZCkge1xuXHRcdFx0dmFyIGNvbXBvbmVudFJlZiA9IGNvbXBvbmVudCxcblx0XHRcdCAgICB0ID0gY29tcG9uZW50O1xuXHRcdFx0d2hpbGUgKHQgPSB0Ll9wYXJlbnRDb21wb25lbnQpIHtcblx0XHRcdFx0KGNvbXBvbmVudFJlZiA9IHQpLmJhc2UgPSBiYXNlO1xuXHRcdFx0fVxuXHRcdFx0YmFzZS5fY29tcG9uZW50ID0gY29tcG9uZW50UmVmO1xuXHRcdFx0YmFzZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPSBjb21wb25lbnRSZWYuY29uc3RydWN0b3I7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCFpc1VwZGF0ZSB8fCBtb3VudEFsbCkge1xuXHRcdG1vdW50cy51bnNoaWZ0KGNvbXBvbmVudCk7XG5cdH0gZWxzZSBpZiAoIXNraXApIHtcblx0XHQvLyBFbnN1cmUgdGhhdCBwZW5kaW5nIGNvbXBvbmVudERpZE1vdW50KCkgaG9va3Mgb2YgY2hpbGQgY29tcG9uZW50c1xuXHRcdC8vIGFyZSBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnREaWRVcGRhdGUoKSBob29rIGluIHRoZSBwYXJlbnQuXG5cdFx0Ly8gTm90ZTogZGlzYWJsZWQgYXMgaXQgY2F1c2VzIGR1cGxpY2F0ZSBob29rcywgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kZXZlbG9waXQvcHJlYWN0L2lzc3Vlcy83NTBcblx0XHQvLyBmbHVzaE1vdW50cygpO1xuXG5cdFx0aWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUpIHtcblx0XHRcdGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUocHJldmlvdXNQcm9wcywgcHJldmlvdXNTdGF0ZSwgcHJldmlvdXNDb250ZXh0KTtcblx0XHR9XG5cdFx0aWYgKG9wdGlvbnMuYWZ0ZXJVcGRhdGUpIG9wdGlvbnMuYWZ0ZXJVcGRhdGUoY29tcG9uZW50KTtcblx0fVxuXG5cdGlmIChjb21wb25lbnQuX3JlbmRlckNhbGxiYWNrcyAhPSBudWxsKSB7XG5cdFx0d2hpbGUgKGNvbXBvbmVudC5fcmVuZGVyQ2FsbGJhY2tzLmxlbmd0aCkge1xuXHRcdFx0Y29tcG9uZW50Ll9yZW5kZXJDYWxsYmFja3MucG9wKCkuY2FsbChjb21wb25lbnQpO1xuXHRcdH1cblx0fVxuXG5cdGlmICghZGlmZkxldmVsICYmICFpc0NoaWxkKSBmbHVzaE1vdW50cygpO1xufVxuXG4vKiogQXBwbHkgdGhlIENvbXBvbmVudCByZWZlcmVuY2VkIGJ5IGEgVk5vZGUgdG8gdGhlIERPTS5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IGRvbVx0VGhlIERPTSBub2RlIHRvIG11dGF0ZVxuICpcdEBwYXJhbSB7Vk5vZGV9IHZub2RlXHRBIENvbXBvbmVudC1yZWZlcmVuY2luZyBWTm9kZVxuICpcdEByZXR1cm5zIHtFbGVtZW50fSBkb21cdFRoZSBjcmVhdGVkL211dGF0ZWQgZWxlbWVudFxuICpcdEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkQ29tcG9uZW50RnJvbVZOb2RlKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKSB7XG5cdHZhciBjID0gZG9tICYmIGRvbS5fY29tcG9uZW50LFxuXHQgICAgb3JpZ2luYWxDb21wb25lbnQgPSBjLFxuXHQgICAgb2xkRG9tID0gZG9tLFxuXHQgICAgaXNEaXJlY3RPd25lciA9IGMgJiYgZG9tLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWUsXG5cdCAgICBpc093bmVyID0gaXNEaXJlY3RPd25lcixcblx0ICAgIHByb3BzID0gZ2V0Tm9kZVByb3BzKHZub2RlKTtcblx0d2hpbGUgKGMgJiYgIWlzT3duZXIgJiYgKGMgPSBjLl9wYXJlbnRDb21wb25lbnQpKSB7XG5cdFx0aXNPd25lciA9IGMuY29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lO1xuXHR9XG5cblx0aWYgKGMgJiYgaXNPd25lciAmJiAoIW1vdW50QWxsIHx8IGMuX2NvbXBvbmVudCkpIHtcblx0XHRzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgMywgY29udGV4dCwgbW91bnRBbGwpO1xuXHRcdGRvbSA9IGMuYmFzZTtcblx0fSBlbHNlIHtcblx0XHRpZiAob3JpZ2luYWxDb21wb25lbnQgJiYgIWlzRGlyZWN0T3duZXIpIHtcblx0XHRcdHVubW91bnRDb21wb25lbnQob3JpZ2luYWxDb21wb25lbnQpO1xuXHRcdFx0ZG9tID0gb2xkRG9tID0gbnVsbDtcblx0XHR9XG5cblx0XHRjID0gY3JlYXRlQ29tcG9uZW50KHZub2RlLm5vZGVOYW1lLCBwcm9wcywgY29udGV4dCk7XG5cdFx0aWYgKGRvbSAmJiAhYy5uZXh0QmFzZSkge1xuXHRcdFx0Yy5uZXh0QmFzZSA9IGRvbTtcblx0XHRcdC8vIHBhc3NpbmcgZG9tL29sZERvbSBhcyBuZXh0QmFzZSB3aWxsIHJlY3ljbGUgaXQgaWYgdW51c2VkLCBzbyBieXBhc3MgcmVjeWNsaW5nIG9uIEwyMjk6XG5cdFx0XHRvbGREb20gPSBudWxsO1xuXHRcdH1cblx0XHRzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgMSwgY29udGV4dCwgbW91bnRBbGwpO1xuXHRcdGRvbSA9IGMuYmFzZTtcblxuXHRcdGlmIChvbGREb20gJiYgZG9tICE9PSBvbGREb20pIHtcblx0XHRcdG9sZERvbS5fY29tcG9uZW50ID0gbnVsbDtcblx0XHRcdHJlY29sbGVjdE5vZGVUcmVlKG9sZERvbSwgZmFsc2UpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBkb207XG59XG5cbi8qKiBSZW1vdmUgYSBjb21wb25lbnQgZnJvbSB0aGUgRE9NIGFuZCByZWN5Y2xlIGl0LlxuICpcdEBwYXJhbSB7Q29tcG9uZW50fSBjb21wb25lbnRcdFRoZSBDb21wb25lbnQgaW5zdGFuY2UgdG8gdW5tb3VudFxuICpcdEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHVubW91bnRDb21wb25lbnQoY29tcG9uZW50KSB7XG5cdGlmIChvcHRpb25zLmJlZm9yZVVubW91bnQpIG9wdGlvbnMuYmVmb3JlVW5tb3VudChjb21wb25lbnQpO1xuXG5cdHZhciBiYXNlID0gY29tcG9uZW50LmJhc2U7XG5cblx0Y29tcG9uZW50Ll9kaXNhYmxlID0gdHJ1ZTtcblxuXHRpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxVbm1vdW50KSBjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQoKTtcblxuXHRjb21wb25lbnQuYmFzZSA9IG51bGw7XG5cblx0Ly8gcmVjdXJzaXZlbHkgdGVhciBkb3duICYgcmVjb2xsZWN0IGhpZ2gtb3JkZXIgY29tcG9uZW50IGNoaWxkcmVuOlxuXHR2YXIgaW5uZXIgPSBjb21wb25lbnQuX2NvbXBvbmVudDtcblx0aWYgKGlubmVyKSB7XG5cdFx0dW5tb3VudENvbXBvbmVudChpbm5lcik7XG5cdH0gZWxzZSBpZiAoYmFzZSkge1xuXHRcdGlmIChiYXNlWydfX3ByZWFjdGF0dHJfJ10gJiYgYmFzZVsnX19wcmVhY3RhdHRyXyddLnJlZikgYmFzZVsnX19wcmVhY3RhdHRyXyddLnJlZihudWxsKTtcblxuXHRcdGNvbXBvbmVudC5uZXh0QmFzZSA9IGJhc2U7XG5cblx0XHRyZW1vdmVOb2RlKGJhc2UpO1xuXHRcdGNvbGxlY3RDb21wb25lbnQoY29tcG9uZW50KTtcblxuXHRcdHJlbW92ZUNoaWxkcmVuKGJhc2UpO1xuXHR9XG5cblx0aWYgKGNvbXBvbmVudC5fX3JlZikgY29tcG9uZW50Ll9fcmVmKG51bGwpO1xufVxuXG4vKiogQmFzZSBDb21wb25lbnQgY2xhc3MuXG4gKlx0UHJvdmlkZXMgYHNldFN0YXRlKClgIGFuZCBgZm9yY2VVcGRhdGUoKWAsIHdoaWNoIHRyaWdnZXIgcmVuZGVyaW5nLlxuICpcdEBwdWJsaWNcbiAqXG4gKlx0QGV4YW1wbGVcbiAqXHRjbGFzcyBNeUZvbyBleHRlbmRzIENvbXBvbmVudCB7XG4gKlx0XHRyZW5kZXIocHJvcHMsIHN0YXRlKSB7XG4gKlx0XHRcdHJldHVybiA8ZGl2IC8+O1xuICpcdFx0fVxuICpcdH1cbiAqL1xuZnVuY3Rpb24gQ29tcG9uZW50KHByb3BzLCBjb250ZXh0KSB7XG5cdHRoaXMuX2RpcnR5ID0gdHJ1ZTtcblxuXHQvKiogQHB1YmxpY1xuICAqXHRAdHlwZSB7b2JqZWN0fVxuICAqL1xuXHR0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG5cdC8qKiBAcHVibGljXG4gICpcdEB0eXBlIHtvYmplY3R9XG4gICovXG5cdHRoaXMucHJvcHMgPSBwcm9wcztcblxuXHQvKiogQHB1YmxpY1xuICAqXHRAdHlwZSB7b2JqZWN0fVxuICAqL1xuXHR0aGlzLnN0YXRlID0gdGhpcy5zdGF0ZSB8fCB7fTtcbn1cblxuZXh0ZW5kKENvbXBvbmVudC5wcm90b3R5cGUsIHtcblxuXHQvKiogUmV0dXJucyBhIGBib29sZWFuYCBpbmRpY2F0aW5nIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIHJlLXJlbmRlciB3aGVuIHJlY2VpdmluZyB0aGUgZ2l2ZW4gYHByb3BzYCBhbmQgYHN0YXRlYC5cbiAgKlx0QHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAqXHRAcGFyYW0ge29iamVjdH0gbmV4dFN0YXRlXG4gICpcdEBwYXJhbSB7b2JqZWN0fSBuZXh0Q29udGV4dFxuICAqXHRAcmV0dXJucyB7Qm9vbGVhbn0gc2hvdWxkIHRoZSBjb21wb25lbnQgcmUtcmVuZGVyXG4gICpcdEBuYW1lIHNob3VsZENvbXBvbmVudFVwZGF0ZVxuICAqXHRAZnVuY3Rpb25cbiAgKi9cblxuXHQvKiogVXBkYXRlIGNvbXBvbmVudCBzdGF0ZSBieSBjb3B5aW5nIHByb3BlcnRpZXMgZnJvbSBgc3RhdGVgIHRvIGB0aGlzLnN0YXRlYC5cbiAgKlx0QHBhcmFtIHtvYmplY3R9IHN0YXRlXHRcdEEgaGFzaCBvZiBzdGF0ZSBwcm9wZXJ0aWVzIHRvIHVwZGF0ZSB3aXRoIG5ldyB2YWx1ZXNcbiAgKlx0QHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcdEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uY2UgY29tcG9uZW50IHN0YXRlIGlzIHVwZGF0ZWRcbiAgKi9cblx0c2V0U3RhdGU6IGZ1bmN0aW9uIHNldFN0YXRlKHN0YXRlLCBjYWxsYmFjaykge1xuXHRcdHZhciBzID0gdGhpcy5zdGF0ZTtcblx0XHRpZiAoIXRoaXMucHJldlN0YXRlKSB0aGlzLnByZXZTdGF0ZSA9IGV4dGVuZCh7fSwgcyk7XG5cdFx0ZXh0ZW5kKHMsIHR5cGVvZiBzdGF0ZSA9PT0gJ2Z1bmN0aW9uJyA/IHN0YXRlKHMsIHRoaXMucHJvcHMpIDogc3RhdGUpO1xuXHRcdGlmIChjYWxsYmFjaykgKHRoaXMuX3JlbmRlckNhbGxiYWNrcyA9IHRoaXMuX3JlbmRlckNhbGxiYWNrcyB8fCBbXSkucHVzaChjYWxsYmFjayk7XG5cdFx0ZW5xdWV1ZVJlbmRlcih0aGlzKTtcblx0fSxcblxuXG5cdC8qKiBJbW1lZGlhdGVseSBwZXJmb3JtIGEgc3luY2hyb25vdXMgcmUtcmVuZGVyIG9mIHRoZSBjb21wb25lbnQuXG4gICpcdEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHRcdEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFmdGVyIGNvbXBvbmVudCBpcyByZS1yZW5kZXJlZC5cbiAgKlx0QHByaXZhdGVcbiAgKi9cblx0Zm9yY2VVcGRhdGU6IGZ1bmN0aW9uIGZvcmNlVXBkYXRlKGNhbGxiYWNrKSB7XG5cdFx0aWYgKGNhbGxiYWNrKSAodGhpcy5fcmVuZGVyQ2FsbGJhY2tzID0gdGhpcy5fcmVuZGVyQ2FsbGJhY2tzIHx8IFtdKS5wdXNoKGNhbGxiYWNrKTtcblx0XHRyZW5kZXJDb21wb25lbnQodGhpcywgMik7XG5cdH0sXG5cblxuXHQvKiogQWNjZXB0cyBgcHJvcHNgIGFuZCBgc3RhdGVgLCBhbmQgcmV0dXJucyBhIG5ldyBWaXJ0dWFsIERPTSB0cmVlIHRvIGJ1aWxkLlxuICAqXHRWaXJ0dWFsIERPTSBpcyBnZW5lcmFsbHkgY29uc3RydWN0ZWQgdmlhIFtKU1hdKGh0dHA6Ly9qYXNvbmZvcm1hdC5jb20vd3RmLWlzLWpzeCkuXG4gICpcdEBwYXJhbSB7b2JqZWN0fSBwcm9wc1x0XHRQcm9wcyAoZWc6IEpTWCBhdHRyaWJ1dGVzKSByZWNlaXZlZCBmcm9tIHBhcmVudCBlbGVtZW50L2NvbXBvbmVudFxuICAqXHRAcGFyYW0ge29iamVjdH0gc3RhdGVcdFx0VGhlIGNvbXBvbmVudCdzIGN1cnJlbnQgc3RhdGVcbiAgKlx0QHBhcmFtIHtvYmplY3R9IGNvbnRleHRcdFx0Q29udGV4dCBvYmplY3QgKGlmIGEgcGFyZW50IGNvbXBvbmVudCBoYXMgcHJvdmlkZWQgY29udGV4dClcbiAgKlx0QHJldHVybnMgVk5vZGVcbiAgKi9cblx0cmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7fVxufSk7XG5cbi8qKiBSZW5kZXIgSlNYIGludG8gYSBgcGFyZW50YCBFbGVtZW50LlxuICpcdEBwYXJhbSB7Vk5vZGV9IHZub2RlXHRcdEEgKEpTWCkgVk5vZGUgdG8gcmVuZGVyXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBwYXJlbnRcdFx0RE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG9cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IFttZXJnZV1cdEF0dGVtcHQgdG8gcmUtdXNlIGFuIGV4aXN0aW5nIERPTSB0cmVlIHJvb3RlZCBhdCBgbWVyZ2VgXG4gKlx0QHB1YmxpY1xuICpcbiAqXHRAZXhhbXBsZVxuICpcdC8vIHJlbmRlciBhIGRpdiBpbnRvIDxib2R5PjpcbiAqXHRyZW5kZXIoPGRpdiBpZD1cImhlbGxvXCI+aGVsbG8hPC9kaXY+LCBkb2N1bWVudC5ib2R5KTtcbiAqXG4gKlx0QGV4YW1wbGVcbiAqXHQvLyByZW5kZXIgYSBcIlRoaW5nXCIgY29tcG9uZW50IGludG8gI2ZvbzpcbiAqXHRjb25zdCBUaGluZyA9ICh7IG5hbWUgfSkgPT4gPHNwYW4+eyBuYW1lIH08L3NwYW4+O1xuICpcdHJlbmRlcig8VGhpbmcgbmFtZT1cIm9uZVwiIC8+LCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9vJykpO1xuICovXG5mdW5jdGlvbiByZW5kZXIodm5vZGUsIHBhcmVudCwgbWVyZ2UpIHtcbiAgcmV0dXJuIGRpZmYobWVyZ2UsIHZub2RlLCB7fSwgZmFsc2UsIHBhcmVudCwgZmFsc2UpO1xufVxuXG52YXIgcHJlYWN0ID0ge1xuXHRoOiBoLFxuXHRjcmVhdGVFbGVtZW50OiBoLFxuXHRjbG9uZUVsZW1lbnQ6IGNsb25lRWxlbWVudCxcblx0Q29tcG9uZW50OiBDb21wb25lbnQsXG5cdHJlbmRlcjogcmVuZGVyLFxuXHRyZXJlbmRlcjogcmVyZW5kZXIsXG5cdG9wdGlvbnM6IG9wdGlvbnNcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHByZWFjdDtcbmV4cG9ydCB7IGgsIGggYXMgY3JlYXRlRWxlbWVudCwgY2xvbmVFbGVtZW50LCBDb21wb25lbnQsIHJlbmRlciwgcmVyZW5kZXIsIG9wdGlvbnMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByZWFjdC5lc20uanMubWFwXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5jb250ZW50ZnVsRXh0ZW5zaW9uOyIsIm1vZHVsZS5leHBvcnRzID0galF1ZXJ5OyIsImltcG9ydCAqIGFzICQgZnJvbSAnanF1ZXJ5J1xuaW1wb3J0IHtDb21wb25lbnQsIGgsIHJlbmRlcn0gZnJvbSAncHJlYWN0J1xuXG5leHBvcnQgaW50ZXJmYWNlIElQYWlyIHsga2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVxuXG5pbnRlcmZhY2UgSVByb3BzIHtcbiAgaXRlbXM/OiBJUGFpcltdXG4gIG9uSXRlbXNDaGFuZ2VkPzogKGV2dDogSVBhaXJbXSkgPT4gYW55XG59XG5cbmludGVyZmFjZSBJU3RhdGUge1xuICBrZXk/OiBzdHJpbmdcbiAgdmFsdWU/OiBzdHJpbmcsXG4gIGVycm9ycz86IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBjbGFzcyBLVlBGb3JtIGV4dGVuZHMgQ29tcG9uZW50PElQcm9wcywgSVN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLnNldEtleSA9IHRoaXMuc2V0S2V5LmJpbmQodGhpcylcbiAgICB0aGlzLnNldFZhbCA9IHRoaXMuc2V0VmFsLmJpbmQodGhpcylcbiAgICB0aGlzLmFkZFJvdyA9IHRoaXMuYWRkUm93LmJpbmQodGhpcylcbiAgICB0aGlzLmRlbGV0ZVJvdyA9IHRoaXMuZGVsZXRlUm93LmJpbmQodGhpcylcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgY29uc3Qge2l0ZW1zfSA9IHRoaXMucHJvcHNcblxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImt2cC1mb3JtXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwia3ZwLWZvcm1fX3RhYmxlXCI+XG4gICAgICAgICAgPHRhYmxlPlxuICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICB7aXRlbXMgJiYgaXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT5cbiAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2luZGV4fSBjbGFzc05hbWU9XCJrdnAtZm9ybV9fdGFibGVfX3Jvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dFwiPntpdGVtLmtleX08L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiZGl2aWRlclwiPnw8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidGV4dFwiPntpdGVtLnZhbHVlfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJidXR0b25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXZlcnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cIlwiIG9uQ2xpY2s9eygpID0+IHRoaXMubW92ZVVwKGluZGV4KX0+e2luZGV4ID4gMCA/ICfilrMnIDogJ1xcdTAwQTAnfTwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cIlwiIG9uQ2xpY2s9eygpID0+IHRoaXMubW92ZURvd24oaW5kZXgpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2luZGV4IDwgaXRlbXMubGVuZ3RoIC0gMSA/ICfilr0nIDogJ1xcdTAwQTAnfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY2YtYnRuLXNlY29uZGFyeSBkZWxldGVcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLmRlbGV0ZVJvdyhpdGVtKX0+WDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgPC90cj4sXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8dHIgY2xhc3NOYW1lPVwia3ZwLWZvcm1fX3RhYmxlX19yb3cgZm9ybVwiPlxuICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInRleHRcIj5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9XCJjZi1mb3JtLWlucHV0XCIgdHlwZT1cInRleHRcIiBpZD1cImtleVwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnNldEtleX0gdmFsdWU9e3RoaXMuc3RhdGUua2V5fT48L2lucHV0PlxuICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJkaXZpZGVyXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRpdmlkZXJcIj58PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ0ZXh0XCI+XG4gICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPVwiY2YtZm9ybS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ2YWx1ZVwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnNldFZhbH0gdmFsdWU9e3RoaXMuc3RhdGUudmFsdWV9PjwvaW5wdXQ+XG4gICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImJ1dHRvbnNcIj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiY2YtYnRuLXByaW1hcnlcIiB0eXBlPVwic3VibWl0XCIgaWQ9XCJhZGRcIiBvbkNsaWNrPXt0aGlzLmFkZFJvd30+KzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICA8L3RhYmxlPlxuXG4gICAgICAgICAge3RoaXMuc3RhdGUuZXJyb3JzICYmIHRoaXMuc3RhdGUuZXJyb3JzLm1hcCgoZSkgPT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlcnJvclwiPntlfTwvZGl2PixcbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICB9XG5cbiAgcHJpdmF0ZSBzZXRLZXkoZXZ0OiBFdmVudCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAga2V5OiAkKGV2dC50YXJnZXQpLnZhbCgpLnRvU3RyaW5nKCksXG4gICAgfSlcbiAgfVxuICBwcml2YXRlIHNldFZhbChldnQ6IEV2ZW50KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB2YWx1ZTogJChldnQudGFyZ2V0KS52YWwoKS50b1N0cmluZygpLFxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIGFkZFJvdygpIHtcbiAgICBjb25zdCBlcnJvcnMgPSBbXVxuICAgIGlmICghdGhpcy5zdGF0ZS5rZXkgfHwgdGhpcy5zdGF0ZS5rZXkubGVuZ3RoID09IDApIHtcbiAgICAgIGVycm9ycy5wdXNoKGBQbGVhc2Ugc2V0IGEga2V5YClcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN0YXRlLnZhbHVlIHx8IHRoaXMuc3RhdGUudmFsdWUubGVuZ3RoID09IDApIHtcbiAgICAgIGVycm9ycy5wdXNoKGBQbGVhc2Ugc2V0IGEgdmFsdWVgKVxuICAgIH1cbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PSAwICYmIHRoaXMucHJvcHMub25JdGVtc0NoYW5nZWQpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0geyBrZXk6IHRoaXMuc3RhdGUua2V5LCB2YWx1ZTogdGhpcy5zdGF0ZS52YWx1ZSB9XG4gICAgICBjb25zdCBpdGVtcyA9IHRoaXMucHJvcHMuaXRlbXMgfHwgW11cblxuICAgICAgdGhpcy5wcm9wcy5vbkl0ZW1zQ2hhbmdlZChbLi4uaXRlbXMsIHZhbHVlXSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBrZXk6ICcnLFxuICAgICAgICB2YWx1ZTogJycsXG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGVycm9ycyxcbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSBkZWxldGVSb3coaXRlbTogSVBhaXIpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGtleTogaXRlbS5rZXksXG4gICAgICB2YWx1ZTogaXRlbS52YWx1ZSxcbiAgICB9KVxuXG4gICAgaWYgKCF0aGlzLnByb3BzLm9uSXRlbXNDaGFuZ2VkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBpdGVtcyA9IHRoaXMucHJvcHMuaXRlbXMgfHwgW11cbiAgICBpZiAoaXRlbXMubGVuZ3RoID09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBpID0gaXRlbXMuZmluZEluZGV4KChwKSA9PiBwLmtleSA9PSBpdGVtLmtleSAmJiBwLnZhbHVlID09IGl0ZW0udmFsdWUpXG5cbiAgICBpZiAoaSA8IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHZhbHVlID0gaXRlbXMuc2xpY2UoMCwgaSlcbiAgICB2YWx1ZS5wdXNoKC4uLml0ZW1zLnNsaWNlKGkgKyAxKSlcbiAgICB0aGlzLnByb3BzLm9uSXRlbXNDaGFuZ2VkKHZhbHVlKVxuICB9XG5cbiAgcHJpdmF0ZSBtb3ZlVXAoaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5wcm9wcy5pdGVtcyB8fCBbXVxuICAgIGlmIChpdGVtcy5sZW5ndGggPiAwICYmIGluZGV4ID4gMCAmJiB0aGlzLnByb3BzLm9uSXRlbXNDaGFuZ2VkKSB7XG4gICAgICBjb25zdCBpdGVtID0gaXRlbXMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgaXRlbXMuc3BsaWNlKGluZGV4IC0gMSwgMCwgLi4uaXRlbSlcbiAgICAgIHRoaXMucHJvcHMub25JdGVtc0NoYW5nZWQoaXRlbXMpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtb3ZlRG93bihpbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLnByb3BzLml0ZW1zIHx8IFtdXG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDAgJiYgaW5kZXggPCBpdGVtcy5sZW5ndGggLSAxICYmIHRoaXMucHJvcHMub25JdGVtc0NoYW5nZWQpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtcy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICBpdGVtcy5zcGxpY2UoaW5kZXggKyAxLCAwLCAuLi5pdGVtKVxuICAgICAgdGhpcy5wcm9wcy5vbkl0ZW1zQ2hhbmdlZChpdGVtcylcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIGNvbnRlbnRmdWxFeHRlbnNpb24gZnJvbSAnY29udGVudGZ1bC11aS1leHRlbnNpb25zLXNkaydcbmltcG9ydCB7SUNvbnRlbnRmdWxFeHRlbnNpb25TZGt9IGZyb20gJ2NvbnRlbnRmdWwtdWktZXh0ZW5zaW9ucy1zZGsnXG5pbXBvcnQge0NvbXBvbmVudCwgaCwgcmVuZGVyfSBmcm9tICdwcmVhY3QnXG5pbXBvcnQgeyBJUGFpciwgS1ZQRm9ybSB9IGZyb20gJy4va3ZwLWZvcm0nXG5cbmRlY2xhcmUgZnVuY3Rpb24gcmVxdWlyZShtb2R1bGU6IHN0cmluZyk6IGFueVxuY29uc3Qgc3R5bGVzID0gcmVxdWlyZSgnLi9zdHlsZS5zY3NzJylcblxuaWYgKGNvbnRlbnRmdWxFeHRlbnNpb24pIHtcbiAgY29udGVudGZ1bEV4dGVuc2lvbi5pbml0KChleHRlbnNpb24pID0+IHtcbiAgICByZW5kZXIoPEt2cEVkaXRvciB7Li4uZXh0ZW5zaW9ufSAvPixcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWFjdC1yb290JykpXG4gICAgZXh0ZW5zaW9uLndpbmRvdy5zdGFydEF1dG9SZXNpemVyKClcbiAgfSlcbn1cblxuaW50ZXJmYWNlIElBcHBTdGF0ZSB7XG4gIGZpZWxkVmFsdWU/OiBLdnBMaXN0LFxuICB3YWl0aW5nPzogYm9vbGVhblxufVxuXG50eXBlIEt2cExpc3QgPSBBcnJheTx7IGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nfT5cblxuZXhwb3J0IGNsYXNzIEt2cEVkaXRvciBleHRlbmRzIENvbXBvbmVudDxJQ29udGVudGZ1bEV4dGVuc2lvblNkaywgSUFwcFN0YXRlPiB7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMub25JdGVtc0NoYW5nZWQgPSB0aGlzLm9uSXRlbXNDaGFuZ2VkLmJpbmQodGhpcylcbiAgfVxuXG4gIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCBzZGsgPSB0aGlzLnByb3BzXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBmaWVsZFZhbHVlOiAoc2RrLmZpZWxkLmdldFZhbHVlKCkgfHwgW10pLmZpbHRlcigoaTogYW55KSA9PiBpKSxcbiAgICB9KVxuXG4gICAgc2RrLmZpZWxkLm9uVmFsdWVDaGFuZ2VkKChuZXdWYWx1ZSkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGZpZWxkVmFsdWU6IChuZXdWYWx1ZSB8fCBbXSkuZmlsdGVyKChpOiBhbnkpID0+IGkpLFxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGZpZWxkVmFsdWUsIHdhaXRpbmcgfSA9IHRoaXMuc3RhdGVcblxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17d2FpdGluZyA/ICdkaXNhYmxlZCcgOiAnJ30+XG4gICAgICA8S1ZQRm9ybVxuICAgICAgICBpdGVtcz17ZmllbGRWYWx1ZX1cbiAgICAgICAgb25JdGVtc0NoYW5nZWQ9e3RoaXMub25JdGVtc0NoYW5nZWR9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBvbkl0ZW1zQ2hhbmdlZChuZXdJdGVtczogSVBhaXJbXSkge1xuICAgIGNvbnN0IHNkayA9IHRoaXMucHJvcHNcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgd2FpdGluZzogdHJ1ZSxcbiAgICB9KVxuXG4gICAgYXdhaXQgc2RrLmZpZWxkLnNldFZhbHVlKG5ld0l0ZW1zKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZmllbGRWYWx1ZTogbmV3SXRlbXMsXG4gICAgICB3YWl0aW5nOiBmYWxzZSxcbiAgICB9KVxuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9</script></body>
</html>