<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="https://contentful.github.io/ui-extensions-sdk/cf-extension.css">
    <script src="https://contentful.github.io/ui-extensions-sdk/cf-extension-api.js"></script>
    <script
			  src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
    <style>
       #wm-logo {
        width: 16px;
        position: absolute;
        right: 0;
        top: 0;
       }
    </style>
    <title>kvp-editor@0.2.0</title>
  <style type="text/css">.kvp-form__form {
  width: 50%;
  display: inline-block;
  vertical-align: top; }
  .kvp-form__form button {
    margin-left: 4%;
    max-width: 12%; }

.kvp-form__table {
  width: 50%;
  display: inline-block;
  vertical-align: top; }
  .kvp-form__table table {
    width: 100%; }
  .kvp-form__table__row .buttons {
    float: right;
    display: flex; }
    .kvp-form__table__row .buttons .flex-vert {
      display: flex;
      flex-direction: column;
      padding-right: 4px; }
  .kvp-form__table__row td.text {
    border-bottom: 1px solid #dee2e6;
    margin: 0px 8px; }
    .kvp-form__table__row td.text:first-child {
      text-transform: uppercase;
      text-align: right; }
  .kvp-form__table .divider {
    text-align: center;
    color: #dee2e6; }

.kvp-form .cf-form-input {
  width: 40%;
  display: inline-block;
  padding: 2px; }

.kvp-form .error {
  color: red; }

.disabled .kvp-form {
  cursor: wait !important; }
  .disabled .kvp-form a, .disabled .kvp-form input, .disabled .kvp-form button {
    cursor: wait !important;
    color: gray !important; }


/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMva3ZwLWVkaXRvci9zdHlsZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsbUJBQW1COztBQUVuQjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUI7O0FBRW5CO0FBQ0E7QUFDQTtBQUNBLGVBQWU7O0FBRWY7QUFDQSxhQUFhOztBQUViO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSwyQkFBMkIiLCJmaWxlIjoiZGlzdC9rdnAtZWRpdG9yL3N0eWxlLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5rdnAtZm9ybV9fZm9ybSB7XG4gIHdpZHRoOiA1MCU7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDsgfVxuICAua3ZwLWZvcm1fX2Zvcm0gYnV0dG9uIHtcbiAgICBtYXJnaW4tbGVmdDogNCU7XG4gICAgbWF4LXdpZHRoOiAxMiU7IH1cblxuLmt2cC1mb3JtX190YWJsZSB7XG4gIHdpZHRoOiA1MCU7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IHRvcDsgfVxuICAua3ZwLWZvcm1fX3RhYmxlIHRhYmxlIHtcbiAgICB3aWR0aDogMTAwJTsgfVxuICAua3ZwLWZvcm1fX3RhYmxlX19yb3cgLmJ1dHRvbnMge1xuICAgIGZsb2F0OiByaWdodDtcbiAgICBkaXNwbGF5OiBmbGV4OyB9XG4gICAgLmt2cC1mb3JtX190YWJsZV9fcm93IC5idXR0b25zIC5mbGV4LXZlcnQge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBwYWRkaW5nLXJpZ2h0OiA0cHg7IH1cbiAgLmt2cC1mb3JtX190YWJsZV9fcm93IHRkLnRleHQge1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGVlMmU2O1xuICAgIG1hcmdpbjogMHB4IDhweDsgfVxuICAgIC5rdnAtZm9ybV9fdGFibGVfX3JvdyB0ZC50ZXh0OmZpcnN0LWNoaWxkIHtcbiAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICB0ZXh0LWFsaWduOiByaWdodDsgfVxuICAua3ZwLWZvcm1fX3RhYmxlIC5kaXZpZGVyIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY29sb3I6ICNkZWUyZTY7IH1cblxuLmt2cC1mb3JtIC5jZi1mb3JtLWlucHV0IHtcbiAgd2lkdGg6IDQwJTtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBwYWRkaW5nOiAycHg7IH1cblxuLmt2cC1mb3JtIC5lcnJvciB7XG4gIGNvbG9yOiByZWQ7IH1cblxuLmRpc2FibGVkIC5rdnAtZm9ybSB7XG4gIGN1cnNvcjogd2FpdCAhaW1wb3J0YW50OyB9XG4gIC5kaXNhYmxlZCAua3ZwLWZvcm0gYSwgLmRpc2FibGVkIC5rdnAtZm9ybSBpbnB1dCwgLmRpc2FibGVkIC5rdnAtZm9ybSBidXR0b24ge1xuICAgIGN1cnNvcjogd2FpdCAhaW1wb3J0YW50O1xuICAgIGNvbG9yOiBncmF5ICFpbXBvcnRhbnQ7IH1cbiJdLCJzb3VyY2VSb290IjoiIn0=*/</style></head>
  <body>
    <div id="wm-logo" title="kvp-editor@0.2.0"><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 119.2 119.2"><path fill="#009dba" d="M84.9 0H34.4A34.4 34.4 0 0 0 0 34.4v50.5a34.46 34.46 0 0 0 34.4 34.4h50.5a34.46 34.46 0 0 0 34.4-34.4V34.4A34.53 34.53 0 0 0 84.9 0zM34.4 9.5h50.5a24.8 24.8 0 0 1 24.8 24.8v18.2c-9.3 7.8-18.8 8.9-28.9 7.5l5.3-20a4.75 4.75 0 0 0-9.2-2.4s-2.7 10-5.5 20.6c-.7-.2-1.3-.3-2-.5l-5-20a4.72 4.72 0 0 0-4.6-3.6 4.72 4.72 0 0 0-4.6 3.6s-1.7 6.9-3.8 15.3c-1.7-.4-3.4-.7-5.1-1-2.2-8-4-14.4-4-14.4a4.78 4.78 0 0 0-9.2 2.6l3 10.7H34a53.57 53.57 0 0 0-24.4 5.8V34.4A24.82 24.82 0 0 1 34.4 9.5zm50.5 100.2H34.4A24.8 24.8 0 0 1 9.6 84.9v-17A41.77 41.77 0 0 1 34 60.4c1.6 0 3.2.1 4.8.2l6 21.6a4.82 4.82 0 0 0 9.3-.1s2-8.1 4.4-17.4l2.1.6 1.2.3c2.2 8.9 4.1 16.5 4.1 16.5a4.72 4.72 0 0 0 4.6 3.6 4.63 4.63 0 0 0 4.6-3.5l3.4-12.7c10.4 1.6 20.9 1.1 31.3-5.1V85a25 25 0 0 1-24.9 24.7z"/></svg></img></div>
    
    <div id="react-root"></div>
  <script type="text/javascript">!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";n.r(t),n.d(t,"h",function(){return a}),n.d(t,"createElement",function(){return a}),n.d(t,"cloneElement",function(){return u}),n.d(t,"Component",function(){return j}),n.d(t,"render",function(){return R}),n.d(t,"rerender",function(){return d}),n.d(t,"options",function(){return o});var o={},r=[],i=[];function a(e,t){var n,a,s,l,u=i;for(l=arguments.length;l-- >2;)r.push(arguments[l]);for(t&&null!=t.children&&(r.length||r.push(t.children),delete t.children);r.length;)if((a=r.pop())&&void 0!==a.pop)for(l=a.length;l--;)r.push(a[l]);else"boolean"==typeof a&&(a=null),(s="function"!=typeof e)&&(null==a?a="":"number"==typeof a?a=String(a):"string"!=typeof a&&(s=!1)),s&&n?u[u.length-1]+=a:u===i?u=[a]:u.push(a),n=s;var c=new function(){};return c.nodeName=e,c.children=u,c.attributes=null==t?void 0:t,c.key=null==t?void 0:t.key,void 0!==o.vnode&&o.vnode(c),c}function s(e,t){for(var n in t)e[n]=t[n];return e}var l="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function u(e,t){return a(e.nodeName,s(s({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var c=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function f(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&(o.debounceRendering||l)(d)}function d(){var e,t=p;for(p=[];e=t.pop();)e._dirty&&M(e)}function h(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function v(e){var t=s({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function m(e){var t=e.parentNode;t&&t.removeChild(e)}function _(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var i in n)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"==typeof o[i]&&!1===c.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,y,a):e.removeEventListener(t,y,a),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var s=r&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function y(e){return this._listeners[e.type](o.event&&o.event(e)||e)}var b=[],g=0,C=!1,w=!1;function x(){for(var e;e=b.pop();)o.afterMount&&o.afterMount(e),e.componentDidMount&&e.componentDidMount()}function k(e,t,n,o,r,i){g++||(C=null!=r&&void 0!==r.ownerSVGElement,w=null!=e&&!("__preactattr_"in e));var a=N(e,t,n,o,i);return r&&a.parentNode!==r&&r.appendChild(a),--g||(w=!1,i||x()),a}function N(e,t,n,o,r){var i=e,a=C;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),S(e,!0))),i.__preactattr_=!0,i;var s,l,u=t.nodeName;if("function"==typeof u)return function(e,t,n,o){var r=e&&e._component,i=r,a=e,s=r&&e._componentConstructor===t.nodeName,l=s,u=v(t);for(;r&&!l&&(r=r._parentComponent);)l=r.constructor===t.nodeName;r&&l&&(!o||r._component)?(U(r,u,3,n,o),e=r.base):(i&&!s&&(E(i),e=a=null),r=I(t.nodeName,u,n),e&&!r.nextBase&&(r.nextBase=e,a=null),U(r,u,1,n,o),e=r.base,a&&e!==a&&(a._component=null,S(a,!1)));return e}(e,t,n,o);if(C="svg"===u||"foreignObject"!==u&&C,u=String(u),(!e||!h(e,u))&&(s=u,(l=C?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,i=l,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),S(e,!0)}var c=i.firstChild,p=i.__preactattr_,f=t.children;if(null==p){p=i.__preactattr_={};for(var d=i.attributes,y=d.length;y--;)p[d[y].name]=d[y].value}return!w&&f&&1===f.length&&"string"==typeof f[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=f[0]&&(c.nodeValue=f[0]):(f&&f.length||null!=c)&&function(e,t,n,o,r){var i,a,s,l,u,c=e.childNodes,p=[],f={},d=0,v=0,_=c.length,y=0,b=t?t.length:0;if(0!==_)for(var g=0;g<_;g++){var C=c[g],w=C.__preactattr_,x=b&&w?C._component?C._component.__key:w.key:null;null!=x?(d++,f[x]=C):(w||(void 0!==C.splitText?!r||C.nodeValue.trim():r))&&(p[y++]=C)}if(0!==b)for(var g=0;g<b;g++){l=t[g],u=null;var x=l.key;if(null!=x)d&&void 0!==f[x]&&(u=f[x],f[x]=void 0,d--);else if(!u&&v<y)for(i=v;i<y;i++)if(void 0!==p[i]&&(k=a=p[i],V=r,"string"==typeof(P=l)||"number"==typeof P?void 0!==k.splitText:"string"==typeof P.nodeName?!k._componentConstructor&&h(k,P.nodeName):V||k._componentConstructor===P.nodeName)){u=a,p[i]=void 0,i===y-1&&y--,i===v&&v++;break}u=N(u,l,n,o),s=c[g],u&&u!==e&&u!==s&&(null==s?e.appendChild(u):u===s.nextSibling?m(s):e.insertBefore(u,s))}var k,P,V;if(d)for(var g in f)void 0!==f[g]&&S(f[g],!1);for(;v<=y;)void 0!==(u=p[y--])&&S(u,!1)}(i,f,n,o,w||null!=p.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||_(e,o,n[o],n[o]=void 0,C);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||_(e,o,n[o],n[o]=t[o],C)}(i,t.attributes,p),C=a,i}function S(e,t){var n=e._component;n?E(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||m(e),P(e))}function P(e){for(e=e.lastChild;e;){var t=e.previousSibling;S(e,!0),e=t}}var V={};function I(e,t,n){var o,r=V[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),j.call(o,t,n)):((o=new j(t,n)).constructor=e,o.render=O),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.nextBase=r[i].nextBase,r.splice(i,1);break}return o}function O(e,t,n){return this.constructor(e,n)}function U(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===o.syncComponentUpdates&&e.base?f(e):M(e,1,i)),e.__ref&&e.__ref(e))}function M(e,t,n,r){if(!e._disable){var i,a,l,u=e.props,c=e.state,p=e.context,f=e.prevProps||u,d=e.prevState||c,h=e.prevContext||p,m=e.base,_=e.nextBase,y=m||_,C=e._component,w=!1;if(m&&(e.props=f,e.state=d,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,c,p)?w=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,p),e.props=u,e.state=c,e.context=p),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!w){i=e.render(u,c,p),e.getChildContext&&(p=s(s({},p),e.getChildContext()));var N,P,V=i&&i.nodeName;if("function"==typeof V){var O=v(i);(a=C)&&a.constructor===V&&O.key==a.__key?U(a,O,1,p,!1):(N=a,e._component=a=I(V,O,p),a.nextBase=a.nextBase||_,a._parentComponent=e,U(a,O,0,p,!1),M(a,1,n,!0)),P=a.base}else l=y,(N=C)&&(l=e._component=null),(y||1===t)&&(l&&(l._component=null),P=k(l,i,p,n||!m,y&&y.parentNode,!0));if(y&&P!==y&&a!==C){var j=y.parentNode;j&&P!==j&&(j.replaceChild(P,y),N||(y._component=null,S(y,!1)))}if(N&&E(N),e.base=P,P&&!r){for(var R=e,T=e;T=T._parentComponent;)(R=T).base=P;P._component=R,P._componentConstructor=R.constructor}}if(!m||n?b.unshift(e):w||(e.componentDidUpdate&&e.componentDidUpdate(f,d,h),o.afterUpdate&&o.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);g||r||x()}}function E(e){o.beforeUnmount&&o.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?E(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,m(t),function(e){var t=e.constructor.name;(V[t]||(V[t]=[])).push(e)}(e),P(t)),e.__ref&&e.__ref(null)}function j(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function R(e,t,n){return k(n,e,{},!1,t,!1)}s(j.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=s({},n)),s(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),f(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),M(this,2)},render:function(){}});var T={h:a,createElement:a,cloneElement:u,Component:j,render:R,rerender:d,options:o};t.default=T},,function(e,t,n){},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var i=n(3),a=n(0),s=function(e){function t(){var t=e.call(this)||this;return t.setKey=t.setKey.bind(t),t.setVal=t.setVal.bind(t),t.addRow=t.addRow.bind(t),t.deleteRow=t.deleteRow.bind(t),t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props.items;return a.h("div",{className:"kvp-form"},a.h("div",{className:"kvp-form__form"},a.h("form",null,a.h("input",{className:"cf-form-input",type:"text",id:"key",onChange:this.setKey,value:this.state.key}),a.h("span",{class:"divider"},"|"),a.h("input",{className:"cf-form-input",type:"text",id:"value",onChange:this.setVal,value:this.state.value}),a.h("button",{className:"cf-btn-primary",type:"submit",id:"add",onClick:this.addRow},"+"),this.state.errors&&this.state.errors.map(function(e){return a.h("div",{class:"error"},e)}))),a.h("div",{className:"kvp-form__table"},a.h("table",null,a.h("tbody",null,t&&t.map(function(n,o){return a.h("tr",{key:o,className:"kvp-form__table__row"},a.h("td",{className:"text"},n.key),a.h("td",{class:"divider"},"|"),a.h("td",{className:"text"},n.value),a.h("td",{className:"buttons"},a.h("div",{className:"flex-vert"},a.h("a",{className:"",onClick:function(){return e.moveUp(o)}},o>0?"△":" "),a.h("a",{className:"",onClick:function(){return e.moveDown(o)}},o<t.length-1?"▽":" ")),a.h("button",{className:"cf-btn-secondary delete",onClick:function(){return e.deleteRow(n)}},"X")))})))))},t.prototype.setKey=function(e){this.setState({key:i(e.target).val().toString()})},t.prototype.setVal=function(e){this.setState({value:i(e.target).val().toString()})},t.prototype.addRow=function(){var e=[];if(this.state.key&&0!=this.state.key.length||e.push("Please set a key"),this.state.value&&0!=this.state.value.length||e.push("Please set a value"),0==e.length&&this.props.onItemsChanged){var t={key:this.state.key,value:this.state.value},n=this.props.items||[];this.props.onItemsChanged([t].concat(n)),this.setState({key:"",value:""})}this.setState({errors:e})},t.prototype.deleteRow=function(e){if(this.setState({key:e.key,value:e.value}),this.props.onItemsChanged){var t=this.props.items||[];if(0!=t.length){var n=t.findIndex(function(t){return t.key==e.key&&t.value==e.value});if(!(n<0)){var o=t.slice(0,n);o.push.apply(o,t.slice(n+1)),this.props.onItemsChanged(o)}}}},t.prototype.moveUp=function(e){var t=this.props.items||[];if(t.length>0&&e>0&&this.props.onItemsChanged){var n=t.splice(e,1);t.splice.apply(t,[e-1,0].concat(n)),this.props.onItemsChanged(t)}},t.prototype.moveDown=function(e){var t=this.props.items||[];if(t.length>0&&e<t.length-1&&this.props.onItemsChanged){var n=t.splice(e,1);t.splice.apply(t,[e+1,0].concat(n)),this.props.onItemsChanged(t)}},t}(a.Component);t.KVPForm=s},function(e,t){e.exports=window.contentfulExtension},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};t.__esModule=!0;var l=n(5),u=n(0),c=n(4);n(2);l&&l.init(function(e){u.render(u.h(p,i({},e)),document.getElementById("react-root")),e.window.startAutoResizer()});var p=function(e){function t(){var t=e.call(this)||this;return t.onItemsChanged=t.onItemsChanged.bind(t),t}return r(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props;this.setState({fieldValue:(t.field.getValue()||[]).filter(function(e){return e})}),t.field.onValueChanged(function(t){e.setState({fieldValue:(t||[]).filter(function(e){return e})})})},t.prototype.render=function(){var e=this.state,t=e.fieldValue,n=e.waiting;return u.h("div",{className:n?"disabled":""},u.h(c.KVPForm,{items:t,onItemsChanged:this.onItemsChanged}))},t.prototype.onItemsChanged=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return t=this.props,this.setState({waiting:!0}),[4,t.field.setValue(e)];case 1:return n.sent(),this.setState({fieldValue:e,waiting:!1}),[2]}})})},t}(u.Component);t.KvpEditor=p}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3ByZWFjdC9kaXN0L3ByZWFjdC5lc20uanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwialF1ZXJ5XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2t2cC1lZGl0b3Iva3ZwLWZvcm0udHN4Iiwid2VicGFjazovLy9leHRlcm5hbCBcIndpbmRvdy5jb250ZW50ZnVsRXh0ZW5zaW9uXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2t2cC1lZGl0b3IvaW5kZXgudHN4Il0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwib3B0aW9ucyIsInN0YWNrIiwiRU1QVFlfQ0hJTERSRU4iLCJoIiwibm9kZU5hbWUiLCJhdHRyaWJ1dGVzIiwibGFzdFNpbXBsZSIsImNoaWxkIiwic2ltcGxlIiwiY2hpbGRyZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwdXNoIiwicG9wIiwidW5kZWZpbmVkIiwiU3RyaW5nIiwia2V5Iiwidm5vZGUiLCJleHRlbmQiLCJvYmoiLCJwcm9wcyIsImRlZmVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiYmluZCIsInNldFRpbWVvdXQiLCJjbG9uZUVsZW1lbnQiLCJzbGljZSIsIklTX05PTl9ESU1FTlNJT05BTCIsIml0ZW1zIiwiZW5xdWV1ZVJlbmRlciIsImNvbXBvbmVudCIsIl9kaXJ0eSIsImRlYm91bmNlUmVuZGVyaW5nIiwicmVyZW5kZXIiLCJsaXN0IiwicmVuZGVyQ29tcG9uZW50IiwiaXNOYW1lZE5vZGUiLCJub2RlIiwibm9ybWFsaXplZE5vZGVOYW1lIiwidG9Mb3dlckNhc2UiLCJnZXROb2RlUHJvcHMiLCJkZWZhdWx0UHJvcHMiLCJyZW1vdmVOb2RlIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwic2V0QWNjZXNzb3IiLCJvbGQiLCJpc1N2ZyIsInN0eWxlIiwiY3NzVGV4dCIsInRlc3QiLCJpbm5lckhUTUwiLCJfX2h0bWwiLCJ1c2VDYXB0dXJlIiwicmVwbGFjZSIsInN1YnN0cmluZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudFByb3h5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9saXN0ZW5lcnMiLCJlIiwic2V0UHJvcGVydHkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJucyIsInJlbW92ZUF0dHJpYnV0ZU5TIiwic2V0QXR0cmlidXRlTlMiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc05hbWUiLCJ0aGlzIiwidHlwZSIsImV2ZW50IiwibW91bnRzIiwiZGlmZkxldmVsIiwiaXNTdmdNb2RlIiwiaHlkcmF0aW5nIiwiZmx1c2hNb3VudHMiLCJhZnRlck1vdW50IiwiY29tcG9uZW50RGlkTW91bnQiLCJkaWZmIiwiZG9tIiwiY29udGV4dCIsIm1vdW50QWxsIiwicGFyZW50IiwiY29tcG9uZW50Um9vdCIsIm93bmVyU1ZHRWxlbWVudCIsInJldCIsImlkaWZmIiwiYXBwZW5kQ2hpbGQiLCJvdXQiLCJwcmV2U3ZnTW9kZSIsInNwbGl0VGV4dCIsIl9jb21wb25lbnQiLCJub2RlVmFsdWUiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwicmVwbGFjZUNoaWxkIiwicmVjb2xsZWN0Tm9kZVRyZWUiLCJ2bm9kZU5hbWUiLCJvcmlnaW5hbENvbXBvbmVudCIsIm9sZERvbSIsImlzRGlyZWN0T3duZXIiLCJfY29tcG9uZW50Q29uc3RydWN0b3IiLCJpc093bmVyIiwiX3BhcmVudENvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwic2V0Q29tcG9uZW50UHJvcHMiLCJiYXNlIiwidW5tb3VudENvbXBvbmVudCIsImNyZWF0ZUNvbXBvbmVudCIsIm5leHRCYXNlIiwiYnVpbGRDb21wb25lbnRGcm9tVk5vZGUiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdGVFbGVtZW50IiwiZmlyc3RDaGlsZCIsImZjIiwidmNoaWxkcmVuIiwiYSIsIm5leHRTaWJsaW5nIiwiaXNIeWRyYXRpbmciLCJqIiwiZiIsInZjaGlsZCIsIm9yaWdpbmFsQ2hpbGRyZW4iLCJjaGlsZE5vZGVzIiwia2V5ZWQiLCJrZXllZExlbiIsIm1pbiIsImxlbiIsImNoaWxkcmVuTGVuIiwidmxlbiIsIl9jaGlsZCIsIl9fa2V5IiwidHJpbSIsImluc2VydEJlZm9yZSIsImlubmVyRGlmZk5vZGUiLCJkYW5nZXJvdXNseVNldElubmVySFRNTCIsImF0dHJzIiwiZGlmZkF0dHJpYnV0ZXMiLCJ1bm1vdW50T25seSIsInJlZiIsInJlbW92ZUNoaWxkcmVuIiwibGFzdENoaWxkIiwibmV4dCIsInByZXZpb3VzU2libGluZyIsImNvbXBvbmVudHMiLCJDdG9yIiwiaW5zdCIsInJlbmRlciIsIkNvbXBvbmVudCIsImRvUmVuZGVyIiwic3BsaWNlIiwic3RhdGUiLCJvcHRzIiwiX2Rpc2FibGUiLCJfX3JlZiIsImNvbXBvbmVudFdpbGxNb3VudCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJwcmV2Q29udGV4dCIsInByZXZQcm9wcyIsInN5bmNDb21wb25lbnRVcGRhdGVzIiwiaXNDaGlsZCIsInJlbmRlcmVkIiwiY2Jhc2UiLCJwcmV2aW91c1Byb3BzIiwicHJldmlvdXNTdGF0ZSIsInByZXZTdGF0ZSIsInByZXZpb3VzQ29udGV4dCIsImlzVXBkYXRlIiwiaW5pdGlhbEJhc2UiLCJpbml0aWFsQ2hpbGRDb21wb25lbnQiLCJza2lwIiwic2hvdWxkQ29tcG9uZW50VXBkYXRlIiwiY29tcG9uZW50V2lsbFVwZGF0ZSIsImdldENoaWxkQ29udGV4dCIsInRvVW5tb3VudCIsImNoaWxkQ29tcG9uZW50IiwiY2hpbGRQcm9wcyIsImJhc2VQYXJlbnQiLCJjb21wb25lbnRSZWYiLCJ0IiwidW5zaGlmdCIsImNvbXBvbmVudERpZFVwZGF0ZSIsImFmdGVyVXBkYXRlIiwiX3JlbmRlckNhbGxiYWNrcyIsImJlZm9yZVVubW91bnQiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImlubmVyIiwiY29sbGVjdENvbXBvbmVudCIsIm1lcmdlIiwic2V0U3RhdGUiLCJjYWxsYmFjayIsImZvcmNlVXBkYXRlIiwicHJlYWN0IiwialF1ZXJ5IiwiJCIsInByZWFjdF8xIiwiS1ZQRm9ybSIsIl9zdXBlciIsIl90aGlzIiwic2V0S2V5Iiwic2V0VmFsIiwiYWRkUm93IiwiZGVsZXRlUm93IiwiX19leHRlbmRzIiwiaWQiLCJvbkNoYW5nZSIsImNsYXNzIiwib25DbGljayIsImVycm9ycyIsIm1hcCIsIml0ZW0iLCJpbmRleCIsIm1vdmVVcCIsIm1vdmVEb3duIiwiZXZ0IiwidGFyZ2V0IiwidmFsIiwidG9TdHJpbmciLCJvbkl0ZW1zQ2hhbmdlZCIsImNvbmNhdCIsImZpbmRJbmRleCIsImFwcGx5Iiwid2luZG93IiwiY29udGVudGZ1bEV4dGVuc2lvbiIsImt2cF9mb3JtXzEiLCJpbml0IiwiZXh0ZW5zaW9uIiwiS3ZwRWRpdG9yIiwiX19hc3NpZ24iLCJnZXRFbGVtZW50QnlJZCIsInN0YXJ0QXV0b1Jlc2l6ZXIiLCJzZGsiLCJmaWVsZFZhbHVlIiwiZmllbGQiLCJnZXRWYWx1ZSIsImZpbHRlciIsIm9uVmFsdWVDaGFuZ2VkIiwibmV3VmFsdWUiLCJfYSIsIndhaXRpbmciLCJuZXdJdGVtcyIsInNldFZhbHVlIiwic2VudCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixF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QUExSyxLQUFBbUYsTUFBRWlGLEVBQUFNLEVBQUFOLFdBQVlPLEVBQUFELEVBQUFDLFFBRXBCLE9BQU81QyxFQUFBbE0sRUFBQSxPQUFLa0UsVUFBVzRLLEVBQVUsV0FBYSxJQUM1QzVDLEVBQUFsTSxFQUFDK04sRUFBQTVCLFNBQ0N4SyxNQUFPNE0sRUFDUGQsZUFBZ0J0SixLQUFLc0osbUJBS2JTLEVBQUExTyxVQUFBaU8sZUFBZCxTQUE2QnNCLGlHQU8zQixPQU5NVCxFQUFNbkssS0FBS2xELE1BRWpCa0QsS0FBS3lILFVBQ0hrRCxTQUFTLEtBR1gsRUFBTVIsRUFBSUUsTUFBTVEsU0FBU0Qsa0JBQXpCRixFQUFBSSxPQUNBOUssS0FBS3lILFVBQ0gyQyxXQUFZUSxFQUNaRCxTQUFTLGNBR2ZaLEVBNUNBLENBQStCaEMsRUFBQS9DLFdBQWxCbEwsRUFBQWlRIiwiZmlsZSI6ImRpc3Qva3ZwLWVkaXRvci9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG4iLCIvKiogVmlydHVhbCBET00gTm9kZSAqL1xuZnVuY3Rpb24gVk5vZGUoKSB7fVxuXG4vKiogR2xvYmFsIG9wdGlvbnNcbiAqXHRAcHVibGljXG4gKlx0QG5hbWVzcGFjZSBvcHRpb25zIHtPYmplY3R9XG4gKi9cbnZhciBvcHRpb25zID0ge1xuXG5cdC8qKiBJZiBgdHJ1ZWAsIGBwcm9wYCBjaGFuZ2VzIHRyaWdnZXIgc3luY2hyb25vdXMgY29tcG9uZW50IHVwZGF0ZXMuXG4gICpcdEBuYW1lIHN5bmNDb21wb25lbnRVcGRhdGVzXG4gICpcdEB0eXBlIEJvb2xlYW5cbiAgKlx0QGRlZmF1bHQgdHJ1ZVxuICAqL1xuXHQvL3N5bmNDb21wb25lbnRVcGRhdGVzOiB0cnVlLFxuXG5cdC8qKiBQcm9jZXNzZXMgYWxsIGNyZWF0ZWQgVk5vZGVzLlxuICAqXHRAcGFyYW0ge1ZOb2RlfSB2bm9kZVx0QSBuZXdseS1jcmVhdGVkIFZOb2RlIHRvIG5vcm1hbGl6ZS9wcm9jZXNzXG4gICovXG5cdC8vdm5vZGUodm5vZGUpIHsgfVxuXG5cdC8qKiBIb29rIGludm9rZWQgYWZ0ZXIgYSBjb21wb25lbnQgaXMgbW91bnRlZC4gKi9cblx0Ly8gYWZ0ZXJNb3VudChjb21wb25lbnQpIHsgfVxuXG5cdC8qKiBIb29rIGludm9rZWQgYWZ0ZXIgdGhlIERPTSBpcyB1cGRhdGVkIHdpdGggYSBjb21wb25lbnQncyBsYXRlc3QgcmVuZGVyLiAqL1xuXHQvLyBhZnRlclVwZGF0ZShjb21wb25lbnQpIHsgfVxuXG5cdC8qKiBIb29rIGludm9rZWQgaW1tZWRpYXRlbHkgYmVmb3JlIGEgY29tcG9uZW50IGlzIHVubW91bnRlZC4gKi9cblx0Ly8gYmVmb3JlVW5tb3VudChjb21wb25lbnQpIHsgfVxufTtcblxudmFyIHN0YWNrID0gW107XG5cbnZhciBFTVBUWV9DSElMRFJFTiA9IFtdO1xuXG4vKipcbiAqIEpTWC9oeXBlcnNjcmlwdCByZXZpdmVyLlxuICogQHNlZSBodHRwOi8vamFzb25mb3JtYXQuY29tL3d0Zi1pcy1qc3hcbiAqIEJlbmNobWFya3M6IGh0dHBzOi8vZXNiZW5jaC5jb20vYmVuY2gvNTdlZThmOGUzMzBhYjA5OTAwYTFhMWEwXG4gKlxuICogTm90ZTogdGhpcyBpcyBleHBvcnRlZCBhcyBib3RoIGBoKClgIGFuZCBgY3JlYXRlRWxlbWVudCgpYCBmb3IgY29tcGF0aWJpbGl0eSByZWFzb25zLlxuICpcbiAqIENyZWF0ZXMgYSBWTm9kZSAodmlydHVhbCBET00gZWxlbWVudCkuIEEgdHJlZSBvZiBWTm9kZXMgY2FuIGJlIHVzZWQgYXMgYSBsaWdodHdlaWdodCByZXByZXNlbnRhdGlvblxuICogb2YgdGhlIHN0cnVjdHVyZSBvZiBhIERPTSB0cmVlLiBUaGlzIHN0cnVjdHVyZSBjYW4gYmUgcmVhbGl6ZWQgYnkgcmVjdXJzaXZlbHkgY29tcGFyaW5nIGl0IGFnYWluc3RcbiAqIHRoZSBjdXJyZW50IF9hY3R1YWxfIERPTSBzdHJ1Y3R1cmUsIGFuZCBhcHBseWluZyBvbmx5IHRoZSBkaWZmZXJlbmNlcy5cbiAqXG4gKiBgaCgpYC9gY3JlYXRlRWxlbWVudCgpYCBhY2NlcHRzIGFuIGVsZW1lbnQgbmFtZSwgYSBsaXN0IG9mIGF0dHJpYnV0ZXMvcHJvcHMsXG4gKiBhbmQgb3B0aW9uYWxseSBjaGlsZHJlbiB0byBhcHBlbmQgdG8gdGhlIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGUgVGhlIGZvbGxvd2luZyBET00gdHJlZVxuICpcbiAqIGA8ZGl2IGlkPVwiZm9vXCIgbmFtZT1cImJhclwiPkhlbGxvITwvZGl2PmBcbiAqXG4gKiBjYW4gYmUgY29uc3RydWN0ZWQgdXNpbmcgdGhpcyBmdW5jdGlvbiBhczpcbiAqXG4gKiBgaCgnZGl2JywgeyBpZDogJ2ZvbycsIG5hbWUgOiAnYmFyJyB9LCAnSGVsbG8hJyk7YFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBub2RlTmFtZVx0QW4gZWxlbWVudCBuYW1lLiBFeDogYGRpdmAsIGBhYCwgYHNwYW5gLCBldGMuXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlc1x0QW55IGF0dHJpYnV0ZXMvcHJvcHMgdG8gc2V0IG9uIHRoZSBjcmVhdGVkIGVsZW1lbnQuXG4gKiBAcGFyYW0gcmVzdFx0XHRcdEFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSB0YWtlbiB0byBiZSBjaGlsZHJlbiB0byBhcHBlbmQuIENhbiBiZSBpbmZpbml0ZWx5IG5lc3RlZCBBcnJheXMuXG4gKlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBoKG5vZGVOYW1lLCBhdHRyaWJ1dGVzKSB7XG5cdHZhciBjaGlsZHJlbiA9IEVNUFRZX0NISUxEUkVOLFxuXHQgICAgbGFzdFNpbXBsZSxcblx0ICAgIGNoaWxkLFxuXHQgICAgc2ltcGxlLFxuXHQgICAgaTtcblx0Zm9yIChpID0gYXJndW1lbnRzLmxlbmd0aDsgaS0tID4gMjspIHtcblx0XHRzdGFjay5wdXNoKGFyZ3VtZW50c1tpXSk7XG5cdH1cblx0aWYgKGF0dHJpYnV0ZXMgJiYgYXR0cmlidXRlcy5jaGlsZHJlbiAhPSBudWxsKSB7XG5cdFx0aWYgKCFzdGFjay5sZW5ndGgpIHN0YWNrLnB1c2goYXR0cmlidXRlcy5jaGlsZHJlbik7XG5cdFx0ZGVsZXRlIGF0dHJpYnV0ZXMuY2hpbGRyZW47XG5cdH1cblx0d2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuXHRcdGlmICgoY2hpbGQgPSBzdGFjay5wb3AoKSkgJiYgY2hpbGQucG9wICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGZvciAoaSA9IGNoaWxkLmxlbmd0aDsgaS0tOykge1xuXHRcdFx0XHRzdGFjay5wdXNoKGNoaWxkW2ldKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKHR5cGVvZiBjaGlsZCA9PT0gJ2Jvb2xlYW4nKSBjaGlsZCA9IG51bGw7XG5cblx0XHRcdGlmIChzaW1wbGUgPSB0eXBlb2Ygbm9kZU5hbWUgIT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0aWYgKGNoaWxkID09IG51bGwpIGNoaWxkID0gJyc7ZWxzZSBpZiAodHlwZW9mIGNoaWxkID09PSAnbnVtYmVyJykgY2hpbGQgPSBTdHJpbmcoY2hpbGQpO2Vsc2UgaWYgKHR5cGVvZiBjaGlsZCAhPT0gJ3N0cmluZycpIHNpbXBsZSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc2ltcGxlICYmIGxhc3RTaW1wbGUpIHtcblx0XHRcdFx0Y2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0gKz0gY2hpbGQ7XG5cdFx0XHR9IGVsc2UgaWYgKGNoaWxkcmVuID09PSBFTVBUWV9DSElMRFJFTikge1xuXHRcdFx0XHRjaGlsZHJlbiA9IFtjaGlsZF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjaGlsZHJlbi5wdXNoKGNoaWxkKTtcblx0XHRcdH1cblxuXHRcdFx0bGFzdFNpbXBsZSA9IHNpbXBsZTtcblx0XHR9XG5cdH1cblxuXHR2YXIgcCA9IG5ldyBWTm9kZSgpO1xuXHRwLm5vZGVOYW1lID0gbm9kZU5hbWU7XG5cdHAuY2hpbGRyZW4gPSBjaGlsZHJlbjtcblx0cC5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcyA9PSBudWxsID8gdW5kZWZpbmVkIDogYXR0cmlidXRlcztcblx0cC5rZXkgPSBhdHRyaWJ1dGVzID09IG51bGwgPyB1bmRlZmluZWQgOiBhdHRyaWJ1dGVzLmtleTtcblxuXHQvLyBpZiBhIFwidm5vZGUgaG9va1wiIGlzIGRlZmluZWQsIHBhc3MgZXZlcnkgY3JlYXRlZCBWTm9kZSB0byBpdFxuXHRpZiAob3B0aW9ucy52bm9kZSAhPT0gdW5kZWZpbmVkKSBvcHRpb25zLnZub2RlKHApO1xuXG5cdHJldHVybiBwO1xufVxuXG4vKipcbiAqICBDb3B5IGFsbCBwcm9wZXJ0aWVzIGZyb20gYHByb3BzYCBvbnRvIGBvYmpgLlxuICogIEBwYXJhbSB7T2JqZWN0fSBvYmpcdFx0T2JqZWN0IG9udG8gd2hpY2ggcHJvcGVydGllcyBzaG91bGQgYmUgY29waWVkLlxuICogIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1x0T2JqZWN0IGZyb20gd2hpY2ggdG8gY29weSBwcm9wZXJ0aWVzLlxuICogIEByZXR1cm5zIG9ialxuICogIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChvYmosIHByb3BzKSB7XG4gIGZvciAodmFyIGkgaW4gcHJvcHMpIHtcbiAgICBvYmpbaV0gPSBwcm9wc1tpXTtcbiAgfXJldHVybiBvYmo7XG59XG5cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIGFzeW5jaHJvbm91c2x5LCBhcyBzb29uIGFzIHBvc3NpYmxlLiBNYWtlc1xuICogdXNlIG9mIEhUTUwgUHJvbWlzZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgaWYgYXZhaWxhYmxlLFxuICogb3RoZXJ3aXNlIGZhbGxpbmcgYmFjayB0byBgc2V0VGltZW91dGAgKG1haW5seSBmb3IgSUU8MTEpLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKi9cbnZhciBkZWZlciA9IHR5cGVvZiBQcm9taXNlID09ICdmdW5jdGlvbicgPyBQcm9taXNlLnJlc29sdmUoKS50aGVuLmJpbmQoUHJvbWlzZS5yZXNvbHZlKCkpIDogc2V0VGltZW91dDtcblxuLyoqXG4gKiBDbG9uZXMgdGhlIGdpdmVuIFZOb2RlLCBvcHRpb25hbGx5IGFkZGluZyBhdHRyaWJ1dGVzL3Byb3BzIGFuZCByZXBsYWNpbmcgaXRzIGNoaWxkcmVuLlxuICogQHBhcmFtIHtWTm9kZX0gdm5vZGVcdFx0VGhlIHZpcnR1YWwgRE9NIGVsZW1lbnQgdG8gY2xvbmVcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1x0QXR0cmlidXRlcy9wcm9wcyB0byBhZGQgd2hlbiBjbG9uaW5nXG4gKiBAcGFyYW0ge1ZOb2RlfSByZXN0XHRcdEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyB3aWxsIGJlIHVzZWQgYXMgcmVwbGFjZW1lbnQgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIGNsb25lRWxlbWVudCh2bm9kZSwgcHJvcHMpIHtcbiAgcmV0dXJuIGgodm5vZGUubm9kZU5hbWUsIGV4dGVuZChleHRlbmQoe30sIHZub2RlLmF0dHJpYnV0ZXMpLCBwcm9wcyksIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpIDogdm5vZGUuY2hpbGRyZW4pO1xufVxuXG4vLyBET00gcHJvcGVydGllcyB0aGF0IHNob3VsZCBOT1QgaGF2ZSBcInB4XCIgYWRkZWQgd2hlbiBudW1lcmljXG52YXIgSVNfTk9OX0RJTUVOU0lPTkFMID0gL2FjaXR8ZXgoPzpzfGd8bnxwfCQpfHJwaHxvd3N8bW5jfG50d3xpbmVbY2hdfHpvb3xeb3JkL2k7XG5cbi8qKiBNYW5hZ2VkIHF1ZXVlIG9mIGRpcnR5IGNvbXBvbmVudHMgdG8gYmUgcmUtcmVuZGVyZWQgKi9cblxudmFyIGl0ZW1zID0gW107XG5cbmZ1bmN0aW9uIGVucXVldWVSZW5kZXIoY29tcG9uZW50KSB7XG5cdGlmICghY29tcG9uZW50Ll9kaXJ0eSAmJiAoY29tcG9uZW50Ll9kaXJ0eSA9IHRydWUpICYmIGl0ZW1zLnB1c2goY29tcG9uZW50KSA9PSAxKSB7XG5cdFx0KG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmcgfHwgZGVmZXIpKHJlcmVuZGVyKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZXJlbmRlcigpIHtcblx0dmFyIHAsXG5cdCAgICBsaXN0ID0gaXRlbXM7XG5cdGl0ZW1zID0gW107XG5cdHdoaWxlIChwID0gbGlzdC5wb3AoKSkge1xuXHRcdGlmIChwLl9kaXJ0eSkgcmVuZGVyQ29tcG9uZW50KHApO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIG5vZGVzIGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVx0XHRcdERPTSBOb2RlIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSB7Vk5vZGV9IHZub2RlXHRcdFx0VmlydHVhbCBET00gbm9kZSB0byBjb21wYXJlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtoeWRyYXRpbmc9ZmFsc2VdXHRJZiB0cnVlLCBpZ25vcmVzIGNvbXBvbmVudCBjb25zdHJ1Y3RvcnMgd2hlbiBjb21wYXJpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc1NhbWVOb2RlVHlwZShub2RlLCB2bm9kZSwgaHlkcmF0aW5nKSB7XG4gIGlmICh0eXBlb2Ygdm5vZGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2bm9kZSA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gbm9kZS5zcGxpdFRleHQgIT09IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodHlwZW9mIHZub2RlLm5vZGVOYW1lID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiAhbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgJiYgaXNOYW1lZE5vZGUobm9kZSwgdm5vZGUubm9kZU5hbWUpO1xuICB9XG4gIHJldHVybiBoeWRyYXRpbmcgfHwgbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIEVsZW1lbnQgaGFzIGEgZ2l2ZW4gbm9kZU5hbWUsIGNhc2UtaW5zZW5zaXRpdmVseS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcdEEgRE9NIEVsZW1lbnQgdG8gaW5zcGVjdCB0aGUgbmFtZSBvZi5cbiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVx0VW5ub3JtYWxpemVkIG5hbWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICovXG5mdW5jdGlvbiBpc05hbWVkTm9kZShub2RlLCBub2RlTmFtZSkge1xuICByZXR1cm4gbm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgPT09IG5vZGVOYW1lIHx8IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBSZWNvbnN0cnVjdCBDb21wb25lbnQtc3R5bGUgYHByb3BzYCBmcm9tIGEgVk5vZGUuXG4gKiBFbnN1cmVzIGRlZmF1bHQvZmFsbGJhY2sgdmFsdWVzIGZyb20gYGRlZmF1bHRQcm9wc2A6XG4gKiBPd24tcHJvcGVydGllcyBvZiBgZGVmYXVsdFByb3BzYCBub3QgcHJlc2VudCBpbiBgdm5vZGUuYXR0cmlidXRlc2AgYXJlIGFkZGVkLlxuICpcbiAqIEBwYXJhbSB7Vk5vZGV9IHZub2RlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBwcm9wc1xuICovXG5mdW5jdGlvbiBnZXROb2RlUHJvcHModm5vZGUpIHtcbiAgdmFyIHByb3BzID0gZXh0ZW5kKHt9LCB2bm9kZS5hdHRyaWJ1dGVzKTtcbiAgcHJvcHMuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcblxuICB2YXIgZGVmYXVsdFByb3BzID0gdm5vZGUubm9kZU5hbWUuZGVmYXVsdFByb3BzO1xuICBpZiAoZGVmYXVsdFByb3BzICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKHZhciBpIGluIGRlZmF1bHRQcm9wcykge1xuICAgICAgaWYgKHByb3BzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvcHNbaV0gPSBkZWZhdWx0UHJvcHNbaV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHByb3BzO1xufVxuXG4vKiogQ3JlYXRlIGFuIGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gbm9kZU5hbWUuXG4gKlx0QHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lXG4gKlx0QHBhcmFtIHtCb29sZWFufSBbaXNTdmc9ZmFsc2VdXHRJZiBgdHJ1ZWAsIGNyZWF0ZXMgYW4gZWxlbWVudCB3aXRoaW4gdGhlIFNWRyBuYW1lc3BhY2UuXG4gKlx0QHJldHVybnMge0VsZW1lbnR9IG5vZGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmcpIHtcblx0dmFyIG5vZGUgPSBpc1N2ZyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBub2RlTmFtZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTtcblx0bm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgPSBub2RlTmFtZTtcblx0cmV0dXJuIG5vZGU7XG59XG5cbi8qKiBSZW1vdmUgYSBjaGlsZCBub2RlIGZyb20gaXRzIHBhcmVudCBpZiBhdHRhY2hlZC5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IG5vZGVcdFx0VGhlIG5vZGUgdG8gcmVtb3ZlXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuXHR2YXIgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0aWYgKHBhcmVudE5vZGUpIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG59XG5cbi8qKiBTZXQgYSBuYW1lZCBhdHRyaWJ1dGUgb24gdGhlIGdpdmVuIE5vZGUsIHdpdGggc3BlY2lhbCBiZWhhdmlvciBmb3Igc29tZSBuYW1lcyBhbmQgZXZlbnQgaGFuZGxlcnMuXG4gKlx0SWYgYHZhbHVlYCBpcyBgbnVsbGAsIHRoZSBhdHRyaWJ1dGUvaGFuZGxlciB3aWxsIGJlIHJlbW92ZWQuXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBub2RlXHRBbiBlbGVtZW50IHRvIG11dGF0ZVxuICpcdEBwYXJhbSB7c3RyaW5nfSBuYW1lXHRUaGUgbmFtZS9rZXkgdG8gc2V0LCBzdWNoIGFzIGFuIGV2ZW50IG9yIGF0dHJpYnV0ZSBuYW1lXG4gKlx0QHBhcmFtIHthbnl9IG9sZFx0VGhlIGxhc3QgdmFsdWUgdGhhdCB3YXMgc2V0IGZvciB0aGlzIG5hbWUvbm9kZSBwYWlyXG4gKlx0QHBhcmFtIHthbnl9IHZhbHVlXHRBbiBhdHRyaWJ1dGUgdmFsdWUsIHN1Y2ggYXMgYSBmdW5jdGlvbiB0byBiZSB1c2VkIGFzIGFuIGV2ZW50IGhhbmRsZXJcbiAqXHRAcGFyYW0ge0Jvb2xlYW59IGlzU3ZnXHRBcmUgd2UgY3VycmVudGx5IGRpZmZpbmcgaW5zaWRlIGFuIHN2Zz9cbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzZXRBY2Nlc3Nvcihub2RlLCBuYW1lLCBvbGQsIHZhbHVlLCBpc1N2Zykge1xuXHRpZiAobmFtZSA9PT0gJ2NsYXNzTmFtZScpIG5hbWUgPSAnY2xhc3MnO1xuXG5cdGlmIChuYW1lID09PSAna2V5Jykge1xuXHRcdC8vIGlnbm9yZVxuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICdyZWYnKSB7XG5cdFx0aWYgKG9sZCkgb2xkKG51bGwpO1xuXHRcdGlmICh2YWx1ZSkgdmFsdWUobm9kZSk7XG5cdH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhaXNTdmcpIHtcblx0XHRub2RlLmNsYXNzTmFtZSA9IHZhbHVlIHx8ICcnO1xuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICdzdHlsZScpIHtcblx0XHRpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIG9sZCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdG5vZGUuc3R5bGUuY3NzVGV4dCA9IHZhbHVlIHx8ICcnO1xuXHRcdH1cblx0XHRpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0aWYgKHR5cGVvZiBvbGQgIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdGZvciAodmFyIGkgaW4gb2xkKSB7XG5cdFx0XHRcdFx0aWYgKCEoaSBpbiB2YWx1ZSkpIG5vZGUuc3R5bGVbaV0gPSAnJztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Zm9yICh2YXIgaSBpbiB2YWx1ZSkge1xuXHRcdFx0XHRub2RlLnN0eWxlW2ldID0gdHlwZW9mIHZhbHVlW2ldID09PSAnbnVtYmVyJyAmJiBJU19OT05fRElNRU5TSU9OQUwudGVzdChpKSA9PT0gZmFsc2UgPyB2YWx1ZVtpXSArICdweCcgOiB2YWx1ZVtpXTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSBpZiAobmFtZSA9PT0gJ2Rhbmdlcm91c2x5U2V0SW5uZXJIVE1MJykge1xuXHRcdGlmICh2YWx1ZSkgbm9kZS5pbm5lckhUTUwgPSB2YWx1ZS5fX2h0bWwgfHwgJyc7XG5cdH0gZWxzZSBpZiAobmFtZVswXSA9PSAnbycgJiYgbmFtZVsxXSA9PSAnbicpIHtcblx0XHR2YXIgdXNlQ2FwdHVyZSA9IG5hbWUgIT09IChuYW1lID0gbmFtZS5yZXBsYWNlKC9DYXB0dXJlJC8sICcnKSk7XG5cdFx0bmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMik7XG5cdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRpZiAoIW9sZCkgbm9kZS5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50UHJveHksIHVzZUNhcHR1cmUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSwgdXNlQ2FwdHVyZSk7XG5cdFx0fVxuXHRcdChub2RlLl9saXN0ZW5lcnMgfHwgKG5vZGUuX2xpc3RlbmVycyA9IHt9KSlbbmFtZV0gPSB2YWx1ZTtcblx0fSBlbHNlIGlmIChuYW1lICE9PSAnbGlzdCcgJiYgbmFtZSAhPT0gJ3R5cGUnICYmICFpc1N2ZyAmJiBuYW1lIGluIG5vZGUpIHtcblx0XHRzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZSk7XG5cdFx0aWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09IGZhbHNlKSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgbnMgPSBpc1N2ZyAmJiBuYW1lICE9PSAobmFtZSA9IG5hbWUucmVwbGFjZSgvXnhsaW5rOj8vLCAnJykpO1xuXHRcdGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlID09PSBmYWxzZSkge1xuXHRcdFx0aWYgKG5zKSBub2RlLnJlbW92ZUF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgbmFtZS50b0xvd2VyQ2FzZSgpKTtlbHNlIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRpZiAobnMpIG5vZGUuc2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBuYW1lLnRvTG93ZXJDYXNlKCksIHZhbHVlKTtlbHNlIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcblx0XHR9XG5cdH1cbn1cblxuLyoqIEF0dGVtcHQgdG8gc2V0IGEgRE9NIHByb3BlcnR5IHRvIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXHRJRSAmIEZGIHRocm93IGZvciBjZXJ0YWluIHByb3BlcnR5LXZhbHVlIGNvbWJpbmF0aW9ucy5cbiAqL1xuZnVuY3Rpb24gc2V0UHJvcGVydHkobm9kZSwgbmFtZSwgdmFsdWUpIHtcblx0dHJ5IHtcblx0XHRub2RlW25hbWVdID0gdmFsdWU7XG5cdH0gY2F0Y2ggKGUpIHt9XG59XG5cbi8qKiBQcm94eSBhbiBldmVudCB0byBob29rZWQgZXZlbnQgaGFuZGxlcnNcbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBldmVudFByb3h5KGUpIHtcblx0cmV0dXJuIHRoaXMuX2xpc3RlbmVyc1tlLnR5cGVdKG9wdGlvbnMuZXZlbnQgJiYgb3B0aW9ucy5ldmVudChlKSB8fCBlKTtcbn1cblxuLyoqIFF1ZXVlIG9mIGNvbXBvbmVudHMgdGhhdCBoYXZlIGJlZW4gbW91bnRlZCBhbmQgYXJlIGF3YWl0aW5nIGNvbXBvbmVudERpZE1vdW50ICovXG52YXIgbW91bnRzID0gW107XG5cbi8qKiBEaWZmIHJlY3Vyc2lvbiBjb3VudCwgdXNlZCB0byB0cmFjayB0aGUgZW5kIG9mIHRoZSBkaWZmIGN5Y2xlLiAqL1xudmFyIGRpZmZMZXZlbCA9IDA7XG5cbi8qKiBHbG9iYWwgZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBkaWZmIGlzIGN1cnJlbnRseSB3aXRoaW4gYW4gU1ZHICovXG52YXIgaXNTdmdNb2RlID0gZmFsc2U7XG5cbi8qKiBHbG9iYWwgZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBkaWZmIGlzIHBlcmZvcm1pbmcgaHlkcmF0aW9uICovXG52YXIgaHlkcmF0aW5nID0gZmFsc2U7XG5cbi8qKiBJbnZva2UgcXVldWVkIGNvbXBvbmVudERpZE1vdW50IGxpZmVjeWNsZSBtZXRob2RzICovXG5mdW5jdGlvbiBmbHVzaE1vdW50cygpIHtcblx0dmFyIGM7XG5cdHdoaWxlIChjID0gbW91bnRzLnBvcCgpKSB7XG5cdFx0aWYgKG9wdGlvbnMuYWZ0ZXJNb3VudCkgb3B0aW9ucy5hZnRlck1vdW50KGMpO1xuXHRcdGlmIChjLmNvbXBvbmVudERpZE1vdW50KSBjLmNvbXBvbmVudERpZE1vdW50KCk7XG5cdH1cbn1cblxuLyoqIEFwcGx5IGRpZmZlcmVuY2VzIGluIGEgZ2l2ZW4gdm5vZGUgKGFuZCBpdCdzIGRlZXAgY2hpbGRyZW4pIHRvIGEgcmVhbCBET00gTm9kZS5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IFtkb209bnVsbF1cdFx0QSBET00gbm9kZSB0byBtdXRhdGUgaW50byB0aGUgc2hhcGUgb2YgdGhlIGB2bm9kZWBcbiAqXHRAcGFyYW0ge1ZOb2RlfSB2bm9kZVx0XHRcdEEgVk5vZGUgKHdpdGggZGVzY2VuZGFudHMgZm9ybWluZyBhIHRyZWUpIHJlcHJlc2VudGluZyB0aGUgZGVzaXJlZCBET00gc3RydWN0dXJlXG4gKlx0QHJldHVybnMge0VsZW1lbnR9IGRvbVx0XHRcdFRoZSBjcmVhdGVkL211dGF0ZWQgZWxlbWVudFxuICpcdEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIHBhcmVudCwgY29tcG9uZW50Um9vdCkge1xuXHQvLyBkaWZmTGV2ZWwgaGF2aW5nIGJlZW4gMCBoZXJlIGluZGljYXRlcyBpbml0aWFsIGVudHJ5IGludG8gdGhlIGRpZmYgKG5vdCBhIHN1YmRpZmYpXG5cdGlmICghZGlmZkxldmVsKyspIHtcblx0XHQvLyB3aGVuIGZpcnN0IHN0YXJ0aW5nIHRoZSBkaWZmLCBjaGVjayBpZiB3ZSdyZSBkaWZmaW5nIGFuIFNWRyBvciB3aXRoaW4gYW4gU1ZHXG5cdFx0aXNTdmdNb2RlID0gcGFyZW50ICE9IG51bGwgJiYgcGFyZW50Lm93bmVyU1ZHRWxlbWVudCAhPT0gdW5kZWZpbmVkO1xuXG5cdFx0Ly8gaHlkcmF0aW9uIGlzIGluZGljYXRlZCBieSB0aGUgZXhpc3RpbmcgZWxlbWVudCB0byBiZSBkaWZmZWQgbm90IGhhdmluZyBhIHByb3AgY2FjaGVcblx0XHRoeWRyYXRpbmcgPSBkb20gIT0gbnVsbCAmJiAhKCdfX3ByZWFjdGF0dHJfJyBpbiBkb20pO1xuXHR9XG5cblx0dmFyIHJldCA9IGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBjb21wb25lbnRSb290KTtcblxuXHQvLyBhcHBlbmQgdGhlIGVsZW1lbnQgaWYgaXRzIGEgbmV3IHBhcmVudFxuXHRpZiAocGFyZW50ICYmIHJldC5wYXJlbnROb2RlICE9PSBwYXJlbnQpIHBhcmVudC5hcHBlbmRDaGlsZChyZXQpO1xuXG5cdC8vIGRpZmZMZXZlbCBiZWluZyByZWR1Y2VkIHRvIDAgbWVhbnMgd2UncmUgZXhpdGluZyB0aGUgZGlmZlxuXHRpZiAoISAtLWRpZmZMZXZlbCkge1xuXHRcdGh5ZHJhdGluZyA9IGZhbHNlO1xuXHRcdC8vIGludm9rZSBxdWV1ZWQgY29tcG9uZW50RGlkTW91bnQgbGlmZWN5Y2xlIG1ldGhvZHNcblx0XHRpZiAoIWNvbXBvbmVudFJvb3QpIGZsdXNoTW91bnRzKCk7XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufVxuXG4vKiogSW50ZXJuYWxzIG9mIGBkaWZmKClgLCBzZXBhcmF0ZWQgdG8gYWxsb3cgYnlwYXNzaW5nIGRpZmZMZXZlbCAvIG1vdW50IGZsdXNoaW5nLiAqL1xuZnVuY3Rpb24gaWRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIGNvbXBvbmVudFJvb3QpIHtcblx0dmFyIG91dCA9IGRvbSxcblx0ICAgIHByZXZTdmdNb2RlID0gaXNTdmdNb2RlO1xuXG5cdC8vIGVtcHR5IHZhbHVlcyAobnVsbCwgdW5kZWZpbmVkLCBib29sZWFucykgcmVuZGVyIGFzIGVtcHR5IFRleHQgbm9kZXNcblx0aWYgKHZub2RlID09IG51bGwgfHwgdHlwZW9mIHZub2RlID09PSAnYm9vbGVhbicpIHZub2RlID0gJyc7XG5cblx0Ly8gRmFzdCBjYXNlOiBTdHJpbmdzICYgTnVtYmVycyBjcmVhdGUvdXBkYXRlIFRleHQgbm9kZXMuXG5cdGlmICh0eXBlb2Ygdm5vZGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2bm9kZSA9PT0gJ251bWJlcicpIHtcblxuXHRcdC8vIHVwZGF0ZSBpZiBpdCdzIGFscmVhZHkgYSBUZXh0IG5vZGU6XG5cdFx0aWYgKGRvbSAmJiBkb20uc3BsaXRUZXh0ICE9PSB1bmRlZmluZWQgJiYgZG9tLnBhcmVudE5vZGUgJiYgKCFkb20uX2NvbXBvbmVudCB8fCBjb21wb25lbnRSb290KSkge1xuXHRcdFx0LyogaXN0YW5idWwgaWdub3JlIGlmICovIC8qIEJyb3dzZXIgcXVpcmsgdGhhdCBjYW4ndCBiZSBjb3ZlcmVkOiBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L3ByZWFjdC9jb21taXQvZmQ0ZjIxZjVjNDVkZmQ3NTE1MWJkMjdiNGMyMTdkODAwM2FhNWViOSAqL1xuXHRcdFx0aWYgKGRvbS5ub2RlVmFsdWUgIT0gdm5vZGUpIHtcblx0XHRcdFx0ZG9tLm5vZGVWYWx1ZSA9IHZub2RlO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBpdCB3YXNuJ3QgYSBUZXh0IG5vZGU6IHJlcGxhY2UgaXQgd2l0aCBvbmUgYW5kIHJlY3ljbGUgdGhlIG9sZCBFbGVtZW50XG5cdFx0XHRvdXQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2bm9kZSk7XG5cdFx0XHRpZiAoZG9tKSB7XG5cdFx0XHRcdGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTtcblx0XHRcdFx0cmVjb2xsZWN0Tm9kZVRyZWUoZG9tLCB0cnVlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRvdXRbJ19fcHJlYWN0YXR0cl8nXSA9IHRydWU7XG5cblx0XHRyZXR1cm4gb3V0O1xuXHR9XG5cblx0Ly8gSWYgdGhlIFZOb2RlIHJlcHJlc2VudHMgYSBDb21wb25lbnQsIHBlcmZvcm0gYSBjb21wb25lbnQgZGlmZjpcblx0dmFyIHZub2RlTmFtZSA9IHZub2RlLm5vZGVOYW1lO1xuXHRpZiAodHlwZW9mIHZub2RlTmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHJldHVybiBidWlsZENvbXBvbmVudEZyb21WTm9kZShkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdH1cblxuXHQvLyBUcmFja3MgZW50ZXJpbmcgYW5kIGV4aXRpbmcgU1ZHIG5hbWVzcGFjZSB3aGVuIGRlc2NlbmRpbmcgdGhyb3VnaCB0aGUgdHJlZS5cblx0aXNTdmdNb2RlID0gdm5vZGVOYW1lID09PSAnc3ZnJyA/IHRydWUgOiB2bm9kZU5hbWUgPT09ICdmb3JlaWduT2JqZWN0JyA/IGZhbHNlIDogaXNTdmdNb2RlO1xuXG5cdC8vIElmIHRoZXJlJ3Mgbm8gZXhpc3RpbmcgZWxlbWVudCBvciBpdCdzIHRoZSB3cm9uZyB0eXBlLCBjcmVhdGUgYSBuZXcgb25lOlxuXHR2bm9kZU5hbWUgPSBTdHJpbmcodm5vZGVOYW1lKTtcblx0aWYgKCFkb20gfHwgIWlzTmFtZWROb2RlKGRvbSwgdm5vZGVOYW1lKSkge1xuXHRcdG91dCA9IGNyZWF0ZU5vZGUodm5vZGVOYW1lLCBpc1N2Z01vZGUpO1xuXG5cdFx0aWYgKGRvbSkge1xuXHRcdFx0Ly8gbW92ZSBjaGlsZHJlbiBpbnRvIHRoZSByZXBsYWNlbWVudCBub2RlXG5cdFx0XHR3aGlsZSAoZG9tLmZpcnN0Q2hpbGQpIHtcblx0XHRcdFx0b3V0LmFwcGVuZENoaWxkKGRvbS5maXJzdENoaWxkKTtcblx0XHRcdH0gLy8gaWYgdGhlIHByZXZpb3VzIEVsZW1lbnQgd2FzIG1vdW50ZWQgaW50byB0aGUgRE9NLCByZXBsYWNlIGl0IGlubGluZVxuXHRcdFx0aWYgKGRvbS5wYXJlbnROb2RlKSBkb20ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQob3V0LCBkb20pO1xuXG5cdFx0XHQvLyByZWN5Y2xlIHRoZSBvbGQgZWxlbWVudCAoc2tpcHMgbm9uLUVsZW1lbnQgbm9kZSB0eXBlcylcblx0XHRcdHJlY29sbGVjdE5vZGVUcmVlKGRvbSwgdHJ1ZSk7XG5cdFx0fVxuXHR9XG5cblx0dmFyIGZjID0gb3V0LmZpcnN0Q2hpbGQsXG5cdCAgICBwcm9wcyA9IG91dFsnX19wcmVhY3RhdHRyXyddLFxuXHQgICAgdmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG5cblx0aWYgKHByb3BzID09IG51bGwpIHtcblx0XHRwcm9wcyA9IG91dFsnX19wcmVhY3RhdHRyXyddID0ge307XG5cdFx0Zm9yICh2YXIgYSA9IG91dC5hdHRyaWJ1dGVzLCBpID0gYS5sZW5ndGg7IGktLTspIHtcblx0XHRcdHByb3BzW2FbaV0ubmFtZV0gPSBhW2ldLnZhbHVlO1xuXHRcdH1cblx0fVxuXG5cdC8vIE9wdGltaXphdGlvbjogZmFzdC1wYXRoIGZvciBlbGVtZW50cyBjb250YWluaW5nIGEgc2luZ2xlIFRleHROb2RlOlxuXHRpZiAoIWh5ZHJhdGluZyAmJiB2Y2hpbGRyZW4gJiYgdmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgdmNoaWxkcmVuWzBdID09PSAnc3RyaW5nJyAmJiBmYyAhPSBudWxsICYmIGZjLnNwbGl0VGV4dCAhPT0gdW5kZWZpbmVkICYmIGZjLm5leHRTaWJsaW5nID09IG51bGwpIHtcblx0XHRpZiAoZmMubm9kZVZhbHVlICE9IHZjaGlsZHJlblswXSkge1xuXHRcdFx0ZmMubm9kZVZhbHVlID0gdmNoaWxkcmVuWzBdO1xuXHRcdH1cblx0fVxuXHQvLyBvdGhlcndpc2UsIGlmIHRoZXJlIGFyZSBleGlzdGluZyBvciBuZXcgY2hpbGRyZW4sIGRpZmYgdGhlbTpcblx0ZWxzZSBpZiAodmNoaWxkcmVuICYmIHZjaGlsZHJlbi5sZW5ndGggfHwgZmMgIT0gbnVsbCkge1xuXHRcdFx0aW5uZXJEaWZmTm9kZShvdXQsIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwsIGh5ZHJhdGluZyB8fCBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCAhPSBudWxsKTtcblx0XHR9XG5cblx0Ly8gQXBwbHkgYXR0cmlidXRlcy9wcm9wcyBmcm9tIFZOb2RlIHRvIHRoZSBET00gRWxlbWVudDpcblx0ZGlmZkF0dHJpYnV0ZXMob3V0LCB2bm9kZS5hdHRyaWJ1dGVzLCBwcm9wcyk7XG5cblx0Ly8gcmVzdG9yZSBwcmV2aW91cyBTVkcgbW9kZTogKGluIGNhc2Ugd2UncmUgZXhpdGluZyBhbiBTVkcgbmFtZXNwYWNlKVxuXHRpc1N2Z01vZGUgPSBwcmV2U3ZnTW9kZTtcblxuXHRyZXR1cm4gb3V0O1xufVxuXG4vKiogQXBwbHkgY2hpbGQgYW5kIGF0dHJpYnV0ZSBjaGFuZ2VzIGJldHdlZW4gYSBWTm9kZSBhbmQgYSBET00gTm9kZSB0byB0aGUgRE9NLlxuICpcdEBwYXJhbSB7RWxlbWVudH0gZG9tXHRcdFx0RWxlbWVudCB3aG9zZSBjaGlsZHJlbiBzaG91bGQgYmUgY29tcGFyZWQgJiBtdXRhdGVkXG4gKlx0QHBhcmFtIHtBcnJheX0gdmNoaWxkcmVuXHRcdEFycmF5IG9mIFZOb2RlcyB0byBjb21wYXJlIHRvIGBkb20uY2hpbGROb2Rlc2BcbiAqXHRAcGFyYW0ge09iamVjdH0gY29udGV4dFx0XHRcdEltcGxpY2l0bHkgZGVzY2VuZGFudCBjb250ZXh0IG9iamVjdCAoZnJvbSBtb3N0IHJlY2VudCBgZ2V0Q2hpbGRDb250ZXh0KClgKVxuICpcdEBwYXJhbSB7Qm9vbGVhbn0gbW91bnRBbGxcbiAqXHRAcGFyYW0ge0Jvb2xlYW59IGlzSHlkcmF0aW5nXHRJZiBgdHJ1ZWAsIGNvbnN1bWVzIGV4dGVybmFsbHkgY3JlYXRlZCBlbGVtZW50cyBzaW1pbGFyIHRvIGh5ZHJhdGlvblxuICovXG5mdW5jdGlvbiBpbm5lckRpZmZOb2RlKGRvbSwgdmNoaWxkcmVuLCBjb250ZXh0LCBtb3VudEFsbCwgaXNIeWRyYXRpbmcpIHtcblx0dmFyIG9yaWdpbmFsQ2hpbGRyZW4gPSBkb20uY2hpbGROb2Rlcyxcblx0ICAgIGNoaWxkcmVuID0gW10sXG5cdCAgICBrZXllZCA9IHt9LFxuXHQgICAga2V5ZWRMZW4gPSAwLFxuXHQgICAgbWluID0gMCxcblx0ICAgIGxlbiA9IG9yaWdpbmFsQ2hpbGRyZW4ubGVuZ3RoLFxuXHQgICAgY2hpbGRyZW5MZW4gPSAwLFxuXHQgICAgdmxlbiA9IHZjaGlsZHJlbiA/IHZjaGlsZHJlbi5sZW5ndGggOiAwLFxuXHQgICAgaixcblx0ICAgIGMsXG5cdCAgICBmLFxuXHQgICAgdmNoaWxkLFxuXHQgICAgY2hpbGQ7XG5cblx0Ly8gQnVpbGQgdXAgYSBtYXAgb2Yga2V5ZWQgY2hpbGRyZW4gYW5kIGFuIEFycmF5IG9mIHVua2V5ZWQgY2hpbGRyZW46XG5cdGlmIChsZW4gIT09IDApIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHR2YXIgX2NoaWxkID0gb3JpZ2luYWxDaGlsZHJlbltpXSxcblx0XHRcdCAgICBwcm9wcyA9IF9jaGlsZFsnX19wcmVhY3RhdHRyXyddLFxuXHRcdFx0ICAgIGtleSA9IHZsZW4gJiYgcHJvcHMgPyBfY2hpbGQuX2NvbXBvbmVudCA/IF9jaGlsZC5fY29tcG9uZW50Ll9fa2V5IDogcHJvcHMua2V5IDogbnVsbDtcblx0XHRcdGlmIChrZXkgIT0gbnVsbCkge1xuXHRcdFx0XHRrZXllZExlbisrO1xuXHRcdFx0XHRrZXllZFtrZXldID0gX2NoaWxkO1xuXHRcdFx0fSBlbHNlIGlmIChwcm9wcyB8fCAoX2NoaWxkLnNwbGl0VGV4dCAhPT0gdW5kZWZpbmVkID8gaXNIeWRyYXRpbmcgPyBfY2hpbGQubm9kZVZhbHVlLnRyaW0oKSA6IHRydWUgOiBpc0h5ZHJhdGluZykpIHtcblx0XHRcdFx0Y2hpbGRyZW5bY2hpbGRyZW5MZW4rK10gPSBfY2hpbGQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKHZsZW4gIT09IDApIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZsZW47IGkrKykge1xuXHRcdFx0dmNoaWxkID0gdmNoaWxkcmVuW2ldO1xuXHRcdFx0Y2hpbGQgPSBudWxsO1xuXG5cdFx0XHQvLyBhdHRlbXB0IHRvIGZpbmQgYSBub2RlIGJhc2VkIG9uIGtleSBtYXRjaGluZ1xuXHRcdFx0dmFyIGtleSA9IHZjaGlsZC5rZXk7XG5cdFx0XHRpZiAoa2V5ICE9IG51bGwpIHtcblx0XHRcdFx0aWYgKGtleWVkTGVuICYmIGtleWVkW2tleV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNoaWxkID0ga2V5ZWRba2V5XTtcblx0XHRcdFx0XHRrZXllZFtrZXldID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdGtleWVkTGVuLS07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIGF0dGVtcHQgdG8gcGx1Y2sgYSBub2RlIG9mIHRoZSBzYW1lIHR5cGUgZnJvbSB0aGUgZXhpc3RpbmcgY2hpbGRyZW5cblx0XHRcdGVsc2UgaWYgKCFjaGlsZCAmJiBtaW4gPCBjaGlsZHJlbkxlbikge1xuXHRcdFx0XHRcdGZvciAoaiA9IG1pbjsgaiA8IGNoaWxkcmVuTGVuOyBqKyspIHtcblx0XHRcdFx0XHRcdGlmIChjaGlsZHJlbltqXSAhPT0gdW5kZWZpbmVkICYmIGlzU2FtZU5vZGVUeXBlKGMgPSBjaGlsZHJlbltqXSwgdmNoaWxkLCBpc0h5ZHJhdGluZykpIHtcblx0XHRcdFx0XHRcdFx0Y2hpbGQgPSBjO1xuXHRcdFx0XHRcdFx0XHRjaGlsZHJlbltqXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0aWYgKGogPT09IGNoaWxkcmVuTGVuIC0gMSkgY2hpbGRyZW5MZW4tLTtcblx0XHRcdFx0XHRcdFx0aWYgKGogPT09IG1pbikgbWluKys7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBtb3JwaCB0aGUgbWF0Y2hlZC9mb3VuZC9jcmVhdGVkIERPTSBjaGlsZCB0byBtYXRjaCB2Y2hpbGQgKGRlZXApXG5cdFx0XHRjaGlsZCA9IGlkaWZmKGNoaWxkLCB2Y2hpbGQsIGNvbnRleHQsIG1vdW50QWxsKTtcblxuXHRcdFx0ZiA9IG9yaWdpbmFsQ2hpbGRyZW5baV07XG5cdFx0XHRpZiAoY2hpbGQgJiYgY2hpbGQgIT09IGRvbSAmJiBjaGlsZCAhPT0gZikge1xuXHRcdFx0XHRpZiAoZiA9PSBudWxsKSB7XG5cdFx0XHRcdFx0ZG9tLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaGlsZCA9PT0gZi5uZXh0U2libGluZykge1xuXHRcdFx0XHRcdHJlbW92ZU5vZGUoZik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZG9tLmluc2VydEJlZm9yZShjaGlsZCwgZik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyByZW1vdmUgdW51c2VkIGtleWVkIGNoaWxkcmVuOlxuXHRpZiAoa2V5ZWRMZW4pIHtcblx0XHRmb3IgKHZhciBpIGluIGtleWVkKSB7XG5cdFx0XHRpZiAoa2V5ZWRbaV0gIT09IHVuZGVmaW5lZCkgcmVjb2xsZWN0Tm9kZVRyZWUoa2V5ZWRbaV0sIGZhbHNlKTtcblx0XHR9XG5cdH1cblxuXHQvLyByZW1vdmUgb3JwaGFuZWQgdW5rZXllZCBjaGlsZHJlbjpcblx0d2hpbGUgKG1pbiA8PSBjaGlsZHJlbkxlbikge1xuXHRcdGlmICgoY2hpbGQgPSBjaGlsZHJlbltjaGlsZHJlbkxlbi0tXSkgIT09IHVuZGVmaW5lZCkgcmVjb2xsZWN0Tm9kZVRyZWUoY2hpbGQsIGZhbHNlKTtcblx0fVxufVxuXG4vKiogUmVjdXJzaXZlbHkgcmVjeWNsZSAob3IganVzdCB1bm1vdW50KSBhIG5vZGUgYW5kIGl0cyBkZXNjZW5kYW50cy5cbiAqXHRAcGFyYW0ge05vZGV9IG5vZGVcdFx0XHRcdFx0XHRET00gbm9kZSB0byBzdGFydCB1bm1vdW50L3JlbW92YWwgZnJvbVxuICpcdEBwYXJhbSB7Qm9vbGVhbn0gW3VubW91bnRPbmx5PWZhbHNlXVx0SWYgYHRydWVgLCBvbmx5IHRyaWdnZXJzIHVubW91bnQgbGlmZWN5Y2xlLCBza2lwcyByZW1vdmFsXG4gKi9cbmZ1bmN0aW9uIHJlY29sbGVjdE5vZGVUcmVlKG5vZGUsIHVubW91bnRPbmx5KSB7XG5cdHZhciBjb21wb25lbnQgPSBub2RlLl9jb21wb25lbnQ7XG5cdGlmIChjb21wb25lbnQpIHtcblx0XHQvLyBpZiBub2RlIGlzIG93bmVkIGJ5IGEgQ29tcG9uZW50LCB1bm1vdW50IHRoYXQgY29tcG9uZW50IChlbmRzIHVwIHJlY3Vyc2luZyBiYWNrIGhlcmUpXG5cdFx0dW5tb3VudENvbXBvbmVudChjb21wb25lbnQpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIElmIHRoZSBub2RlJ3MgVk5vZGUgaGFkIGEgcmVmIGZ1bmN0aW9uLCBpbnZva2UgaXQgd2l0aCBudWxsIGhlcmUuXG5cdFx0Ly8gKHRoaXMgaXMgcGFydCBvZiB0aGUgUmVhY3Qgc3BlYywgYW5kIHNtYXJ0IGZvciB1bnNldHRpbmcgcmVmZXJlbmNlcylcblx0XHRpZiAobm9kZVsnX19wcmVhY3RhdHRyXyddICE9IG51bGwgJiYgbm9kZVsnX19wcmVhY3RhdHRyXyddLnJlZikgbm9kZVsnX19wcmVhY3RhdHRyXyddLnJlZihudWxsKTtcblxuXHRcdGlmICh1bm1vdW50T25seSA9PT0gZmFsc2UgfHwgbm9kZVsnX19wcmVhY3RhdHRyXyddID09IG51bGwpIHtcblx0XHRcdHJlbW92ZU5vZGUobm9kZSk7XG5cdFx0fVxuXG5cdFx0cmVtb3ZlQ2hpbGRyZW4obm9kZSk7XG5cdH1cbn1cblxuLyoqIFJlY29sbGVjdC91bm1vdW50IGFsbCBjaGlsZHJlbi5cbiAqXHQtIHdlIHVzZSAubGFzdENoaWxkIGhlcmUgYmVjYXVzZSBpdCBjYXVzZXMgbGVzcyByZWZsb3cgdGhhbiAuZmlyc3RDaGlsZFxuICpcdC0gaXQncyBhbHNvIGNoZWFwZXIgdGhhbiBhY2Nlc3NpbmcgdGhlIC5jaGlsZE5vZGVzIExpdmUgTm9kZUxpc3RcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4obm9kZSkge1xuXHRub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG5cdHdoaWxlIChub2RlKSB7XG5cdFx0dmFyIG5leHQgPSBub2RlLnByZXZpb3VzU2libGluZztcblx0XHRyZWNvbGxlY3ROb2RlVHJlZShub2RlLCB0cnVlKTtcblx0XHRub2RlID0gbmV4dDtcblx0fVxufVxuXG4vKiogQXBwbHkgZGlmZmVyZW5jZXMgaW4gYXR0cmlidXRlcyBmcm9tIGEgVk5vZGUgdG8gdGhlIGdpdmVuIERPTSBFbGVtZW50LlxuICpcdEBwYXJhbSB7RWxlbWVudH0gZG9tXHRcdEVsZW1lbnQgd2l0aCBhdHRyaWJ1dGVzIHRvIGRpZmYgYGF0dHJzYCBhZ2FpbnN0XG4gKlx0QHBhcmFtIHtPYmplY3R9IGF0dHJzXHRcdFRoZSBkZXNpcmVkIGVuZC1zdGF0ZSBrZXktdmFsdWUgYXR0cmlidXRlIHBhaXJzXG4gKlx0QHBhcmFtIHtPYmplY3R9IG9sZFx0XHRcdEN1cnJlbnQvcHJldmlvdXMgYXR0cmlidXRlcyAoZnJvbSBwcmV2aW91cyBWTm9kZSBvciBlbGVtZW50J3MgcHJvcCBjYWNoZSlcbiAqL1xuZnVuY3Rpb24gZGlmZkF0dHJpYnV0ZXMoZG9tLCBhdHRycywgb2xkKSB7XG5cdHZhciBuYW1lO1xuXG5cdC8vIHJlbW92ZSBhdHRyaWJ1dGVzIG5vIGxvbmdlciBwcmVzZW50IG9uIHRoZSB2bm9kZSBieSBzZXR0aW5nIHRoZW0gdG8gdW5kZWZpbmVkXG5cdGZvciAobmFtZSBpbiBvbGQpIHtcblx0XHRpZiAoIShhdHRycyAmJiBhdHRyc1tuYW1lXSAhPSBudWxsKSAmJiBvbGRbbmFtZV0gIT0gbnVsbCkge1xuXHRcdFx0c2V0QWNjZXNzb3IoZG9tLCBuYW1lLCBvbGRbbmFtZV0sIG9sZFtuYW1lXSA9IHVuZGVmaW5lZCwgaXNTdmdNb2RlKTtcblx0XHR9XG5cdH1cblxuXHQvLyBhZGQgbmV3ICYgdXBkYXRlIGNoYW5nZWQgYXR0cmlidXRlc1xuXHRmb3IgKG5hbWUgaW4gYXR0cnMpIHtcblx0XHRpZiAobmFtZSAhPT0gJ2NoaWxkcmVuJyAmJiBuYW1lICE9PSAnaW5uZXJIVE1MJyAmJiAoIShuYW1lIGluIG9sZCkgfHwgYXR0cnNbbmFtZV0gIT09IChuYW1lID09PSAndmFsdWUnIHx8IG5hbWUgPT09ICdjaGVja2VkJyA/IGRvbVtuYW1lXSA6IG9sZFtuYW1lXSkpKSB7XG5cdFx0XHRzZXRBY2Nlc3Nvcihkb20sIG5hbWUsIG9sZFtuYW1lXSwgb2xkW25hbWVdID0gYXR0cnNbbmFtZV0sIGlzU3ZnTW9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKiBSZXRhaW5zIGEgcG9vbCBvZiBDb21wb25lbnRzIGZvciByZS11c2UsIGtleWVkIG9uIGNvbXBvbmVudCBuYW1lLlxuICpcdE5vdGU6IHNpbmNlIGNvbXBvbmVudCBuYW1lcyBhcmUgbm90IHVuaXF1ZSBvciBldmVuIG5lY2Vzc2FyaWx5IGF2YWlsYWJsZSwgdGhlc2UgYXJlIHByaW1hcmlseSBhIGZvcm0gb2Ygc2hhcmRpbmcuXG4gKlx0QHByaXZhdGVcbiAqL1xudmFyIGNvbXBvbmVudHMgPSB7fTtcblxuLyoqIFJlY2xhaW0gYSBjb21wb25lbnQgZm9yIGxhdGVyIHJlLXVzZSBieSB0aGUgcmVjeWNsZXIuICovXG5mdW5jdGlvbiBjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCkge1xuXHR2YXIgbmFtZSA9IGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQoY29tcG9uZW50c1tuYW1lXSB8fCAoY29tcG9uZW50c1tuYW1lXSA9IFtdKSkucHVzaChjb21wb25lbnQpO1xufVxuXG4vKiogQ3JlYXRlIGEgY29tcG9uZW50LiBOb3JtYWxpemVzIGRpZmZlcmVuY2VzIGJldHdlZW4gUEZDJ3MgYW5kIGNsYXNzZnVsIENvbXBvbmVudHMuICovXG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnQoQ3RvciwgcHJvcHMsIGNvbnRleHQpIHtcblx0dmFyIGxpc3QgPSBjb21wb25lbnRzW0N0b3IubmFtZV0sXG5cdCAgICBpbnN0O1xuXG5cdGlmIChDdG9yLnByb3RvdHlwZSAmJiBDdG9yLnByb3RvdHlwZS5yZW5kZXIpIHtcblx0XHRpbnN0ID0gbmV3IEN0b3IocHJvcHMsIGNvbnRleHQpO1xuXHRcdENvbXBvbmVudC5jYWxsKGluc3QsIHByb3BzLCBjb250ZXh0KTtcblx0fSBlbHNlIHtcblx0XHRpbnN0ID0gbmV3IENvbXBvbmVudChwcm9wcywgY29udGV4dCk7XG5cdFx0aW5zdC5jb25zdHJ1Y3RvciA9IEN0b3I7XG5cdFx0aW5zdC5yZW5kZXIgPSBkb1JlbmRlcjtcblx0fVxuXG5cdGlmIChsaXN0KSB7XG5cdFx0Zm9yICh2YXIgaSA9IGxpc3QubGVuZ3RoOyBpLS07KSB7XG5cdFx0XHRpZiAobGlzdFtpXS5jb25zdHJ1Y3RvciA9PT0gQ3Rvcikge1xuXHRcdFx0XHRpbnN0Lm5leHRCYXNlID0gbGlzdFtpXS5uZXh0QmFzZTtcblx0XHRcdFx0bGlzdC5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gaW5zdDtcbn1cblxuLyoqIFRoZSBgLnJlbmRlcigpYCBtZXRob2QgZm9yIGEgUEZDIGJhY2tpbmcgaW5zdGFuY2UuICovXG5mdW5jdGlvbiBkb1JlbmRlcihwcm9wcywgc3RhdGUsIGNvbnRleHQpIHtcblx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpO1xufVxuXG4vKiogU2V0IGEgY29tcG9uZW50J3MgYHByb3BzYCAoZ2VuZXJhbGx5IGRlcml2ZWQgZnJvbSBKU1ggYXR0cmlidXRlcykuXG4gKlx0QHBhcmFtIHtPYmplY3R9IHByb3BzXG4gKlx0QHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICpcdEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMucmVuZGVyU3luYz1mYWxzZV1cdElmIGB0cnVlYCBhbmQge0BsaW5rIG9wdGlvbnMuc3luY0NvbXBvbmVudFVwZGF0ZXN9IGlzIGB0cnVlYCwgdHJpZ2dlcnMgc3luY2hyb25vdXMgcmVuZGVyaW5nLlxuICpcdEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMucmVuZGVyPXRydWVdXHRcdFx0SWYgYGZhbHNlYCwgbm8gcmVuZGVyIHdpbGwgYmUgdHJpZ2dlcmVkLlxuICovXG5mdW5jdGlvbiBzZXRDb21wb25lbnRQcm9wcyhjb21wb25lbnQsIHByb3BzLCBvcHRzLCBjb250ZXh0LCBtb3VudEFsbCkge1xuXHRpZiAoY29tcG9uZW50Ll9kaXNhYmxlKSByZXR1cm47XG5cdGNvbXBvbmVudC5fZGlzYWJsZSA9IHRydWU7XG5cblx0aWYgKGNvbXBvbmVudC5fX3JlZiA9IHByb3BzLnJlZikgZGVsZXRlIHByb3BzLnJlZjtcblx0aWYgKGNvbXBvbmVudC5fX2tleSA9IHByb3BzLmtleSkgZGVsZXRlIHByb3BzLmtleTtcblxuXHRpZiAoIWNvbXBvbmVudC5iYXNlIHx8IG1vdW50QWxsKSB7XG5cdFx0aWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsTW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsTW91bnQoKTtcblx0fSBlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykge1xuXHRcdGNvbXBvbmVudC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKHByb3BzLCBjb250ZXh0KTtcblx0fVxuXG5cdGlmIChjb250ZXh0ICYmIGNvbnRleHQgIT09IGNvbXBvbmVudC5jb250ZXh0KSB7XG5cdFx0aWYgKCFjb21wb25lbnQucHJldkNvbnRleHQpIGNvbXBvbmVudC5wcmV2Q29udGV4dCA9IGNvbXBvbmVudC5jb250ZXh0O1xuXHRcdGNvbXBvbmVudC5jb250ZXh0ID0gY29udGV4dDtcblx0fVxuXG5cdGlmICghY29tcG9uZW50LnByZXZQcm9wcykgY29tcG9uZW50LnByZXZQcm9wcyA9IGNvbXBvbmVudC5wcm9wcztcblx0Y29tcG9uZW50LnByb3BzID0gcHJvcHM7XG5cblx0Y29tcG9uZW50Ll9kaXNhYmxlID0gZmFsc2U7XG5cblx0aWYgKG9wdHMgIT09IDApIHtcblx0XHRpZiAob3B0cyA9PT0gMSB8fCBvcHRpb25zLnN5bmNDb21wb25lbnRVcGRhdGVzICE9PSBmYWxzZSB8fCAhY29tcG9uZW50LmJhc2UpIHtcblx0XHRcdHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIDEsIG1vdW50QWxsKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZW5xdWV1ZVJlbmRlcihjb21wb25lbnQpO1xuXHRcdH1cblx0fVxuXG5cdGlmIChjb21wb25lbnQuX19yZWYpIGNvbXBvbmVudC5fX3JlZihjb21wb25lbnQpO1xufVxuXG4vKiogUmVuZGVyIGEgQ29tcG9uZW50LCB0cmlnZ2VyaW5nIG5lY2Vzc2FyeSBsaWZlY3ljbGUgZXZlbnRzIGFuZCB0YWtpbmcgSGlnaC1PcmRlciBDb21wb25lbnRzIGludG8gYWNjb3VudC5cbiAqXHRAcGFyYW0ge0NvbXBvbmVudH0gY29tcG9uZW50XG4gKlx0QHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICpcdEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuYnVpbGQ9ZmFsc2VdXHRcdElmIGB0cnVlYCwgY29tcG9uZW50IHdpbGwgYnVpbGQgYW5kIHN0b3JlIGEgRE9NIG5vZGUgaWYgbm90IGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIG9uZS5cbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZW5kZXJDb21wb25lbnQoY29tcG9uZW50LCBvcHRzLCBtb3VudEFsbCwgaXNDaGlsZCkge1xuXHRpZiAoY29tcG9uZW50Ll9kaXNhYmxlKSByZXR1cm47XG5cblx0dmFyIHByb3BzID0gY29tcG9uZW50LnByb3BzLFxuXHQgICAgc3RhdGUgPSBjb21wb25lbnQuc3RhdGUsXG5cdCAgICBjb250ZXh0ID0gY29tcG9uZW50LmNvbnRleHQsXG5cdCAgICBwcmV2aW91c1Byb3BzID0gY29tcG9uZW50LnByZXZQcm9wcyB8fCBwcm9wcyxcblx0ICAgIHByZXZpb3VzU3RhdGUgPSBjb21wb25lbnQucHJldlN0YXRlIHx8IHN0YXRlLFxuXHQgICAgcHJldmlvdXNDb250ZXh0ID0gY29tcG9uZW50LnByZXZDb250ZXh0IHx8IGNvbnRleHQsXG5cdCAgICBpc1VwZGF0ZSA9IGNvbXBvbmVudC5iYXNlLFxuXHQgICAgbmV4dEJhc2UgPSBjb21wb25lbnQubmV4dEJhc2UsXG5cdCAgICBpbml0aWFsQmFzZSA9IGlzVXBkYXRlIHx8IG5leHRCYXNlLFxuXHQgICAgaW5pdGlhbENoaWxkQ29tcG9uZW50ID0gY29tcG9uZW50Ll9jb21wb25lbnQsXG5cdCAgICBza2lwID0gZmFsc2UsXG5cdCAgICByZW5kZXJlZCxcblx0ICAgIGluc3QsXG5cdCAgICBjYmFzZTtcblxuXHQvLyBpZiB1cGRhdGluZ1xuXHRpZiAoaXNVcGRhdGUpIHtcblx0XHRjb21wb25lbnQucHJvcHMgPSBwcmV2aW91c1Byb3BzO1xuXHRcdGNvbXBvbmVudC5zdGF0ZSA9IHByZXZpb3VzU3RhdGU7XG5cdFx0Y29tcG9uZW50LmNvbnRleHQgPSBwcmV2aW91c0NvbnRleHQ7XG5cdFx0aWYgKG9wdHMgIT09IDIgJiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZSAmJiBjb21wb25lbnQuc2hvdWxkQ29tcG9uZW50VXBkYXRlKHByb3BzLCBzdGF0ZSwgY29udGV4dCkgPT09IGZhbHNlKSB7XG5cdFx0XHRza2lwID0gdHJ1ZTtcblx0XHR9IGVsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsVXBkYXRlKSB7XG5cdFx0XHRjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpO1xuXHRcdH1cblx0XHRjb21wb25lbnQucHJvcHMgPSBwcm9wcztcblx0XHRjb21wb25lbnQuc3RhdGUgPSBzdGF0ZTtcblx0XHRjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7XG5cdH1cblxuXHRjb21wb25lbnQucHJldlByb3BzID0gY29tcG9uZW50LnByZXZTdGF0ZSA9IGNvbXBvbmVudC5wcmV2Q29udGV4dCA9IGNvbXBvbmVudC5uZXh0QmFzZSA9IG51bGw7XG5cdGNvbXBvbmVudC5fZGlydHkgPSBmYWxzZTtcblxuXHRpZiAoIXNraXApIHtcblx0XHRyZW5kZXJlZCA9IGNvbXBvbmVudC5yZW5kZXIocHJvcHMsIHN0YXRlLCBjb250ZXh0KTtcblxuXHRcdC8vIGNvbnRleHQgdG8gcGFzcyB0byB0aGUgY2hpbGQsIGNhbiBiZSB1cGRhdGVkIHZpYSAoZ3JhbmQtKXBhcmVudCBjb21wb25lbnRcblx0XHRpZiAoY29tcG9uZW50LmdldENoaWxkQ29udGV4dCkge1xuXHRcdFx0Y29udGV4dCA9IGV4dGVuZChleHRlbmQoe30sIGNvbnRleHQpLCBjb21wb25lbnQuZ2V0Q2hpbGRDb250ZXh0KCkpO1xuXHRcdH1cblxuXHRcdHZhciBjaGlsZENvbXBvbmVudCA9IHJlbmRlcmVkICYmIHJlbmRlcmVkLm5vZGVOYW1lLFxuXHRcdCAgICB0b1VubW91bnQsXG5cdFx0ICAgIGJhc2U7XG5cblx0XHRpZiAodHlwZW9mIGNoaWxkQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHQvLyBzZXQgdXAgaGlnaCBvcmRlciBjb21wb25lbnQgbGlua1xuXG5cdFx0XHR2YXIgY2hpbGRQcm9wcyA9IGdldE5vZGVQcm9wcyhyZW5kZXJlZCk7XG5cdFx0XHRpbnN0ID0gaW5pdGlhbENoaWxkQ29tcG9uZW50O1xuXG5cdFx0XHRpZiAoaW5zdCAmJiBpbnN0LmNvbnN0cnVjdG9yID09PSBjaGlsZENvbXBvbmVudCAmJiBjaGlsZFByb3BzLmtleSA9PSBpbnN0Ll9fa2V5KSB7XG5cdFx0XHRcdHNldENvbXBvbmVudFByb3BzKGluc3QsIGNoaWxkUHJvcHMsIDEsIGNvbnRleHQsIGZhbHNlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRvVW5tb3VudCA9IGluc3Q7XG5cblx0XHRcdFx0Y29tcG9uZW50Ll9jb21wb25lbnQgPSBpbnN0ID0gY3JlYXRlQ29tcG9uZW50KGNoaWxkQ29tcG9uZW50LCBjaGlsZFByb3BzLCBjb250ZXh0KTtcblx0XHRcdFx0aW5zdC5uZXh0QmFzZSA9IGluc3QubmV4dEJhc2UgfHwgbmV4dEJhc2U7XG5cdFx0XHRcdGluc3QuX3BhcmVudENvbXBvbmVudCA9IGNvbXBvbmVudDtcblx0XHRcdFx0c2V0Q29tcG9uZW50UHJvcHMoaW5zdCwgY2hpbGRQcm9wcywgMCwgY29udGV4dCwgZmFsc2UpO1xuXHRcdFx0XHRyZW5kZXJDb21wb25lbnQoaW5zdCwgMSwgbW91bnRBbGwsIHRydWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRiYXNlID0gaW5zdC5iYXNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYmFzZSA9IGluaXRpYWxCYXNlO1xuXG5cdFx0XHQvLyBkZXN0cm95IGhpZ2ggb3JkZXIgY29tcG9uZW50IGxpbmtcblx0XHRcdHRvVW5tb3VudCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDtcblx0XHRcdGlmICh0b1VubW91bnQpIHtcblx0XHRcdFx0Y2Jhc2UgPSBjb21wb25lbnQuX2NvbXBvbmVudCA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpbml0aWFsQmFzZSB8fCBvcHRzID09PSAxKSB7XG5cdFx0XHRcdGlmIChjYmFzZSkgY2Jhc2UuX2NvbXBvbmVudCA9IG51bGw7XG5cdFx0XHRcdGJhc2UgPSBkaWZmKGNiYXNlLCByZW5kZXJlZCwgY29udGV4dCwgbW91bnRBbGwgfHwgIWlzVXBkYXRlLCBpbml0aWFsQmFzZSAmJiBpbml0aWFsQmFzZS5wYXJlbnROb2RlLCB0cnVlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoaW5pdGlhbEJhc2UgJiYgYmFzZSAhPT0gaW5pdGlhbEJhc2UgJiYgaW5zdCAhPT0gaW5pdGlhbENoaWxkQ29tcG9uZW50KSB7XG5cdFx0XHR2YXIgYmFzZVBhcmVudCA9IGluaXRpYWxCYXNlLnBhcmVudE5vZGU7XG5cdFx0XHRpZiAoYmFzZVBhcmVudCAmJiBiYXNlICE9PSBiYXNlUGFyZW50KSB7XG5cdFx0XHRcdGJhc2VQYXJlbnQucmVwbGFjZUNoaWxkKGJhc2UsIGluaXRpYWxCYXNlKTtcblxuXHRcdFx0XHRpZiAoIXRvVW5tb3VudCkge1xuXHRcdFx0XHRcdGluaXRpYWxCYXNlLl9jb21wb25lbnQgPSBudWxsO1xuXHRcdFx0XHRcdHJlY29sbGVjdE5vZGVUcmVlKGluaXRpYWxCYXNlLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodG9Vbm1vdW50KSB7XG5cdFx0XHR1bm1vdW50Q29tcG9uZW50KHRvVW5tb3VudCk7XG5cdFx0fVxuXG5cdFx0Y29tcG9uZW50LmJhc2UgPSBiYXNlO1xuXHRcdGlmIChiYXNlICYmICFpc0NoaWxkKSB7XG5cdFx0XHR2YXIgY29tcG9uZW50UmVmID0gY29tcG9uZW50LFxuXHRcdFx0ICAgIHQgPSBjb21wb25lbnQ7XG5cdFx0XHR3aGlsZSAodCA9IHQuX3BhcmVudENvbXBvbmVudCkge1xuXHRcdFx0XHQoY29tcG9uZW50UmVmID0gdCkuYmFzZSA9IGJhc2U7XG5cdFx0XHR9XG5cdFx0XHRiYXNlLl9jb21wb25lbnQgPSBjb21wb25lbnRSZWY7XG5cdFx0XHRiYXNlLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9IGNvbXBvbmVudFJlZi5jb25zdHJ1Y3Rvcjtcblx0XHR9XG5cdH1cblxuXHRpZiAoIWlzVXBkYXRlIHx8IG1vdW50QWxsKSB7XG5cdFx0bW91bnRzLnVuc2hpZnQoY29tcG9uZW50KTtcblx0fSBlbHNlIGlmICghc2tpcCkge1xuXHRcdC8vIEVuc3VyZSB0aGF0IHBlbmRpbmcgY29tcG9uZW50RGlkTW91bnQoKSBob29rcyBvZiBjaGlsZCBjb21wb25lbnRzXG5cdFx0Ly8gYXJlIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudERpZFVwZGF0ZSgpIGhvb2sgaW4gdGhlIHBhcmVudC5cblx0XHQvLyBOb3RlOiBkaXNhYmxlZCBhcyBpdCBjYXVzZXMgZHVwbGljYXRlIGhvb2tzLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2RldmVsb3BpdC9wcmVhY3QvaXNzdWVzLzc1MFxuXHRcdC8vIGZsdXNoTW91bnRzKCk7XG5cblx0XHRpZiAoY29tcG9uZW50LmNvbXBvbmVudERpZFVwZGF0ZSkge1xuXHRcdFx0Y29tcG9uZW50LmNvbXBvbmVudERpZFVwZGF0ZShwcmV2aW91c1Byb3BzLCBwcmV2aW91c1N0YXRlLCBwcmV2aW91c0NvbnRleHQpO1xuXHRcdH1cblx0XHRpZiAob3B0aW9ucy5hZnRlclVwZGF0ZSkgb3B0aW9ucy5hZnRlclVwZGF0ZShjb21wb25lbnQpO1xuXHR9XG5cblx0aWYgKGNvbXBvbmVudC5fcmVuZGVyQ2FsbGJhY2tzICE9IG51bGwpIHtcblx0XHR3aGlsZSAoY29tcG9uZW50Ll9yZW5kZXJDYWxsYmFja3MubGVuZ3RoKSB7XG5cdFx0XHRjb21wb25lbnQuX3JlbmRlckNhbGxiYWNrcy5wb3AoKS5jYWxsKGNvbXBvbmVudCk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCFkaWZmTGV2ZWwgJiYgIWlzQ2hpbGQpIGZsdXNoTW91bnRzKCk7XG59XG5cbi8qKiBBcHBseSB0aGUgQ29tcG9uZW50IHJlZmVyZW5jZWQgYnkgYSBWTm9kZSB0byB0aGUgRE9NLlxuICpcdEBwYXJhbSB7RWxlbWVudH0gZG9tXHRUaGUgRE9NIG5vZGUgdG8gbXV0YXRlXG4gKlx0QHBhcmFtIHtWTm9kZX0gdm5vZGVcdEEgQ29tcG9uZW50LXJlZmVyZW5jaW5nIFZOb2RlXG4gKlx0QHJldHVybnMge0VsZW1lbnR9IGRvbVx0VGhlIGNyZWF0ZWQvbXV0YXRlZCBlbGVtZW50XG4gKlx0QHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpIHtcblx0dmFyIGMgPSBkb20gJiYgZG9tLl9jb21wb25lbnQsXG5cdCAgICBvcmlnaW5hbENvbXBvbmVudCA9IGMsXG5cdCAgICBvbGREb20gPSBkb20sXG5cdCAgICBpc0RpcmVjdE93bmVyID0gYyAmJiBkb20uX2NvbXBvbmVudENvbnN0cnVjdG9yID09PSB2bm9kZS5ub2RlTmFtZSxcblx0ICAgIGlzT3duZXIgPSBpc0RpcmVjdE93bmVyLFxuXHQgICAgcHJvcHMgPSBnZXROb2RlUHJvcHModm5vZGUpO1xuXHR3aGlsZSAoYyAmJiAhaXNPd25lciAmJiAoYyA9IGMuX3BhcmVudENvbXBvbmVudCkpIHtcblx0XHRpc093bmVyID0gYy5jb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWU7XG5cdH1cblxuXHRpZiAoYyAmJiBpc093bmVyICYmICghbW91bnRBbGwgfHwgYy5fY29tcG9uZW50KSkge1xuXHRcdHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAzLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdFx0ZG9tID0gYy5iYXNlO1xuXHR9IGVsc2Uge1xuXHRcdGlmIChvcmlnaW5hbENvbXBvbmVudCAmJiAhaXNEaXJlY3RPd25lcikge1xuXHRcdFx0dW5tb3VudENvbXBvbmVudChvcmlnaW5hbENvbXBvbmVudCk7XG5cdFx0XHRkb20gPSBvbGREb20gPSBudWxsO1xuXHRcdH1cblxuXHRcdGMgPSBjcmVhdGVDb21wb25lbnQodm5vZGUubm9kZU5hbWUsIHByb3BzLCBjb250ZXh0KTtcblx0XHRpZiAoZG9tICYmICFjLm5leHRCYXNlKSB7XG5cdFx0XHRjLm5leHRCYXNlID0gZG9tO1xuXHRcdFx0Ly8gcGFzc2luZyBkb20vb2xkRG9tIGFzIG5leHRCYXNlIHdpbGwgcmVjeWNsZSBpdCBpZiB1bnVzZWQsIHNvIGJ5cGFzcyByZWN5Y2xpbmcgb24gTDIyOTpcblx0XHRcdG9sZERvbSA9IG51bGw7XG5cdFx0fVxuXHRcdHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAxLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdFx0ZG9tID0gYy5iYXNlO1xuXG5cdFx0aWYgKG9sZERvbSAmJiBkb20gIT09IG9sZERvbSkge1xuXHRcdFx0b2xkRG9tLl9jb21wb25lbnQgPSBudWxsO1xuXHRcdFx0cmVjb2xsZWN0Tm9kZVRyZWUob2xkRG9tLCBmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGRvbTtcbn1cblxuLyoqIFJlbW92ZSBhIGNvbXBvbmVudCBmcm9tIHRoZSBET00gYW5kIHJlY3ljbGUgaXQuXG4gKlx0QHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudFx0VGhlIENvbXBvbmVudCBpbnN0YW5jZSB0byB1bm1vdW50XG4gKlx0QHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudChjb21wb25lbnQpIHtcblx0aWYgKG9wdGlvbnMuYmVmb3JlVW5tb3VudCkgb3B0aW9ucy5iZWZvcmVVbm1vdW50KGNvbXBvbmVudCk7XG5cblx0dmFyIGJhc2UgPSBjb21wb25lbnQuYmFzZTtcblxuXHRjb21wb25lbnQuX2Rpc2FibGUgPSB0cnVlO1xuXG5cdGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuXG5cdGNvbXBvbmVudC5iYXNlID0gbnVsbDtcblxuXHQvLyByZWN1cnNpdmVseSB0ZWFyIGRvd24gJiByZWNvbGxlY3QgaGlnaC1vcmRlciBjb21wb25lbnQgY2hpbGRyZW46XG5cdHZhciBpbm5lciA9IGNvbXBvbmVudC5fY29tcG9uZW50O1xuXHRpZiAoaW5uZXIpIHtcblx0XHR1bm1vdW50Q29tcG9uZW50KGlubmVyKTtcblx0fSBlbHNlIGlmIChiYXNlKSB7XG5cdFx0aWYgKGJhc2VbJ19fcHJlYWN0YXR0cl8nXSAmJiBiYXNlWydfX3ByZWFjdGF0dHJfJ10ucmVmKSBiYXNlWydfX3ByZWFjdGF0dHJfJ10ucmVmKG51bGwpO1xuXG5cdFx0Y29tcG9uZW50Lm5leHRCYXNlID0gYmFzZTtcblxuXHRcdHJlbW92ZU5vZGUoYmFzZSk7XG5cdFx0Y29sbGVjdENvbXBvbmVudChjb21wb25lbnQpO1xuXG5cdFx0cmVtb3ZlQ2hpbGRyZW4oYmFzZSk7XG5cdH1cblxuXHRpZiAoY29tcG9uZW50Ll9fcmVmKSBjb21wb25lbnQuX19yZWYobnVsbCk7XG59XG5cbi8qKiBCYXNlIENvbXBvbmVudCBjbGFzcy5cbiAqXHRQcm92aWRlcyBgc2V0U3RhdGUoKWAgYW5kIGBmb3JjZVVwZGF0ZSgpYCwgd2hpY2ggdHJpZ2dlciByZW5kZXJpbmcuXG4gKlx0QHB1YmxpY1xuICpcbiAqXHRAZXhhbXBsZVxuICpcdGNsYXNzIE15Rm9vIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqXHRcdHJlbmRlcihwcm9wcywgc3RhdGUpIHtcbiAqXHRcdFx0cmV0dXJuIDxkaXYgLz47XG4gKlx0XHR9XG4gKlx0fVxuICovXG5mdW5jdGlvbiBDb21wb25lbnQocHJvcHMsIGNvbnRleHQpIHtcblx0dGhpcy5fZGlydHkgPSB0cnVlO1xuXG5cdC8qKiBAcHVibGljXG4gICpcdEB0eXBlIHtvYmplY3R9XG4gICovXG5cdHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cblx0LyoqIEBwdWJsaWNcbiAgKlx0QHR5cGUge29iamVjdH1cbiAgKi9cblx0dGhpcy5wcm9wcyA9IHByb3BzO1xuXG5cdC8qKiBAcHVibGljXG4gICpcdEB0eXBlIHtvYmplY3R9XG4gICovXG5cdHRoaXMuc3RhdGUgPSB0aGlzLnN0YXRlIHx8IHt9O1xufVxuXG5leHRlbmQoQ29tcG9uZW50LnByb3RvdHlwZSwge1xuXG5cdC8qKiBSZXR1cm5zIGEgYGJvb2xlYW5gIGluZGljYXRpbmcgaWYgdGhlIGNvbXBvbmVudCBzaG91bGQgcmUtcmVuZGVyIHdoZW4gcmVjZWl2aW5nIHRoZSBnaXZlbiBgcHJvcHNgIGFuZCBgc3RhdGVgLlxuICAqXHRAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICpcdEBwYXJhbSB7b2JqZWN0fSBuZXh0U3RhdGVcbiAgKlx0QHBhcmFtIHtvYmplY3R9IG5leHRDb250ZXh0XG4gICpcdEByZXR1cm5zIHtCb29sZWFufSBzaG91bGQgdGhlIGNvbXBvbmVudCByZS1yZW5kZXJcbiAgKlx0QG5hbWUgc2hvdWxkQ29tcG9uZW50VXBkYXRlXG4gICpcdEBmdW5jdGlvblxuICAqL1xuXG5cdC8qKiBVcGRhdGUgY29tcG9uZW50IHN0YXRlIGJ5IGNvcHlpbmcgcHJvcGVydGllcyBmcm9tIGBzdGF0ZWAgdG8gYHRoaXMuc3RhdGVgLlxuICAqXHRAcGFyYW0ge29iamVjdH0gc3RhdGVcdFx0QSBoYXNoIG9mIHN0YXRlIHByb3BlcnRpZXMgdG8gdXBkYXRlIHdpdGggbmV3IHZhbHVlc1xuICAqXHRAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1x0QSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb25jZSBjb21wb25lbnQgc3RhdGUgaXMgdXBkYXRlZFxuICAqL1xuXHRzZXRTdGF0ZTogZnVuY3Rpb24gc2V0U3RhdGUoc3RhdGUsIGNhbGxiYWNrKSB7XG5cdFx0dmFyIHMgPSB0aGlzLnN0YXRlO1xuXHRcdGlmICghdGhpcy5wcmV2U3RhdGUpIHRoaXMucHJldlN0YXRlID0gZXh0ZW5kKHt9LCBzKTtcblx0XHRleHRlbmQocywgdHlwZW9mIHN0YXRlID09PSAnZnVuY3Rpb24nID8gc3RhdGUocywgdGhpcy5wcm9wcykgOiBzdGF0ZSk7XG5cdFx0aWYgKGNhbGxiYWNrKSAodGhpcy5fcmVuZGVyQ2FsbGJhY2tzID0gdGhpcy5fcmVuZGVyQ2FsbGJhY2tzIHx8IFtdKS5wdXNoKGNhbGxiYWNrKTtcblx0XHRlbnF1ZXVlUmVuZGVyKHRoaXMpO1xuXHR9LFxuXG5cblx0LyoqIEltbWVkaWF0ZWx5IHBlcmZvcm0gYSBzeW5jaHJvbm91cyByZS1yZW5kZXIgb2YgdGhlIGNvbXBvbmVudC5cbiAgKlx0QHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcdFx0QSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgYWZ0ZXIgY29tcG9uZW50IGlzIHJlLXJlbmRlcmVkLlxuICAqXHRAcHJpdmF0ZVxuICAqL1xuXHRmb3JjZVVwZGF0ZTogZnVuY3Rpb24gZm9yY2VVcGRhdGUoY2FsbGJhY2spIHtcblx0XHRpZiAoY2FsbGJhY2spICh0aGlzLl9yZW5kZXJDYWxsYmFja3MgPSB0aGlzLl9yZW5kZXJDYWxsYmFja3MgfHwgW10pLnB1c2goY2FsbGJhY2spO1xuXHRcdHJlbmRlckNvbXBvbmVudCh0aGlzLCAyKTtcblx0fSxcblxuXG5cdC8qKiBBY2NlcHRzIGBwcm9wc2AgYW5kIGBzdGF0ZWAsIGFuZCByZXR1cm5zIGEgbmV3IFZpcnR1YWwgRE9NIHRyZWUgdG8gYnVpbGQuXG4gICpcdFZpcnR1YWwgRE9NIGlzIGdlbmVyYWxseSBjb25zdHJ1Y3RlZCB2aWEgW0pTWF0oaHR0cDovL2phc29uZm9ybWF0LmNvbS93dGYtaXMtanN4KS5cbiAgKlx0QHBhcmFtIHtvYmplY3R9IHByb3BzXHRcdFByb3BzIChlZzogSlNYIGF0dHJpYnV0ZXMpIHJlY2VpdmVkIGZyb20gcGFyZW50IGVsZW1lbnQvY29tcG9uZW50XG4gICpcdEBwYXJhbSB7b2JqZWN0fSBzdGF0ZVx0XHRUaGUgY29tcG9uZW50J3MgY3VycmVudCBzdGF0ZVxuICAqXHRAcGFyYW0ge29iamVjdH0gY29udGV4dFx0XHRDb250ZXh0IG9iamVjdCAoaWYgYSBwYXJlbnQgY29tcG9uZW50IGhhcyBwcm92aWRlZCBjb250ZXh0KVxuICAqXHRAcmV0dXJucyBWTm9kZVxuICAqL1xuXHRyZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHt9XG59KTtcblxuLyoqIFJlbmRlciBKU1ggaW50byBhIGBwYXJlbnRgIEVsZW1lbnQuXG4gKlx0QHBhcmFtIHtWTm9kZX0gdm5vZGVcdFx0QSAoSlNYKSBWTm9kZSB0byByZW5kZXJcbiAqXHRAcGFyYW0ge0VsZW1lbnR9IHBhcmVudFx0XHRET00gZWxlbWVudCB0byByZW5kZXIgaW50b1xuICpcdEBwYXJhbSB7RWxlbWVudH0gW21lcmdlXVx0QXR0ZW1wdCB0byByZS11c2UgYW4gZXhpc3RpbmcgRE9NIHRyZWUgcm9vdGVkIGF0IGBtZXJnZWBcbiAqXHRAcHVibGljXG4gKlxuICpcdEBleGFtcGxlXG4gKlx0Ly8gcmVuZGVyIGEgZGl2IGludG8gPGJvZHk+OlxuICpcdHJlbmRlcig8ZGl2IGlkPVwiaGVsbG9cIj5oZWxsbyE8L2Rpdj4sIGRvY3VtZW50LmJvZHkpO1xuICpcbiAqXHRAZXhhbXBsZVxuICpcdC8vIHJlbmRlciBhIFwiVGhpbmdcIiBjb21wb25lbnQgaW50byAjZm9vOlxuICpcdGNvbnN0IFRoaW5nID0gKHsgbmFtZSB9KSA9PiA8c3Bhbj57IG5hbWUgfTwvc3Bhbj47XG4gKlx0cmVuZGVyKDxUaGluZyBuYW1lPVwib25lXCIgLz4sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb28nKSk7XG4gKi9cbmZ1bmN0aW9uIHJlbmRlcih2bm9kZSwgcGFyZW50LCBtZXJnZSkge1xuICByZXR1cm4gZGlmZihtZXJnZSwgdm5vZGUsIHt9LCBmYWxzZSwgcGFyZW50LCBmYWxzZSk7XG59XG5cbnZhciBwcmVhY3QgPSB7XG5cdGg6IGgsXG5cdGNyZWF0ZUVsZW1lbnQ6IGgsXG5cdGNsb25lRWxlbWVudDogY2xvbmVFbGVtZW50LFxuXHRDb21wb25lbnQ6IENvbXBvbmVudCxcblx0cmVuZGVyOiByZW5kZXIsXG5cdHJlcmVuZGVyOiByZXJlbmRlcixcblx0b3B0aW9uczogb3B0aW9uc1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcHJlYWN0O1xuZXhwb3J0IHsgaCwgaCBhcyBjcmVhdGVFbGVtZW50LCBjbG9uZUVsZW1lbnQsIENvbXBvbmVudCwgcmVuZGVyLCByZXJlbmRlciwgb3B0aW9ucyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJlYWN0LmVzbS5qcy5tYXBcbiIsIm1vZHVsZS5leHBvcnRzID0galF1ZXJ5OyIsImltcG9ydCAqIGFzICQgZnJvbSAnanF1ZXJ5J1xuaW1wb3J0IHtDb21wb25lbnQsIGgsIHJlbmRlcn0gZnJvbSAncHJlYWN0J1xuXG5leHBvcnQgaW50ZXJmYWNlIElQYWlyIHsga2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVxuXG5pbnRlcmZhY2UgSVByb3BzIHtcbiAgaXRlbXM/OiBJUGFpcltdXG4gIG9uSXRlbXNDaGFuZ2VkPzogKGV2dDogSVBhaXJbXSkgPT4gYW55XG59XG5cbmludGVyZmFjZSBJU3RhdGUge1xuICBrZXk/OiBzdHJpbmdcbiAgdmFsdWU/OiBzdHJpbmcsXG4gIGVycm9ycz86IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBjbGFzcyBLVlBGb3JtIGV4dGVuZHMgQ29tcG9uZW50PElQcm9wcywgSVN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLnNldEtleSA9IHRoaXMuc2V0S2V5LmJpbmQodGhpcylcbiAgICB0aGlzLnNldFZhbCA9IHRoaXMuc2V0VmFsLmJpbmQodGhpcylcbiAgICB0aGlzLmFkZFJvdyA9IHRoaXMuYWRkUm93LmJpbmQodGhpcylcbiAgICB0aGlzLmRlbGV0ZVJvdyA9IHRoaXMuZGVsZXRlUm93LmJpbmQodGhpcylcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgY29uc3Qge2l0ZW1zfSA9IHRoaXMucHJvcHNcblxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImt2cC1mb3JtXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwia3ZwLWZvcm1fX2Zvcm1cIj5cbiAgICAgICAgICA8Zm9ybSA+XG4gICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPVwiY2YtZm9ybS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJrZXlcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRLZXl9IHZhbHVlPXt0aGlzLnN0YXRlLmtleX0+PC9pbnB1dD5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGl2aWRlclwiPnw8L3NwYW4+XG4gICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPVwiY2YtZm9ybS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ2YWx1ZVwiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnNldFZhbH0gdmFsdWU9e3RoaXMuc3RhdGUudmFsdWV9PjwvaW5wdXQ+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNmLWJ0bi1wcmltYXJ5XCIgdHlwZT1cInN1Ym1pdFwiIGlkPVwiYWRkXCIgb25DbGljaz17dGhpcy5hZGRSb3d9Pis8L2J1dHRvbj5cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLmVycm9ycyAmJiB0aGlzLnN0YXRlLmVycm9ycy5tYXAoKGUpID0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlcnJvclwiPntlfTwvZGl2PixcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJrdnAtZm9ybV9fdGFibGVcIj5cbiAgICAgICAgICA8dGFibGU+XG4gICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgIHtpdGVtcyAmJiBpdGVtcy5tYXAoKGl0ZW0sIGluZGV4KSA9PlxuICAgICAgICAgICAgICAgICAgPHRyIGtleT17aW5kZXh9IGNsYXNzTmFtZT1cImt2cC1mb3JtX190YWJsZV9fcm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ0ZXh0XCI+e2l0ZW0ua2V5fTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImRpdmlkZXJcIj58PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInRleHRcIj57aXRlbS52YWx1ZX08L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYnV0dG9uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC12ZXJ0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLm1vdmVVcChpbmRleCl9PntpbmRleCA+IDAgPyAn4pazJyA6ICdcXHUwMEEwJ308L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLm1vdmVEb3duKGluZGV4KX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtpbmRleCA8IGl0ZW1zLmxlbmd0aCAtIDEgPyAn4pa9JyA6ICdcXHUwMEEwJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImNmLWJ0bi1zZWNvbmRhcnkgZGVsZXRlXCIgb25DbGljaz17KCkgPT4gdGhpcy5kZWxldGVSb3coaXRlbSl9Plg8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgIDwvdHI+LFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gIH1cblxuICBwcml2YXRlIHNldEtleShldnQ6IEV2ZW50KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBrZXk6ICQoZXZ0LnRhcmdldCkudmFsKCkudG9TdHJpbmcoKSxcbiAgICB9KVxuICB9XG4gIHByaXZhdGUgc2V0VmFsKGV2dDogRXZlbnQpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZhbHVlOiAkKGV2dC50YXJnZXQpLnZhbCgpLnRvU3RyaW5nKCksXG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgYWRkUm93KCkge1xuICAgIGNvbnN0IGVycm9ycyA9IFtdXG4gICAgaWYgKCF0aGlzLnN0YXRlLmtleSB8fCB0aGlzLnN0YXRlLmtleS5sZW5ndGggPT0gMCkge1xuICAgICAgZXJyb3JzLnB1c2goYFBsZWFzZSBzZXQgYSBrZXlgKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3RhdGUudmFsdWUgfHwgdGhpcy5zdGF0ZS52YWx1ZS5sZW5ndGggPT0gMCkge1xuICAgICAgZXJyb3JzLnB1c2goYFBsZWFzZSBzZXQgYSB2YWx1ZWApXG4gICAgfVxuICAgIGlmIChlcnJvcnMubGVuZ3RoID09IDAgJiYgdGhpcy5wcm9wcy5vbkl0ZW1zQ2hhbmdlZCkge1xuICAgICAgY29uc3QgdmFsdWUgPSB7IGtleTogdGhpcy5zdGF0ZS5rZXksIHZhbHVlOiB0aGlzLnN0YXRlLnZhbHVlIH1cbiAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5wcm9wcy5pdGVtcyB8fCBbXVxuXG4gICAgICB0aGlzLnByb3BzLm9uSXRlbXNDaGFuZ2VkKFt2YWx1ZSwgLi4uaXRlbXNdKVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGtleTogJycsXG4gICAgICAgIHZhbHVlOiAnJyxcbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZXJyb3JzLFxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIGRlbGV0ZVJvdyhpdGVtOiBJUGFpcikge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAga2V5OiBpdGVtLmtleSxcbiAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLFxuICAgIH0pXG5cbiAgICBpZiAoIXRoaXMucHJvcHMub25JdGVtc0NoYW5nZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5wcm9wcy5pdGVtcyB8fCBbXVxuICAgIGlmIChpdGVtcy5sZW5ndGggPT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGkgPSBpdGVtcy5maW5kSW5kZXgoKHApID0+IHAua2V5ID09IGl0ZW0ua2V5ICYmIHAudmFsdWUgPT0gaXRlbS52YWx1ZSlcblxuICAgIGlmIChpIDwgMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgdmFsdWUgPSBpdGVtcy5zbGljZSgwLCBpKVxuICAgIHZhbHVlLnB1c2goLi4uaXRlbXMuc2xpY2UoaSArIDEpKVxuICAgIHRoaXMucHJvcHMub25JdGVtc0NoYW5nZWQodmFsdWUpXG4gIH1cblxuICBwcml2YXRlIG1vdmVVcChpbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLnByb3BzLml0ZW1zIHx8IFtdXG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDAgJiYgaW5kZXggPiAwICYmIHRoaXMucHJvcHMub25JdGVtc0NoYW5nZWQpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtcy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICBpdGVtcy5zcGxpY2UoaW5kZXggLSAxLCAwLCAuLi5pdGVtKVxuICAgICAgdGhpcy5wcm9wcy5vbkl0ZW1zQ2hhbmdlZChpdGVtcylcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG1vdmVEb3duKGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMucHJvcHMuaXRlbXMgfHwgW11cbiAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCAmJiBpbmRleCA8IGl0ZW1zLmxlbmd0aCAtIDEgJiYgdGhpcy5wcm9wcy5vbkl0ZW1zQ2hhbmdlZCkge1xuICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zLnNwbGljZShpbmRleCwgMSlcbiAgICAgIGl0ZW1zLnNwbGljZShpbmRleCArIDEsIDAsIC4uLml0ZW0pXG4gICAgICB0aGlzLnByb3BzLm9uSXRlbXNDaGFuZ2VkKGl0ZW1zKVxuICAgIH1cbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSB3aW5kb3cuY29udGVudGZ1bEV4dGVuc2lvbjsiLCJpbXBvcnQgKiBhcyBjb250ZW50ZnVsRXh0ZW5zaW9uIGZyb20gJ2NvbnRlbnRmdWwtdWktZXh0ZW5zaW9ucy1zZGsnXG5pbXBvcnQge0lDb250ZW50ZnVsRXh0ZW5zaW9uU2RrfSBmcm9tICdjb250ZW50ZnVsLXVpLWV4dGVuc2lvbnMtc2RrJ1xuaW1wb3J0IHtDb21wb25lbnQsIGgsIHJlbmRlcn0gZnJvbSAncHJlYWN0J1xuaW1wb3J0IHsgSVBhaXIsIEtWUEZvcm0gfSBmcm9tICcuL2t2cC1mb3JtJ1xuXG5kZWNsYXJlIGZ1bmN0aW9uIHJlcXVpcmUobW9kdWxlOiBzdHJpbmcpOiBhbnlcbmNvbnN0IHN0eWxlcyA9IHJlcXVpcmUoJy4vc3R5bGUuc2NzcycpXG5cbmlmIChjb250ZW50ZnVsRXh0ZW5zaW9uKSB7XG4gIGNvbnRlbnRmdWxFeHRlbnNpb24uaW5pdCgoZXh0ZW5zaW9uKSA9PiB7XG4gICAgcmVuZGVyKDxLdnBFZGl0b3Igey4uLmV4dGVuc2lvbn0gLz4sXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVhY3Qtcm9vdCcpKVxuICAgIGV4dGVuc2lvbi53aW5kb3cuc3RhcnRBdXRvUmVzaXplcigpXG4gIH0pXG59XG5cbmludGVyZmFjZSBJQXBwU3RhdGUge1xuICBmaWVsZFZhbHVlPzogS3ZwTGlzdCxcbiAgd2FpdGluZz86IGJvb2xlYW5cbn1cblxudHlwZSBLdnBMaXN0ID0gQXJyYXk8eyBrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZ30+XG5cbmV4cG9ydCBjbGFzcyBLdnBFZGl0b3IgZXh0ZW5kcyBDb21wb25lbnQ8SUNvbnRlbnRmdWxFeHRlbnNpb25TZGssIElBcHBTdGF0ZT4ge1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLm9uSXRlbXNDaGFuZ2VkID0gdGhpcy5vbkl0ZW1zQ2hhbmdlZC5iaW5kKHRoaXMpXG4gIH1cblxuICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3Qgc2RrID0gdGhpcy5wcm9wc1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZmllbGRWYWx1ZTogKHNkay5maWVsZC5nZXRWYWx1ZSgpIHx8IFtdKS5maWx0ZXIoKGk6IGFueSkgPT4gaSksXG4gICAgfSlcblxuICAgIHNkay5maWVsZC5vblZhbHVlQ2hhbmdlZCgobmV3VmFsdWUpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmaWVsZFZhbHVlOiAobmV3VmFsdWUgfHwgW10pLmZpbHRlcigoaTogYW55KSA9PiBpKSxcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBmaWVsZFZhbHVlLCB3YWl0aW5nIH0gPSB0aGlzLnN0YXRlXG5cbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e3dhaXRpbmcgPyAnZGlzYWJsZWQnIDogJyd9PlxuICAgICAgPEtWUEZvcm1cbiAgICAgICAgaXRlbXM9e2ZpZWxkVmFsdWV9XG4gICAgICAgIG9uSXRlbXNDaGFuZ2VkPXt0aGlzLm9uSXRlbXNDaGFuZ2VkfVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgb25JdGVtc0NoYW5nZWQobmV3SXRlbXM6IElQYWlyW10pIHtcbiAgICBjb25zdCBzZGsgPSB0aGlzLnByb3BzXG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHdhaXRpbmc6IHRydWUsXG4gICAgfSlcblxuICAgIGF3YWl0IHNkay5maWVsZC5zZXRWYWx1ZShuZXdJdGVtcylcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGZpZWxkVmFsdWU6IG5ld0l0ZW1zLFxuICAgICAgd2FpdGluZzogZmFsc2UsXG4gICAgfSlcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==</script></body>
</html>