<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="https://contentful.github.io/ui-extensions-sdk/cf-extension.css">
    <script src="https://contentful.github.io/ui-extensions-sdk/cf-extension-api.js"></script>
    <script
			  src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
    <style>
       #wm-logo {
        width: 16px;
        position: absolute;
        right: 0;
        top: 0;
       }
    </style>
    <title>slug-editor@0.3.1</title>
  <style type="text/css">.cf-form-input {
  font-size: 16px;
  color: #2a3039;
  font-family: "Avenir Next W01", Helvetica, sans-serif;
  display: block;
  width: 100%;
  line-height: 1.5;
  outline: 0;
  padding: 0 2px;
  background-color: transparent;
  border-width: 0 0 1px 0;
  border-style: solid;
  border-color: transparent;
  border-image-width: 0 0 1px 0;
  border-image-source: url("https://static.contentful.com/app/svg/dotted-border.svg");
  border-image-repeat: round;
  border-image-slice: 1 1;
  -webkit-transition: 0.2s linear;
  -moz-transition: 0.2s linear;
  -o-transition: 0.2s linear;
  -ms-transition: 0.2s linear;
  transition: 0.2s linear;
  -webkit-transition-property: padding, background-color;
  -moz-transition-property: padding, background-color;
  -o-transition-property: padding, background-color;
  -ms-transition-property: padding, background-color;
  transition-property: padding, background-color;
  height: 36px; }

.errors {
  color: red; }

.warnings {
  color: orange; }

#parent {
  color: #8091A5; }


/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2x1Zy1lZGl0b3Ivc3R5bGVzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBLGFBQWE7O0FBRWI7QUFDQSxnQkFBZ0I7O0FBRWhCO0FBQ0EsaUJBQWlCIiwiZmlsZSI6ImRpc3Qvc2x1Zy1lZGl0b3Ivc3R5bGUuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNmLWZvcm0taW5wdXQge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGNvbG9yOiAjMmEzMDM5O1xuICBmb250LWZhbWlseTogXCJBdmVuaXIgTmV4dCBXMDFcIiwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xuICBkaXNwbGF5OiBibG9jaztcbiAgd2lkdGg6IDEwMCU7XG4gIGxpbmUtaGVpZ2h0OiAxLjU7XG4gIG91dGxpbmU6IDA7XG4gIHBhZGRpbmc6IDAgMnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyLXdpZHRoOiAwIDAgMXB4IDA7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlci1pbWFnZS13aWR0aDogMCAwIDFweCAwO1xuICBib3JkZXItaW1hZ2Utc291cmNlOiB1cmwoXCJodHRwczovL3N0YXRpYy5jb250ZW50ZnVsLmNvbS9hcHAvc3ZnL2RvdHRlZC1ib3JkZXIuc3ZnXCIpO1xuICBib3JkZXItaW1hZ2UtcmVwZWF0OiByb3VuZDtcbiAgYm9yZGVyLWltYWdlLXNsaWNlOiAxIDE7XG4gIC13ZWJraXQtdHJhbnNpdGlvbjogMC4ycyBsaW5lYXI7XG4gIC1tb3otdHJhbnNpdGlvbjogMC4ycyBsaW5lYXI7XG4gIC1vLXRyYW5zaXRpb246IDAuMnMgbGluZWFyO1xuICAtbXMtdHJhbnNpdGlvbjogMC4ycyBsaW5lYXI7XG4gIHRyYW5zaXRpb246IDAuMnMgbGluZWFyO1xuICAtd2Via2l0LXRyYW5zaXRpb24tcHJvcGVydHk6IHBhZGRpbmcsIGJhY2tncm91bmQtY29sb3I7XG4gIC1tb3otdHJhbnNpdGlvbi1wcm9wZXJ0eTogcGFkZGluZywgYmFja2dyb3VuZC1jb2xvcjtcbiAgLW8tdHJhbnNpdGlvbi1wcm9wZXJ0eTogcGFkZGluZywgYmFja2dyb3VuZC1jb2xvcjtcbiAgLW1zLXRyYW5zaXRpb24tcHJvcGVydHk6IHBhZGRpbmcsIGJhY2tncm91bmQtY29sb3I7XG4gIHRyYW5zaXRpb24tcHJvcGVydHk6IHBhZGRpbmcsIGJhY2tncm91bmQtY29sb3I7XG4gIGhlaWdodDogMzZweDsgfVxuXG4uZXJyb3JzIHtcbiAgY29sb3I6IHJlZDsgfVxuXG4ud2FybmluZ3Mge1xuICBjb2xvcjogb3JhbmdlOyB9XG5cbiNwYXJlbnQge1xuICBjb2xvcjogIzgwOTFBNTsgfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==*/</style></head>
  <body>
    <div id="wm-logo" title="slug-editor@0.3.1"><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 119.2 119.2"><path fill="#009dba" d="M84.9 0H34.4A34.4 34.4 0 0 0 0 34.4v50.5a34.46 34.46 0 0 0 34.4 34.4h50.5a34.46 34.46 0 0 0 34.4-34.4V34.4A34.53 34.53 0 0 0 84.9 0zM34.4 9.5h50.5a24.8 24.8 0 0 1 24.8 24.8v18.2c-9.3 7.8-18.8 8.9-28.9 7.5l5.3-20a4.75 4.75 0 0 0-9.2-2.4s-2.7 10-5.5 20.6c-.7-.2-1.3-.3-2-.5l-5-20a4.72 4.72 0 0 0-4.6-3.6 4.72 4.72 0 0 0-4.6 3.6s-1.7 6.9-3.8 15.3c-1.7-.4-3.4-.7-5.1-1-2.2-8-4-14.4-4-14.4a4.78 4.78 0 0 0-9.2 2.6l3 10.7H34a53.57 53.57 0 0 0-24.4 5.8V34.4A24.82 24.82 0 0 1 34.4 9.5zm50.5 100.2H34.4A24.8 24.8 0 0 1 9.6 84.9v-17A41.77 41.77 0 0 1 34 60.4c1.6 0 3.2.1 4.8.2l6 21.6a4.82 4.82 0 0 0 9.3-.1s2-8.1 4.4-17.4l2.1.6 1.2.3c2.2 8.9 4.1 16.5 4.1 16.5a4.72 4.72 0 0 0 4.6 3.6 4.63 4.63 0 0 0 4.6-3.5l3.4-12.7c10.4 1.6 20.9 1.1 31.3-5.1V85a25 25 0 0 1-24.9 24.7z"/></svg></img></div>
    
    <div id="react-root"></div>
  <script type="text/javascript">!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";n.r(t),n.d(t,"h",function(){return s}),n.d(t,"createElement",function(){return s}),n.d(t,"cloneElement",function(){return l}),n.d(t,"Component",function(){return L}),n.d(t,"render",function(){return O}),n.d(t,"rerender",function(){return d}),n.d(t,"options",function(){return r});var r={},o=[],i=[];function s(e,t){var n,s,a,u,l=i;for(u=arguments.length;u-- >2;)o.push(arguments[u]);for(t&&null!=t.children&&(o.length||o.push(t.children),delete t.children);o.length;)if((s=o.pop())&&void 0!==s.pop)for(u=s.length;u--;)o.push(s[u]);else"boolean"==typeof s&&(s=null),(a="function"!=typeof e)&&(null==s?s="":"number"==typeof s?s=String(s):"string"!=typeof s&&(a=!1)),a&&n?l[l.length-1]+=s:l===i?l=[s]:l.push(s),n=a;var c=new function(){};return c.nodeName=e,c.children=l,c.attributes=null==t?void 0:t,c.key=null==t?void 0:t.key,void 0!==r.vnode&&r.vnode(c),c}function a(e,t){for(var n in t)e[n]=t[n];return e}var u="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function l(e,t){return s(e.nodeName,a(a({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var c=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function f(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&(r.debounceRendering||u)(d)}function d(){var e,t=p;for(p=[];e=t.pop();)e._dirty&&E(e)}function h(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function v(e){var t=a({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function _(e){var t=e.parentNode;t&&t.removeChild(e)}function m(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===c.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,g,s):e.removeEventListener(t,g,s),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var a=o&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function g(e){return this._listeners[e.type](r.event&&r.event(e)||e)}var y=[],b=0,w=!1,S=!1;function C(){for(var e;e=y.pop();)r.afterMount&&r.afterMount(e),e.componentDidMount&&e.componentDidMount()}function x(e,t,n,r,o,i){b++||(w=null!=o&&void 0!==o.ownerSVGElement,S=null!=e&&!("__preactattr_"in e));var s=N(e,t,n,r,i);return o&&s.parentNode!==o&&o.appendChild(s),--b||(S=!1,i||C()),s}function N(e,t,n,r,o){var i=e,s=w;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),k(e,!0))),i.__preactattr_=!0,i;var a,u,l=t.nodeName;if("function"==typeof l)return function(e,t,n,r){var o=e&&e._component,i=o,s=e,a=o&&e._componentConstructor===t.nodeName,u=a,l=v(t);for(;o&&!u&&(o=o._parentComponent);)u=o.constructor===t.nodeName;o&&u&&(!r||o._component)?(U(o,l,3,n,r),e=o.base):(i&&!a&&(F(i),e=s=null),o=P(t.nodeName,l,n),e&&!o.nextBase&&(o.nextBase=e,s=null),U(o,l,1,n,r),e=o.base,s&&e!==s&&(s._component=null,k(s,!1)));return e}(e,t,n,r);if(w="svg"===l||"foreignObject"!==l&&w,l=String(l),(!e||!h(e,l))&&(a=l,(u=w?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,i=u,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),k(e,!0)}var c=i.firstChild,p=i.__preactattr_,f=t.children;if(null==p){p=i.__preactattr_={};for(var d=i.attributes,g=d.length;g--;)p[d[g].name]=d[g].value}return!S&&f&&1===f.length&&"string"==typeof f[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=f[0]&&(c.nodeValue=f[0]):(f&&f.length||null!=c)&&function(e,t,n,r,o){var i,s,a,u,l,c=e.childNodes,p=[],f={},d=0,v=0,m=c.length,g=0,y=t?t.length:0;if(0!==m)for(var b=0;b<m;b++){var w=c[b],S=w.__preactattr_,C=y&&S?w._component?w._component.__key:S.key:null;null!=C?(d++,f[C]=w):(S||(void 0!==w.splitText?!o||w.nodeValue.trim():o))&&(p[g++]=w)}if(0!==y)for(var b=0;b<y;b++){u=t[b],l=null;var C=u.key;if(null!=C)d&&void 0!==f[C]&&(l=f[C],f[C]=void 0,d--);else if(!l&&v<g)for(i=v;i<g;i++)if(void 0!==p[i]&&(x=s=p[i],M=o,"string"==typeof(V=u)||"number"==typeof V?void 0!==x.splitText:"string"==typeof V.nodeName?!x._componentConstructor&&h(x,V.nodeName):M||x._componentConstructor===V.nodeName)){l=s,p[i]=void 0,i===g-1&&g--,i===v&&v++;break}l=N(l,u,n,r),a=c[b],l&&l!==e&&l!==a&&(null==a?e.appendChild(l):l===a.nextSibling?_(a):e.insertBefore(l,a))}var x,V,M;if(d)for(var b in f)void 0!==f[b]&&k(f[b],!1);for(;v<=g;)void 0!==(l=p[g--])&&k(l,!1)}(i,f,n,r,S||null!=p.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||m(e,r,n[r],n[r]=void 0,w);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||m(e,r,n[r],n[r]=t[r],w)}(i,t.attributes,p),w=s,i}function k(e,t){var n=e._component;n?F(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||_(e),V(e))}function V(e){for(e=e.lastChild;e;){var t=e.previousSibling;k(e,!0),e=t}}var M={};function P(e,t,n){var r,o=M[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),L.call(r,t,n)):((r=new L(t,n)).constructor=e,r.render=T),o)for(var i=o.length;i--;)if(o[i].constructor===e){r.nextBase=o[i].nextBase,o.splice(i,1);break}return r}function T(e,t,n){return this.constructor(e,n)}function U(e,t,n,o,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===r.syncComponentUpdates&&e.base?f(e):E(e,1,i)),e.__ref&&e.__ref(e))}function E(e,t,n,o){if(!e._disable){var i,s,u,l=e.props,c=e.state,p=e.context,f=e.prevProps||l,d=e.prevState||c,h=e.prevContext||p,_=e.base,m=e.nextBase,g=_||m,w=e._component,S=!1;if(_&&(e.props=f,e.state=d,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(l,c,p)?S=!0:e.componentWillUpdate&&e.componentWillUpdate(l,c,p),e.props=l,e.state=c,e.context=p),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!S){i=e.render(l,c,p),e.getChildContext&&(p=a(a({},p),e.getChildContext()));var N,V,M=i&&i.nodeName;if("function"==typeof M){var T=v(i);(s=w)&&s.constructor===M&&T.key==s.__key?U(s,T,1,p,!1):(N=s,e._component=s=P(M,T,p),s.nextBase=s.nextBase||m,s._parentComponent=e,U(s,T,0,p,!1),E(s,1,n,!0)),V=s.base}else u=g,(N=w)&&(u=e._component=null),(g||1===t)&&(u&&(u._component=null),V=x(u,i,p,n||!_,g&&g.parentNode,!0));if(g&&V!==g&&s!==w){var L=g.parentNode;L&&V!==L&&(L.replaceChild(V,g),N||(g._component=null,k(g,!1)))}if(N&&F(N),e.base=V,V&&!o){for(var O=e,j=e;j=j._parentComponent;)(O=j).base=V;V._component=O,V._componentConstructor=O.constructor}}if(!_||n?y.unshift(e):S||(e.componentDidUpdate&&e.componentDidUpdate(f,d,h),r.afterUpdate&&r.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);b||o||C()}}function F(e){r.beforeUnmount&&r.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?F(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,_(t),function(e){var t=e.constructor.name;(M[t]||(M[t]=[])).push(e)}(e),V(t)),e.__ref&&e.__ref(null)}function L(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function O(e,t,n){return x(n,e,{},!1,t,!1)}a(L.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=a({},n)),a(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),f(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),E(this,2)},render:function(){}});var j={h:s,createElement:s,cloneElement:l,Component:L,render:O,rerender:d,options:r};t.default=j},function(e,t){e.exports=window.contentfulExtension},,function(e,t,n){},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var i=n(0),s=function(e){function t(){var t=e.call(this)||this;return t.onFocusGained=t.onFocusGained.bind(t),t.onFocusLost=t.onFocusLost.bind(t),t.demandFocus=t.demandFocus.bind(t),t}return o(t,e),t.prototype.componentDidMount=function(){this.setState({value:this.props.slug})},t.prototype.render=function(){var e=this.props.parentSlug,t=this.props.slug;return this.state&&this.state.value&&this.state.value.length>0&&(t=this.state.value),i.h("div",{id:"slugForm",class:"cf-form-input",onClick:this.demandFocus},e&&i.h("span",{id:"parent",title:"This comes from the parent page and you can't change it here."},e,"/"),i.h("span",{id:"slug",contentEditable:!0,onFocus:this.onFocusGained,onBlur:this.onFocusLost},t))},t.prototype.demandFocus=function(){$("#slugForm #slug").focus()},t.prototype.onFocusLost=function(e){var t=e.target.textContent,n=this.state.value;t!=n&&(this.setState({value:t}),this.props.onChange.call(this,{oldValue:n,newValue:t}))},t.prototype.onFocusGained=function(e){console.log("focusGained",e)},t}(i.Component);t.SlugForm=s},function(e,t,n){"use strict";t.__esModule=!0,String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),t.wait=function(e){return new Promise(function(t,n){return setTimeout(function(){return t()},e)})},t.pathJoin=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join("/").replace(/\/{2,}/,"/")},t.basename=function(e){var t=e.split("/");return t[t.length-1]},t.trimStart=function(e,t){if(!e||!t)return e;for(;e.startsWith(t);)e=e.substring(t.length);return e}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};t.__esModule=!0;var u=n(1),l=n(0),c=n(5),p=n(4);n(3);u&&u.init(function(e){l.render(l.h(f,i({},e)),document.getElementById("react-root"))});var f=function(e){function t(){var t=e.call(this)||this;return t.onSlugChange=t.onSlugChange.bind(t),t}return o(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({fieldValue:this.props.field.getValue(),errors:[]}),this.props.field.onValueChanged(function(t){return s(e,void 0,void 0,function(){return a(this,function(e){return this.setState({fieldValue:t}),[2]})})}),this.onMount().catch(function(t){console.error("Error querying!",t),e.setState({errors:[t.toString()]})})},t.prototype.render=function(){var e=this.state,t=e.fieldValue,n=e.parentSlug,r=e.errors,o=e.warnings;return l.h("div",null,l.h(p.SlugForm,{slug:t,parentSlug:n,onChange:this.onSlugChange}),r&&l.h("div",{className:"errors"},r.map(function(e){return l.h("div",{className:"error"},e)})),o&&l.h("div",{className:"warnings"},o.map(function(e){return l.h("div",{className:"error",dangerouslySetInnerHTML:{__html:e}})})))},t.prototype.onSlugChange=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return t=c.pathJoin(this.state.parentSlug,e.newValue),this.setState({fieldValue:e.newValue}),[4,this.validateNewSlug(e.newValue)];case 1:return n.sent()?[4,this.props.field.setValue(t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.validateNewSlug=function(e){return s(this,void 0,void 0,function(){var t,n,r,o,i,s,u;return a(this,function(a){switch(a.label){case 0:return t=[],n=[],e&&0!=e.length?/\s/.test(e)&&t.push("The slug must not contain whitespace!"):t.push("The slug cannot be empty!"),(r=this.props.entry.fields).subpages?(o=r.subpages.getValue())&&o.length>0?(s=(i=n.push).apply,u=[n],[4,this.checkSubpages(o)]):[3,2]:[3,2];case 1:s.apply(i,u.concat([a.sent()])),a.label=2;case 2:return this.setState({errors:t,warnings:n}),t.length>0?(this.props.field.setInvalid(!0),[2,!1]):(this.props.field.setInvalid(!1),[2,!0])}})})},t.prototype.checkSubpages=function(e){return s(this,void 0,void 0,function(){var t,n,r,o,i,s,u;return a(this,function(a){switch(a.label){case 0:return t=this.state,n=t.parentSlug,r=t.fieldValue,o=this.props.entry.getSys(),i=o.space,o.environment,[4,this.props.space.getEntries({content_type:"page","sys.id[in]":e.map(function(e){return e.sys.id}).join(",")})];case 1:return s=a.sent(),0==(u=s.items.filter(function(e){return e}).map(function(e){if(!(e&&e.fields&&e.fields.slug&&e.fields.slug["en-US"]))return null;var t=e.fields.slug["en-US"];if(t.startsWith(c.pathJoin(n,r)))return console.log("subpage "+t+" is good"),null;console.log("bad page",r,e.fields);var o=e.fields.title&&e.fields.title["en-US"];return'<a href="https://app.contentful.com/spaces/'+i.sys.id+"/entries/"+e.sys.id+'" target="_blank">'+(o||e.sys.id)+"</a> ("+t+")"}).filter(function(e){return e})).length?[2,u]:[2,["Be sure to update these subpages! Their slugs are wrong:<br/>  "+u.join(",<br/>")]]}})})},t.prototype.onMount=function(){return s(this,void 0,void 0,function(){var e,t,n;return a(this,function(r){switch(r.label){case 0:return[4,this.props.space.getEntries({content_type:"page","fields.subpages.sys.id":this.props.entry.getSys().id})];case 1:return(e=r.sent()).items.length<=0?[2]:(t=e.items[0].fields.slug["en-US"],n=this.state.fieldValue,n=c.trimStart(n,t),n=c.trimStart(n,"/"),this.setState({parentSlug:t,fieldValue:n}),[4,this.validateNewSlug(n)]);case 2:return r.sent(),[2]}})})},t}(l.Component);t.SlugEditor=f}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3ByZWFjdC9kaXN0L3ByZWFjdC5lc20uanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwid2luZG93LmNvbnRlbnRmdWxFeHRlbnNpb25cIiIsIndlYnBhY2s6Ly8vLi9zcmMvc2x1Zy1lZGl0b3Ivc2x1Zy1mb3JtLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9zbHVnLWVkaXRvci9pbmRleC50c3giXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fd2VicGFja19leHBvcnRzX18iLCJvcHRpb25zIiwic3RhY2siLCJFTVBUWV9DSElMRFJFTiIsImgiLCJub2RlTmFtZSIsImF0dHJpYnV0ZXMiLCJsYXN0U2ltcGxlIiwiY2hpbGQiLCJzaW1wbGUiLCJjaGlsZHJlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInB1c2giLCJwb3AiLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJrZXkiLCJ2bm9kZSIsImV4dGVuZCIsIm9iaiIsInByb3BzIiwiZGVmZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJiaW5kIiwic2V0VGltZW91dCIsImNsb25lRWxlbWVudCIsInNsaWNlIiwiSVNfTk9OX0RJTUVOU0lPTkFMIiwiaXRlbXMiLCJlbnF1ZXVlUmVuZGVyIiwiY29tcG9uZW50IiwiX2RpcnR5IiwiZGVib3VuY2VSZW5kZXJpbmciLCJyZXJlbmRlciIsImxpc3QiLCJyZW5kZXJDb21wb25lbnQiLCJpc05hbWVkTm9kZSIsIm5vZGUiLCJub3JtYWxpemVkTm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImdldE5vZGVQcm9wcyIsImRlZmF1bHRQcm9wcyIsInJlbW92ZU5vZGUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJzZXRBY2Nlc3NvciIsIm9sZCIsImlzU3ZnIiwic3R5bGUiLCJjc3NUZXh0IiwidGVzdCIsImlubmVySFRNTCIsIl9faHRtbCIsInVzZUNhcHR1cmUiLCJyZXBsYWNlIiwic3Vic3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50UHJveHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2xpc3RlbmVycyIsImUiLCJzZXRQcm9wZXJ0eSIsInJlbW92ZUF0dHJpYnV0ZSIsIm5zIiwicmVtb3ZlQXR0cmlidXRlTlMiLCJzZXRBdHRyaWJ1dGVOUyIsInNldEF0dHJpYnV0ZSIsImNsYXNzTmFtZSIsInRoaXMiLCJ0eXBlIiwiZXZlbnQiLCJtb3VudHMiLCJkaWZmTGV2ZWwiLCJpc1N2Z01vZGUiLCJoeWRyYXRpbmciLCJmbHVzaE1vdW50cyIsImFmdGVyTW91bnQiLCJjb21wb25lbnREaWRNb3VudCIsImRpZmYiLCJkb20iLCJjb250ZXh0IiwibW91bnRBbGwiLCJwYXJlbnQiLCJjb21wb25lbnRSb290Iiwib3duZXJTVkdFbGVtZW50IiwicmV0IiwiaWRpZmYiLCJhcHBlbmRDaGlsZCIsIm91dCIsInByZXZTdmdNb2RlIiwic3BsaXRUZXh0IiwiX2NvbXBvbmVudCIsIm5vZGVWYWx1ZSIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJyZWNvbGxlY3ROb2RlVHJlZSIsInZub2RlTmFtZSIsIm9yaWdpbmFsQ29tcG9uZW50Iiwib2xkRG9tIiwiaXNEaXJlY3RPd25lciIsIl9jb21wb25lbnRDb25zdHJ1Y3RvciIsImlzT3duZXIiLCJfcGFyZW50Q29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJzZXRDb21wb25lbnRQcm9wcyIsImJhc2UiLCJ1bm1vdW50Q29tcG9uZW50IiwiY3JlYXRlQ29tcG9uZW50IiwibmV4dEJhc2UiLCJidWlsZENvbXBvbmVudEZyb21WTm9kZSIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUVsZW1lbnQiLCJmaXJzdENoaWxkIiwiZmMiLCJ2Y2hpbGRyZW4iLCJhIiwibmV4dFNpYmxpbmciLCJpc0h5ZHJhdGluZyIsImoiLCJmIiwidmNoaWxkIiwib3JpZ2luYWxDaGlsZHJlbiIsImNoaWxkTm9kZXMiLCJrZXllZCIsImtleWVkTGVuIiwibWluIiwibGVuIiwiY2hpbGRyZW5MZW4iLCJ2bGVuIiwiX2NoaWxkIiwiX19rZXkiLCJ0cmltIiwiaW5zZXJ0QmVmb3JlIiwiaW5uZXJEaWZmTm9kZSIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwiYXR0cnMiLCJkaWZmQXR0cmlidXRlcyIsInVubW91bnRPbmx5IiwicmVmIiwicmVtb3ZlQ2hpbGRyZW4iLCJsYXN0Q2hpbGQiLCJuZXh0IiwicHJldmlvdXNTaWJsaW5nIiwiY29tcG9uZW50cyIsIkN0b3IiLCJpbnN0IiwicmVuZGVyIiwiQ29tcG9uZW50IiwiZG9SZW5kZXIiLCJzcGxpY2UiLCJzdGF0ZSIsIm9wdHMiLCJfZGlzYWJsZSIsIl9fcmVmIiwiY29tcG9uZW50V2lsbE1vdW50IiwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsInByZXZDb250ZXh0IiwicHJldlByb3BzIiwic3luY0NvbXBvbmVudFVwZGF0ZXMiLCJpc0NoaWxkIiwicmVuZGVyZWQiLCJjYmFzZSIsInByZXZpb3VzUHJvcHMiLCJwcmV2aW91c1N0YXRlIiwicHJldlN0YXRlIiwicHJldmlvdXNDb250ZXh0IiwiaXNVcGRhdGUiLCJpbml0aWFsQmFzZSIsImluaXRpYWxDaGlsZENvbXBvbmVudCIsInNraXAiLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJjb21wb25lbnRXaWxsVXBkYXRlIiwiZ2V0Q2hpbGRDb250ZXh0IiwidG9Vbm1vdW50IiwiY2hpbGRDb21wb25lbnQiLCJjaGlsZFByb3BzIiwiYmFzZVBhcmVudCIsImNvbXBvbmVudFJlZiIsInQiLCJ1bnNoaWZ0IiwiY29tcG9uZW50RGlkVXBkYXRlIiwiYWZ0ZXJVcGRhdGUiLCJfcmVuZGVyQ2FsbGJhY2tzIiwiYmVmb3JlVW5tb3VudCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiaW5uZXIiLCJjb2xsZWN0Q29tcG9uZW50IiwibWVyZ2UiLCJzZXRTdGF0ZSIsImNhbGxiYWNrIiwiZm9yY2VVcGRhdGUiLCJwcmVhY3QiLCJ3aW5kb3ciLCJjb250ZW50ZnVsRXh0ZW5zaW9uIiwicHJlYWN0XzEiLCJTbHVnRm9ybSIsIl9zdXBlciIsIl90aGlzIiwib25Gb2N1c0dhaW5lZCIsIm9uRm9jdXNMb3N0IiwiZGVtYW5kRm9jdXMiLCJfX2V4dGVuZHMiLCJzbHVnIiwicGFyZW50U2x1ZyIsImlkIiwiY2xhc3MiLCJvbkNsaWNrIiwidGl0bGUiLCJjb250ZW50RWRpdGFibGUiLCJvbkZvY3VzIiwib25CbHVyIiwiJCIsImZvY3VzIiwiZXZ0IiwibmV3VGV4dCIsInRhcmdldCIsInRleHRDb250ZW50Iiwib2xkVmFsdWUiLCJvbkNoYW5nZSIsIm5ld1ZhbHVlIiwiY29uc29sZSIsImxvZyIsInN0YXJ0c1dpdGgiLCJzZWFyY2giLCJwb3MiLCJzdWJzdHIiLCJ3YWl0IiwibXMiLCJyZWplY3QiLCJwYXRoSm9pbiIsInBhdGhBcnIiLCJfaSIsImpvaW4iLCJiYXNlbmFtZSIsInBhdGgiLCJwYXRoUGFydHMiLCJzcGxpdCIsInRyaW1TdGFydCIsInRvVHJpbSIsInZhbHVlVG9SZW1vdmUiLCJ1dGlsc18xIiwic2x1Z19mb3JtXzEiLCJpbml0IiwiZXh0ZW5zaW9uIiwiU2x1Z0VkaXRvciIsIl9fYXNzaWduIiwiZ2V0RWxlbWVudEJ5SWQiLCJvblNsdWdDaGFuZ2UiLCJmaWVsZFZhbHVlIiwiZmllbGQiLCJnZXRWYWx1ZSIsImVycm9ycyIsIm9uVmFsdWVDaGFuZ2VkIiwiX19hd2FpdGVyIiwib25Nb3VudCIsImVyciIsImVycm9yIiwidG9TdHJpbmciLCJfYSIsIndhcm5pbmdzIiwibWFwIiwidyIsInZhbGlkYXRlTmV3U2x1ZyIsInNlbnQiLCJzZXRWYWx1ZSIsImZpZWxkcyIsImVudHJ5Iiwic3VicGFnZXMiLCJhcHBseSIsImNoZWNrU3VicGFnZXMiLCJfYiIsIl9jIiwiY29uY2F0IiwiX2QiLCJzZXRJbnZhbGlkIiwiZ2V0U3lzIiwic3BhY2UiLCJlbnZpcm9ubWVudCIsImdldEVudHJpZXMiLCJjb250ZW50X3R5cGUiLCJzeXMuaWRbaW5dIiwibGluayIsInN5cyIsImVudHJpZXMiLCJmaWx0ZXIiLCJwYWdlIiwiZmllbGRzLnN1YnBhZ2VzLnN5cy5pZCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBakIsR0FDQVksT0FBQUMsZUFBQWIsRUFBQSxjQUFpRGtCLE9BQUEsS0FJakRwQixFQUFBcUIsRUFBQSxTQUFBbEIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBbUIsV0FDQSxXQUEyQixPQUFBbkIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURB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QUM3RCxZQUFZaUYsRUFBS0gsSUFBSTlFLEdBQUUsc0JBQXFCRyxHQUFTOEUsRUFBS0gsSUFBSTlFLElBQUUsU0FDNURGLEVBQUksTUFDVGtGLE9BQU8sU0FBQ3ZCLEdBQU0sT0FBQUEsS0FFSjdQLFFBQ1gsRUFBTzJQLElBR1QsR0FDRSxrRUFDQUEsRUFBUzNCLEtBQUssa0JBSUpZLEVBQUE1UCxVQUFBc1EsUUFBZCw2R0FFa0IsU0FBTTNMLEtBQUtsRCxNQUFNbVEsTUFBTUUsWUFDckNDLGFBQWdCLE9BQ2hCTyx5QkFBMEIzTixLQUFLbEQsTUFBTXlQLE1BQU1TLFNBQVN2RSxhQUd0RCxPQUxNK0UsRUFBVXpCLEVBQUFLLFFBS0o1TyxNQUFNbkIsUUFBVSxHQUMxQixJQUdJbU0sRUFBYWdGLEVBQVFoUSxNQUFNLEdBQUc4TyxPQUFPL0QsS0FBSyxTQUM1QzhDLEVBQWFyTCxLQUFLbUYsTUFBTWtHLFdBQzVCQSxFQUFhUixFQUFBSCxVQUFVVyxFQUFZN0MsR0FDbkM2QyxFQUFhUixFQUFBSCxVQUFVVyxFQUFZLEtBRW5DckwsS0FBS3lILFVBQ0hlLFdBQVVBLEVBQ1Y2QyxXQUFVQSxLQUdaLEVBQU1yTCxLQUFLbU0sZ0JBQWdCZCxtQkFBM0JVLEVBQUFLLGlCQUVKbkIsRUF4SkEsQ0FBZ0NsRCxFQUFBL0MsV0FBbkJsTCxFQUFBbVIiLCJmaWxlIjoiZGlzdC9zbHVnLWVkaXRvci9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG4iLCIvKiogVmlydHVhbCBET00gTm9kZSAqL1xuZnVuY3Rpb24gVk5vZGUoKSB7fVxuXG4vKiogR2xvYmFsIG9wdGlvbnNcbiAqXHRAcHVibGljXG4gKlx0QG5hbWVzcGFjZSBvcHRpb25zIHtPYmplY3R9XG4gKi9cbnZhciBvcHRpb25zID0ge1xuXG5cdC8qKiBJZiBgdHJ1ZWAsIGBwcm9wYCBjaGFuZ2VzIHRyaWdnZXIgc3luY2hyb25vdXMgY29tcG9uZW50IHVwZGF0ZXMuXG4gICpcdEBuYW1lIHN5bmNDb21wb25lbnRVcGRhdGVzXG4gICpcdEB0eXBlIEJvb2xlYW5cbiAgKlx0QGRlZmF1bHQgdHJ1ZVxuICAqL1xuXHQvL3N5bmNDb21wb25lbnRVcGRhdGVzOiB0cnVlLFxuXG5cdC8qKiBQcm9jZXNzZXMgYWxsIGNyZWF0ZWQgVk5vZGVzLlxuICAqXHRAcGFyYW0ge1ZOb2RlfSB2bm9kZVx0QSBuZXdseS1jcmVhdGVkIFZOb2RlIHRvIG5vcm1hbGl6ZS9wcm9jZXNzXG4gICovXG5cdC8vdm5vZGUodm5vZGUpIHsgfVxuXG5cdC8qKiBIb29rIGludm9rZWQgYWZ0ZXIgYSBjb21wb25lbnQgaXMgbW91bnRlZC4gKi9cblx0Ly8gYWZ0ZXJNb3VudChjb21wb25lbnQpIHsgfVxuXG5cdC8qKiBIb29rIGludm9rZWQgYWZ0ZXIgdGhlIERPTSBpcyB1cGRhdGVkIHdpdGggYSBjb21wb25lbnQncyBsYXRlc3QgcmVuZGVyLiAqL1xuXHQvLyBhZnRlclVwZGF0ZShjb21wb25lbnQpIHsgfVxuXG5cdC8qKiBIb29rIGludm9rZWQgaW1tZWRpYXRlbHkgYmVmb3JlIGEgY29tcG9uZW50IGlzIHVubW91bnRlZC4gKi9cblx0Ly8gYmVmb3JlVW5tb3VudChjb21wb25lbnQpIHsgfVxufTtcblxudmFyIHN0YWNrID0gW107XG5cbnZhciBFTVBUWV9DSElMRFJFTiA9IFtdO1xuXG4vKipcbiAqIEpTWC9oeXBlcnNjcmlwdCByZXZpdmVyLlxuICogQHNlZSBodHRwOi8vamFzb25mb3JtYXQuY29tL3d0Zi1pcy1qc3hcbiAqIEJlbmNobWFya3M6IGh0dHBzOi8vZXNiZW5jaC5jb20vYmVuY2gvNTdlZThmOGUzMzBhYjA5OTAwYTFhMWEwXG4gKlxuICogTm90ZTogdGhpcyBpcyBleHBvcnRlZCBhcyBib3RoIGBoKClgIGFuZCBgY3JlYXRlRWxlbWVudCgpYCBmb3IgY29tcGF0aWJpbGl0eSByZWFzb25zLlxuICpcbiAqIENyZWF0ZXMgYSBWTm9kZSAodmlydHVhbCBET00gZWxlbWVudCkuIEEgdHJlZSBvZiBWTm9kZXMgY2FuIGJlIHVzZWQgYXMgYSBsaWdodHdlaWdodCByZXByZXNlbnRhdGlvblxuICogb2YgdGhlIHN0cnVjdHVyZSBvZiBhIERPTSB0cmVlLiBUaGlzIHN0cnVjdHVyZSBjYW4gYmUgcmVhbGl6ZWQgYnkgcmVjdXJzaXZlbHkgY29tcGFyaW5nIGl0IGFnYWluc3RcbiAqIHRoZSBjdXJyZW50IF9hY3R1YWxfIERPTSBzdHJ1Y3R1cmUsIGFuZCBhcHBseWluZyBvbmx5IHRoZSBkaWZmZXJlbmNlcy5cbiAqXG4gKiBgaCgpYC9gY3JlYXRlRWxlbWVudCgpYCBhY2NlcHRzIGFuIGVsZW1lbnQgbmFtZSwgYSBsaXN0IG9mIGF0dHJpYnV0ZXMvcHJvcHMsXG4gKiBhbmQgb3B0aW9uYWxseSBjaGlsZHJlbiB0byBhcHBlbmQgdG8gdGhlIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGUgVGhlIGZvbGxvd2luZyBET00gdHJlZVxuICpcbiAqIGA8ZGl2IGlkPVwiZm9vXCIgbmFtZT1cImJhclwiPkhlbGxvITwvZGl2PmBcbiAqXG4gKiBjYW4gYmUgY29uc3RydWN0ZWQgdXNpbmcgdGhpcyBmdW5jdGlvbiBhczpcbiAqXG4gKiBgaCgnZGl2JywgeyBpZDogJ2ZvbycsIG5hbWUgOiAnYmFyJyB9LCAnSGVsbG8hJyk7YFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBub2RlTmFtZVx0QW4gZWxlbWVudCBuYW1lLiBFeDogYGRpdmAsIGBhYCwgYHNwYW5gLCBldGMuXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlc1x0QW55IGF0dHJpYnV0ZXMvcHJvcHMgdG8gc2V0IG9uIHRoZSBjcmVhdGVkIGVsZW1lbnQuXG4gKiBAcGFyYW0gcmVzdFx0XHRcdEFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSB0YWtlbiB0byBiZSBjaGlsZHJlbiB0byBhcHBlbmQuIENhbiBiZSBpbmZpbml0ZWx5IG5lc3RlZCBBcnJheXMuXG4gKlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBoKG5vZGVOYW1lLCBhdHRyaWJ1dGVzKSB7XG5cdHZhciBjaGlsZHJlbiA9IEVNUFRZX0NISUxEUkVOLFxuXHQgICAgbGFzdFNpbXBsZSxcblx0ICAgIGNoaWxkLFxuXHQgICAgc2ltcGxlLFxuXHQgICAgaTtcblx0Zm9yIChpID0gYXJndW1lbnRzLmxlbmd0aDsgaS0tID4gMjspIHtcblx0XHRzdGFjay5wdXNoKGFyZ3VtZW50c1tpXSk7XG5cdH1cblx0aWYgKGF0dHJpYnV0ZXMgJiYgYXR0cmlidXRlcy5jaGlsZHJlbiAhPSBudWxsKSB7XG5cdFx0aWYgKCFzdGFjay5sZW5ndGgpIHN0YWNrLnB1c2goYXR0cmlidXRlcy5jaGlsZHJlbik7XG5cdFx0ZGVsZXRlIGF0dHJpYnV0ZXMuY2hpbGRyZW47XG5cdH1cblx0d2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuXHRcdGlmICgoY2hpbGQgPSBzdGFjay5wb3AoKSkgJiYgY2hpbGQucG9wICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGZvciAoaSA9IGNoaWxkLmxlbmd0aDsgaS0tOykge1xuXHRcdFx0XHRzdGFjay5wdXNoKGNoaWxkW2ldKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKHR5cGVvZiBjaGlsZCA9PT0gJ2Jvb2xlYW4nKSBjaGlsZCA9IG51bGw7XG5cblx0XHRcdGlmIChzaW1wbGUgPSB0eXBlb2Ygbm9kZU5hbWUgIT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0aWYgKGNoaWxkID09IG51bGwpIGNoaWxkID0gJyc7ZWxzZSBpZiAodHlwZW9mIGNoaWxkID09PSAnbnVtYmVyJykgY2hpbGQgPSBTdHJpbmcoY2hpbGQpO2Vsc2UgaWYgKHR5cGVvZiBjaGlsZCAhPT0gJ3N0cmluZycpIHNpbXBsZSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc2ltcGxlICYmIGxhc3RTaW1wbGUpIHtcblx0XHRcdFx0Y2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0gKz0gY2hpbGQ7XG5cdFx0XHR9IGVsc2UgaWYgKGNoaWxkcmVuID09PSBFTVBUWV9DSElMRFJFTikge1xuXHRcdFx0XHRjaGlsZHJlbiA9IFtjaGlsZF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjaGlsZHJlbi5wdXNoKGNoaWxkKTtcblx0XHRcdH1cblxuXHRcdFx0bGFzdFNpbXBsZSA9IHNpbXBsZTtcblx0XHR9XG5cdH1cblxuXHR2YXIgcCA9IG5ldyBWTm9kZSgpO1xuXHRwLm5vZGVOYW1lID0gbm9kZU5hbWU7XG5cdHAuY2hpbGRyZW4gPSBjaGlsZHJlbjtcblx0cC5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcyA9PSBudWxsID8gdW5kZWZpbmVkIDogYXR0cmlidXRlcztcblx0cC5rZXkgPSBhdHRyaWJ1dGVzID09IG51bGwgPyB1bmRlZmluZWQgOiBhdHRyaWJ1dGVzLmtleTtcblxuXHQvLyBpZiBhIFwidm5vZGUgaG9va1wiIGlzIGRlZmluZWQsIHBhc3MgZXZlcnkgY3JlYXRlZCBWTm9kZSB0byBpdFxuXHRpZiAob3B0aW9ucy52bm9kZSAhPT0gdW5kZWZpbmVkKSBvcHRpb25zLnZub2RlKHApO1xuXG5cdHJldHVybiBwO1xufVxuXG4vKipcbiAqICBDb3B5IGFsbCBwcm9wZXJ0aWVzIGZyb20gYHByb3BzYCBvbnRvIGBvYmpgLlxuICogIEBwYXJhbSB7T2JqZWN0fSBvYmpcdFx0T2JqZWN0IG9udG8gd2hpY2ggcHJvcGVydGllcyBzaG91bGQgYmUgY29waWVkLlxuICogIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1x0T2JqZWN0IGZyb20gd2hpY2ggdG8gY29weSBwcm9wZXJ0aWVzLlxuICogIEByZXR1cm5zIG9ialxuICogIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChvYmosIHByb3BzKSB7XG4gIGZvciAodmFyIGkgaW4gcHJvcHMpIHtcbiAgICBvYmpbaV0gPSBwcm9wc1tpXTtcbiAgfXJldHVybiBvYmo7XG59XG5cbi8qKlxuICogQ2FsbCBhIGZ1bmN0aW9uIGFzeW5jaHJvbm91c2x5LCBhcyBzb29uIGFzIHBvc3NpYmxlLiBNYWtlc1xuICogdXNlIG9mIEhUTUwgUHJvbWlzZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgaWYgYXZhaWxhYmxlLFxuICogb3RoZXJ3aXNlIGZhbGxpbmcgYmFjayB0byBgc2V0VGltZW91dGAgKG1haW5seSBmb3IgSUU8MTEpLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKi9cbnZhciBkZWZlciA9IHR5cGVvZiBQcm9taXNlID09ICdmdW5jdGlvbicgPyBQcm9taXNlLnJlc29sdmUoKS50aGVuLmJpbmQoUHJvbWlzZS5yZXNvbHZlKCkpIDogc2V0VGltZW91dDtcblxuLyoqXG4gKiBDbG9uZXMgdGhlIGdpdmVuIFZOb2RlLCBvcHRpb25hbGx5IGFkZGluZyBhdHRyaWJ1dGVzL3Byb3BzIGFuZCByZXBsYWNpbmcgaXRzIGNoaWxkcmVuLlxuICogQHBhcmFtIHtWTm9kZX0gdm5vZGVcdFx0VGhlIHZpcnR1YWwgRE9NIGVsZW1lbnQgdG8gY2xvbmVcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1x0QXR0cmlidXRlcy9wcm9wcyB0byBhZGQgd2hlbiBjbG9uaW5nXG4gKiBAcGFyYW0ge1ZOb2RlfSByZXN0XHRcdEFueSBhZGRpdGlvbmFsIGFyZ3VtZW50cyB3aWxsIGJlIHVzZWQgYXMgcmVwbGFjZW1lbnQgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIGNsb25lRWxlbWVudCh2bm9kZSwgcHJvcHMpIHtcbiAgcmV0dXJuIGgodm5vZGUubm9kZU5hbWUsIGV4dGVuZChleHRlbmQoe30sIHZub2RlLmF0dHJpYnV0ZXMpLCBwcm9wcyksIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpIDogdm5vZGUuY2hpbGRyZW4pO1xufVxuXG4vLyBET00gcHJvcGVydGllcyB0aGF0IHNob3VsZCBOT1QgaGF2ZSBcInB4XCIgYWRkZWQgd2hlbiBudW1lcmljXG52YXIgSVNfTk9OX0RJTUVOU0lPTkFMID0gL2FjaXR8ZXgoPzpzfGd8bnxwfCQpfHJwaHxvd3N8bW5jfG50d3xpbmVbY2hdfHpvb3xeb3JkL2k7XG5cbi8qKiBNYW5hZ2VkIHF1ZXVlIG9mIGRpcnR5IGNvbXBvbmVudHMgdG8gYmUgcmUtcmVuZGVyZWQgKi9cblxudmFyIGl0ZW1zID0gW107XG5cbmZ1bmN0aW9uIGVucXVldWVSZW5kZXIoY29tcG9uZW50KSB7XG5cdGlmICghY29tcG9uZW50Ll9kaXJ0eSAmJiAoY29tcG9uZW50Ll9kaXJ0eSA9IHRydWUpICYmIGl0ZW1zLnB1c2goY29tcG9uZW50KSA9PSAxKSB7XG5cdFx0KG9wdGlvbnMuZGVib3VuY2VSZW5kZXJpbmcgfHwgZGVmZXIpKHJlcmVuZGVyKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZXJlbmRlcigpIHtcblx0dmFyIHAsXG5cdCAgICBsaXN0ID0gaXRlbXM7XG5cdGl0ZW1zID0gW107XG5cdHdoaWxlIChwID0gbGlzdC5wb3AoKSkge1xuXHRcdGlmIChwLl9kaXJ0eSkgcmVuZGVyQ29tcG9uZW50KHApO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIG5vZGVzIGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVx0XHRcdERPTSBOb2RlIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSB7Vk5vZGV9IHZub2RlXHRcdFx0VmlydHVhbCBET00gbm9kZSB0byBjb21wYXJlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtoeWRyYXRpbmc9ZmFsc2VdXHRJZiB0cnVlLCBpZ25vcmVzIGNvbXBvbmVudCBjb25zdHJ1Y3RvcnMgd2hlbiBjb21wYXJpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc1NhbWVOb2RlVHlwZShub2RlLCB2bm9kZSwgaHlkcmF0aW5nKSB7XG4gIGlmICh0eXBlb2Ygdm5vZGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2bm9kZSA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gbm9kZS5zcGxpdFRleHQgIT09IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodHlwZW9mIHZub2RlLm5vZGVOYW1lID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiAhbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgJiYgaXNOYW1lZE5vZGUobm9kZSwgdm5vZGUubm9kZU5hbWUpO1xuICB9XG4gIHJldHVybiBoeWRyYXRpbmcgfHwgbm9kZS5fY29tcG9uZW50Q29uc3RydWN0b3IgPT09IHZub2RlLm5vZGVOYW1lO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIEVsZW1lbnQgaGFzIGEgZ2l2ZW4gbm9kZU5hbWUsIGNhc2UtaW5zZW5zaXRpdmVseS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcdEEgRE9NIEVsZW1lbnQgdG8gaW5zcGVjdCB0aGUgbmFtZSBvZi5cbiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVx0VW5ub3JtYWxpemVkIG5hbWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICovXG5mdW5jdGlvbiBpc05hbWVkTm9kZShub2RlLCBub2RlTmFtZSkge1xuICByZXR1cm4gbm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgPT09IG5vZGVOYW1lIHx8IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBSZWNvbnN0cnVjdCBDb21wb25lbnQtc3R5bGUgYHByb3BzYCBmcm9tIGEgVk5vZGUuXG4gKiBFbnN1cmVzIGRlZmF1bHQvZmFsbGJhY2sgdmFsdWVzIGZyb20gYGRlZmF1bHRQcm9wc2A6XG4gKiBPd24tcHJvcGVydGllcyBvZiBgZGVmYXVsdFByb3BzYCBub3QgcHJlc2VudCBpbiBgdm5vZGUuYXR0cmlidXRlc2AgYXJlIGFkZGVkLlxuICpcbiAqIEBwYXJhbSB7Vk5vZGV9IHZub2RlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBwcm9wc1xuICovXG5mdW5jdGlvbiBnZXROb2RlUHJvcHModm5vZGUpIHtcbiAgdmFyIHByb3BzID0gZXh0ZW5kKHt9LCB2bm9kZS5hdHRyaWJ1dGVzKTtcbiAgcHJvcHMuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcblxuICB2YXIgZGVmYXVsdFByb3BzID0gdm5vZGUubm9kZU5hbWUuZGVmYXVsdFByb3BzO1xuICBpZiAoZGVmYXVsdFByb3BzICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKHZhciBpIGluIGRlZmF1bHRQcm9wcykge1xuICAgICAgaWYgKHByb3BzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvcHNbaV0gPSBkZWZhdWx0UHJvcHNbaV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHByb3BzO1xufVxuXG4vKiogQ3JlYXRlIGFuIGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gbm9kZU5hbWUuXG4gKlx0QHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lXG4gKlx0QHBhcmFtIHtCb29sZWFufSBbaXNTdmc9ZmFsc2VdXHRJZiBgdHJ1ZWAsIGNyZWF0ZXMgYW4gZWxlbWVudCB3aXRoaW4gdGhlIFNWRyBuYW1lc3BhY2UuXG4gKlx0QHJldHVybnMge0VsZW1lbnR9IG5vZGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTm9kZShub2RlTmFtZSwgaXNTdmcpIHtcblx0dmFyIG5vZGUgPSBpc1N2ZyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBub2RlTmFtZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTtcblx0bm9kZS5ub3JtYWxpemVkTm9kZU5hbWUgPSBub2RlTmFtZTtcblx0cmV0dXJuIG5vZGU7XG59XG5cbi8qKiBSZW1vdmUgYSBjaGlsZCBub2RlIGZyb20gaXRzIHBhcmVudCBpZiBhdHRhY2hlZC5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IG5vZGVcdFx0VGhlIG5vZGUgdG8gcmVtb3ZlXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuXHR2YXIgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0aWYgKHBhcmVudE5vZGUpIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG59XG5cbi8qKiBTZXQgYSBuYW1lZCBhdHRyaWJ1dGUgb24gdGhlIGdpdmVuIE5vZGUsIHdpdGggc3BlY2lhbCBiZWhhdmlvciBmb3Igc29tZSBuYW1lcyBhbmQgZXZlbnQgaGFuZGxlcnMuXG4gKlx0SWYgYHZhbHVlYCBpcyBgbnVsbGAsIHRoZSBhdHRyaWJ1dGUvaGFuZGxlciB3aWxsIGJlIHJlbW92ZWQuXG4gKlx0QHBhcmFtIHtFbGVtZW50fSBub2RlXHRBbiBlbGVtZW50IHRvIG11dGF0ZVxuICpcdEBwYXJhbSB7c3RyaW5nfSBuYW1lXHRUaGUgbmFtZS9rZXkgdG8gc2V0LCBzdWNoIGFzIGFuIGV2ZW50IG9yIGF0dHJpYnV0ZSBuYW1lXG4gKlx0QHBhcmFtIHthbnl9IG9sZFx0VGhlIGxhc3QgdmFsdWUgdGhhdCB3YXMgc2V0IGZvciB0aGlzIG5hbWUvbm9kZSBwYWlyXG4gKlx0QHBhcmFtIHthbnl9IHZhbHVlXHRBbiBhdHRyaWJ1dGUgdmFsdWUsIHN1Y2ggYXMgYSBmdW5jdGlvbiB0byBiZSB1c2VkIGFzIGFuIGV2ZW50IGhhbmRsZXJcbiAqXHRAcGFyYW0ge0Jvb2xlYW59IGlzU3ZnXHRBcmUgd2UgY3VycmVudGx5IGRpZmZpbmcgaW5zaWRlIGFuIHN2Zz9cbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzZXRBY2Nlc3Nvcihub2RlLCBuYW1lLCBvbGQsIHZhbHVlLCBpc1N2Zykge1xuXHRpZiAobmFtZSA9PT0gJ2NsYXNzTmFtZScpIG5hbWUgPSAnY2xhc3MnO1xuXG5cdGlmIChuYW1lID09PSAna2V5Jykge1xuXHRcdC8vIGlnbm9yZVxuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICdyZWYnKSB7XG5cdFx0aWYgKG9sZCkgb2xkKG51bGwpO1xuXHRcdGlmICh2YWx1ZSkgdmFsdWUobm9kZSk7XG5cdH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhaXNTdmcpIHtcblx0XHRub2RlLmNsYXNzTmFtZSA9IHZhbHVlIHx8ICcnO1xuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICdzdHlsZScpIHtcblx0XHRpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIG9sZCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdG5vZGUuc3R5bGUuY3NzVGV4dCA9IHZhbHVlIHx8ICcnO1xuXHRcdH1cblx0XHRpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0aWYgKHR5cGVvZiBvbGQgIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdGZvciAodmFyIGkgaW4gb2xkKSB7XG5cdFx0XHRcdFx0aWYgKCEoaSBpbiB2YWx1ZSkpIG5vZGUuc3R5bGVbaV0gPSAnJztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Zm9yICh2YXIgaSBpbiB2YWx1ZSkge1xuXHRcdFx0XHRub2RlLnN0eWxlW2ldID0gdHlwZW9mIHZhbHVlW2ldID09PSAnbnVtYmVyJyAmJiBJU19OT05fRElNRU5TSU9OQUwudGVzdChpKSA9PT0gZmFsc2UgPyB2YWx1ZVtpXSArICdweCcgOiB2YWx1ZVtpXTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSBpZiAobmFtZSA9PT0gJ2Rhbmdlcm91c2x5U2V0SW5uZXJIVE1MJykge1xuXHRcdGlmICh2YWx1ZSkgbm9kZS5pbm5lckhUTUwgPSB2YWx1ZS5fX2h0bWwgfHwgJyc7XG5cdH0gZWxzZSBpZiAobmFtZVswXSA9PSAnbycgJiYgbmFtZVsxXSA9PSAnbicpIHtcblx0XHR2YXIgdXNlQ2FwdHVyZSA9IG5hbWUgIT09IChuYW1lID0gbmFtZS5yZXBsYWNlKC9DYXB0dXJlJC8sICcnKSk7XG5cdFx0bmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMik7XG5cdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRpZiAoIW9sZCkgbm9kZS5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGV2ZW50UHJveHksIHVzZUNhcHR1cmUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSwgdXNlQ2FwdHVyZSk7XG5cdFx0fVxuXHRcdChub2RlLl9saXN0ZW5lcnMgfHwgKG5vZGUuX2xpc3RlbmVycyA9IHt9KSlbbmFtZV0gPSB2YWx1ZTtcblx0fSBlbHNlIGlmIChuYW1lICE9PSAnbGlzdCcgJiYgbmFtZSAhPT0gJ3R5cGUnICYmICFpc1N2ZyAmJiBuYW1lIGluIG5vZGUpIHtcblx0XHRzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZSk7XG5cdFx0aWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09IGZhbHNlKSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgbnMgPSBpc1N2ZyAmJiBuYW1lICE9PSAobmFtZSA9IG5hbWUucmVwbGFjZSgvXnhsaW5rOj8vLCAnJykpO1xuXHRcdGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlID09PSBmYWxzZSkge1xuXHRcdFx0aWYgKG5zKSBub2RlLnJlbW92ZUF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgbmFtZS50b0xvd2VyQ2FzZSgpKTtlbHNlIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRpZiAobnMpIG5vZGUuc2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBuYW1lLnRvTG93ZXJDYXNlKCksIHZhbHVlKTtlbHNlIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcblx0XHR9XG5cdH1cbn1cblxuLyoqIEF0dGVtcHQgdG8gc2V0IGEgRE9NIHByb3BlcnR5IHRvIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXHRJRSAmIEZGIHRocm93IGZvciBjZXJ0YWluIHByb3BlcnR5LXZhbHVlIGNvbWJpbmF0aW9ucy5cbiAqL1xuZnVuY3Rpb24gc2V0UHJvcGVydHkobm9kZSwgbmFtZSwgdmFsdWUpIHtcblx0dHJ5IHtcblx0XHRub2RlW25hbWVdID0gdmFsdWU7XG5cdH0gY2F0Y2ggKGUpIHt9XG59XG5cbi8qKiBQcm94eSBhbiBldmVudCB0byBob29rZWQgZXZlbnQgaGFuZGxlcnNcbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBldmVudFByb3h5KGUpIHtcblx0cmV0dXJuIHRoaXMuX2xpc3RlbmVyc1tlLnR5cGVdKG9wdGlvbnMuZXZlbnQgJiYgb3B0aW9ucy5ldmVudChlKSB8fCBlKTtcbn1cblxuLyoqIFF1ZXVlIG9mIGNvbXBvbmVudHMgdGhhdCBoYXZlIGJlZW4gbW91bnRlZCBhbmQgYXJlIGF3YWl0aW5nIGNvbXBvbmVudERpZE1vdW50ICovXG52YXIgbW91bnRzID0gW107XG5cbi8qKiBEaWZmIHJlY3Vyc2lvbiBjb3VudCwgdXNlZCB0byB0cmFjayB0aGUgZW5kIG9mIHRoZSBkaWZmIGN5Y2xlLiAqL1xudmFyIGRpZmZMZXZlbCA9IDA7XG5cbi8qKiBHbG9iYWwgZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBkaWZmIGlzIGN1cnJlbnRseSB3aXRoaW4gYW4gU1ZHICovXG52YXIgaXNTdmdNb2RlID0gZmFsc2U7XG5cbi8qKiBHbG9iYWwgZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBkaWZmIGlzIHBlcmZvcm1pbmcgaHlkcmF0aW9uICovXG52YXIgaHlkcmF0aW5nID0gZmFsc2U7XG5cbi8qKiBJbnZva2UgcXVldWVkIGNvbXBvbmVudERpZE1vdW50IGxpZmVjeWNsZSBtZXRob2RzICovXG5mdW5jdGlvbiBmbHVzaE1vdW50cygpIHtcblx0dmFyIGM7XG5cdHdoaWxlIChjID0gbW91bnRzLnBvcCgpKSB7XG5cdFx0aWYgKG9wdGlvbnMuYWZ0ZXJNb3VudCkgb3B0aW9ucy5hZnRlck1vdW50KGMpO1xuXHRcdGlmIChjLmNvbXBvbmVudERpZE1vdW50KSBjLmNvbXBvbmVudERpZE1vdW50KCk7XG5cdH1cbn1cblxuLyoqIEFwcGx5IGRpZmZlcmVuY2VzIGluIGEgZ2l2ZW4gdm5vZGUgKGFuZCBpdCdzIGRlZXAgY2hpbGRyZW4pIHRvIGEgcmVhbCBET00gTm9kZS5cbiAqXHRAcGFyYW0ge0VsZW1lbnR9IFtkb209bnVsbF1cdFx0QSBET00gbm9kZSB0byBtdXRhdGUgaW50byB0aGUgc2hhcGUgb2YgdGhlIGB2bm9kZWBcbiAqXHRAcGFyYW0ge1ZOb2RlfSB2bm9kZVx0XHRcdEEgVk5vZGUgKHdpdGggZGVzY2VuZGFudHMgZm9ybWluZyBhIHRyZWUpIHJlcHJlc2VudGluZyB0aGUgZGVzaXJlZCBET00gc3RydWN0dXJlXG4gKlx0QHJldHVybnMge0VsZW1lbnR9IGRvbVx0XHRcdFRoZSBjcmVhdGVkL211dGF0ZWQgZWxlbWVudFxuICpcdEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIHBhcmVudCwgY29tcG9uZW50Um9vdCkge1xuXHQvLyBkaWZmTGV2ZWwgaGF2aW5nIGJlZW4gMCBoZXJlIGluZGljYXRlcyBpbml0aWFsIGVudHJ5IGludG8gdGhlIGRpZmYgKG5vdCBhIHN1YmRpZmYpXG5cdGlmICghZGlmZkxldmVsKyspIHtcblx0XHQvLyB3aGVuIGZpcnN0IHN0YXJ0aW5nIHRoZSBkaWZmLCBjaGVjayBpZiB3ZSdyZSBkaWZmaW5nIGFuIFNWRyBvciB3aXRoaW4gYW4gU1ZHXG5cdFx0aXNTdmdNb2RlID0gcGFyZW50ICE9IG51bGwgJiYgcGFyZW50Lm93bmVyU1ZHRWxlbWVudCAhPT0gdW5kZWZpbmVkO1xuXG5cdFx0Ly8gaHlkcmF0aW9uIGlzIGluZGljYXRlZCBieSB0aGUgZXhpc3RpbmcgZWxlbWVudCB0byBiZSBkaWZmZWQgbm90IGhhdmluZyBhIHByb3AgY2FjaGVcblx0XHRoeWRyYXRpbmcgPSBkb20gIT0gbnVsbCAmJiAhKCdfX3ByZWFjdGF0dHJfJyBpbiBkb20pO1xuXHR9XG5cblx0dmFyIHJldCA9IGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBjb21wb25lbnRSb290KTtcblxuXHQvLyBhcHBlbmQgdGhlIGVsZW1lbnQgaWYgaXRzIGEgbmV3IHBhcmVudFxuXHRpZiAocGFyZW50ICYmIHJldC5wYXJlbnROb2RlICE9PSBwYXJlbnQpIHBhcmVudC5hcHBlbmRDaGlsZChyZXQpO1xuXG5cdC8vIGRpZmZMZXZlbCBiZWluZyByZWR1Y2VkIHRvIDAgbWVhbnMgd2UncmUgZXhpdGluZyB0aGUgZGlmZlxuXHRpZiAoISAtLWRpZmZMZXZlbCkge1xuXHRcdGh5ZHJhdGluZyA9IGZhbHNlO1xuXHRcdC8vIGludm9rZSBxdWV1ZWQgY29tcG9uZW50RGlkTW91bnQgbGlmZWN5Y2xlIG1ldGhvZHNcblx0XHRpZiAoIWNvbXBvbmVudFJvb3QpIGZsdXNoTW91bnRzKCk7XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufVxuXG4vKiogSW50ZXJuYWxzIG9mIGBkaWZmKClgLCBzZXBhcmF0ZWQgdG8gYWxsb3cgYnlwYXNzaW5nIGRpZmZMZXZlbCAvIG1vdW50IGZsdXNoaW5nLiAqL1xuZnVuY3Rpb24gaWRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIGNvbXBvbmVudFJvb3QpIHtcblx0dmFyIG91dCA9IGRvbSxcblx0ICAgIHByZXZTdmdNb2RlID0gaXNTdmdNb2RlO1xuXG5cdC8vIGVtcHR5IHZhbHVlcyAobnVsbCwgdW5kZWZpbmVkLCBib29sZWFucykgcmVuZGVyIGFzIGVtcHR5IFRleHQgbm9kZXNcblx0aWYgKHZub2RlID09IG51bGwgfHwgdHlwZW9mIHZub2RlID09PSAnYm9vbGVhbicpIHZub2RlID0gJyc7XG5cblx0Ly8gRmFzdCBjYXNlOiBTdHJpbmdzICYgTnVtYmVycyBjcmVhdGUvdXBkYXRlIFRleHQgbm9kZXMuXG5cdGlmICh0eXBlb2Ygdm5vZGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2bm9kZSA9PT0gJ251bWJlcicpIHtcblxuXHRcdC8vIHVwZGF0ZSBpZiBpdCdzIGFscmVhZHkgYSBUZXh0IG5vZGU6XG5cdFx0aWYgKGRvbSAmJiBkb20uc3BsaXRUZXh0ICE9PSB1bmRlZmluZWQgJiYgZG9tLnBhcmVudE5vZGUgJiYgKCFkb20uX2NvbXBvbmVudCB8fCBjb21wb25lbnRSb290KSkge1xuXHRcdFx0LyogaXN0YW5idWwgaWdub3JlIGlmICovIC8qIEJyb3dzZXIgcXVpcmsgdGhhdCBjYW4ndCBiZSBjb3ZlcmVkOiBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L3ByZWFjdC9jb21taXQvZmQ0ZjIxZjVjNDVkZmQ3NTE1MWJkMjdiNGMyMTdkODAwM2FhNWViOSAqL1xuXHRcdFx0aWYgKGRvbS5ub2RlVmFsdWUgIT0gdm5vZGUpIHtcblx0XHRcdFx0ZG9tLm5vZGVWYWx1ZSA9IHZub2RlO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBpdCB3YXNuJ3QgYSBUZXh0IG5vZGU6IHJlcGxhY2UgaXQgd2l0aCBvbmUgYW5kIHJlY3ljbGUgdGhlIG9sZCBFbGVtZW50XG5cdFx0XHRvdXQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2bm9kZSk7XG5cdFx0XHRpZiAoZG9tKSB7XG5cdFx0XHRcdGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTtcblx0XHRcdFx0cmVjb2xsZWN0Tm9kZVRyZWUoZG9tLCB0cnVlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRvdXRbJ19fcHJlYWN0YXR0cl8nXSA9IHRydWU7XG5cblx0XHRyZXR1cm4gb3V0O1xuXHR9XG5cblx0Ly8gSWYgdGhlIFZOb2RlIHJlcHJlc2VudHMgYSBDb21wb25lbnQsIHBlcmZvcm0gYSBjb21wb25lbnQgZGlmZjpcblx0dmFyIHZub2RlTmFtZSA9IHZub2RlLm5vZGVOYW1lO1xuXHRpZiAodHlwZW9mIHZub2RlTmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHJldHVybiBidWlsZENvbXBvbmVudEZyb21WTm9kZShkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdH1cblxuXHQvLyBUcmFja3MgZW50ZXJpbmcgYW5kIGV4aXRpbmcgU1ZHIG5hbWVzcGFjZSB3aGVuIGRlc2NlbmRpbmcgdGhyb3VnaCB0aGUgdHJlZS5cblx0aXNTdmdNb2RlID0gdm5vZGVOYW1lID09PSAnc3ZnJyA/IHRydWUgOiB2bm9kZU5hbWUgPT09ICdmb3JlaWduT2JqZWN0JyA/IGZhbHNlIDogaXNTdmdNb2RlO1xuXG5cdC8vIElmIHRoZXJlJ3Mgbm8gZXhpc3RpbmcgZWxlbWVudCBvciBpdCdzIHRoZSB3cm9uZyB0eXBlLCBjcmVhdGUgYSBuZXcgb25lOlxuXHR2bm9kZU5hbWUgPSBTdHJpbmcodm5vZGVOYW1lKTtcblx0aWYgKCFkb20gfHwgIWlzTmFtZWROb2RlKGRvbSwgdm5vZGVOYW1lKSkge1xuXHRcdG91dCA9IGNyZWF0ZU5vZGUodm5vZGVOYW1lLCBpc1N2Z01vZGUpO1xuXG5cdFx0aWYgKGRvbSkge1xuXHRcdFx0Ly8gbW92ZSBjaGlsZHJlbiBpbnRvIHRoZSByZXBsYWNlbWVudCBub2RlXG5cdFx0XHR3aGlsZSAoZG9tLmZpcnN0Q2hpbGQpIHtcblx0XHRcdFx0b3V0LmFwcGVuZENoaWxkKGRvbS5maXJzdENoaWxkKTtcblx0XHRcdH0gLy8gaWYgdGhlIHByZXZpb3VzIEVsZW1lbnQgd2FzIG1vdW50ZWQgaW50byB0aGUgRE9NLCByZXBsYWNlIGl0IGlubGluZVxuXHRcdFx0aWYgKGRvbS5wYXJlbnROb2RlKSBkb20ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQob3V0LCBkb20pO1xuXG5cdFx0XHQvLyByZWN5Y2xlIHRoZSBvbGQgZWxlbWVudCAoc2tpcHMgbm9uLUVsZW1lbnQgbm9kZSB0eXBlcylcblx0XHRcdHJlY29sbGVjdE5vZGVUcmVlKGRvbSwgdHJ1ZSk7XG5cdFx0fVxuXHR9XG5cblx0dmFyIGZjID0gb3V0LmZpcnN0Q2hpbGQsXG5cdCAgICBwcm9wcyA9IG91dFsnX19wcmVhY3RhdHRyXyddLFxuXHQgICAgdmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG5cblx0aWYgKHByb3BzID09IG51bGwpIHtcblx0XHRwcm9wcyA9IG91dFsnX19wcmVhY3RhdHRyXyddID0ge307XG5cdFx0Zm9yICh2YXIgYSA9IG91dC5hdHRyaWJ1dGVzLCBpID0gYS5sZW5ndGg7IGktLTspIHtcblx0XHRcdHByb3BzW2FbaV0ubmFtZV0gPSBhW2ldLnZhbHVlO1xuXHRcdH1cblx0fVxuXG5cdC8vIE9wdGltaXphdGlvbjogZmFzdC1wYXRoIGZvciBlbGVtZW50cyBjb250YWluaW5nIGEgc2luZ2xlIFRleHROb2RlOlxuXHRpZiAoIWh5ZHJhdGluZyAmJiB2Y2hpbGRyZW4gJiYgdmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgdmNoaWxkcmVuWzBdID09PSAnc3RyaW5nJyAmJiBmYyAhPSBudWxsICYmIGZjLnNwbGl0VGV4dCAhPT0gdW5kZWZpbmVkICYmIGZjLm5leHRTaWJsaW5nID09IG51bGwpIHtcblx0XHRpZiAoZmMubm9kZVZhbHVlICE9IHZjaGlsZHJlblswXSkge1xuXHRcdFx0ZmMubm9kZVZhbHVlID0gdmNoaWxkcmVuWzBdO1xuXHRcdH1cblx0fVxuXHQvLyBvdGhlcndpc2UsIGlmIHRoZXJlIGFyZSBleGlzdGluZyBvciBuZXcgY2hpbGRyZW4sIGRpZmYgdGhlbTpcblx0ZWxzZSBpZiAodmNoaWxkcmVuICYmIHZjaGlsZHJlbi5sZW5ndGggfHwgZmMgIT0gbnVsbCkge1xuXHRcdFx0aW5uZXJEaWZmTm9kZShvdXQsIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwsIGh5ZHJhdGluZyB8fCBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCAhPSBudWxsKTtcblx0XHR9XG5cblx0Ly8gQXBwbHkgYXR0cmlidXRlcy9wcm9wcyBmcm9tIFZOb2RlIHRvIHRoZSBET00gRWxlbWVudDpcblx0ZGlmZkF0dHJpYnV0ZXMob3V0LCB2bm9kZS5hdHRyaWJ1dGVzLCBwcm9wcyk7XG5cblx0Ly8gcmVzdG9yZSBwcmV2aW91cyBTVkcgbW9kZTogKGluIGNhc2Ugd2UncmUgZXhpdGluZyBhbiBTVkcgbmFtZXNwYWNlKVxuXHRpc1N2Z01vZGUgPSBwcmV2U3ZnTW9kZTtcblxuXHRyZXR1cm4gb3V0O1xufVxuXG4vKiogQXBwbHkgY2hpbGQgYW5kIGF0dHJpYnV0ZSBjaGFuZ2VzIGJldHdlZW4gYSBWTm9kZSBhbmQgYSBET00gTm9kZSB0byB0aGUgRE9NLlxuICpcdEBwYXJhbSB7RWxlbWVudH0gZG9tXHRcdFx0RWxlbWVudCB3aG9zZSBjaGlsZHJlbiBzaG91bGQgYmUgY29tcGFyZWQgJiBtdXRhdGVkXG4gKlx0QHBhcmFtIHtBcnJheX0gdmNoaWxkcmVuXHRcdEFycmF5IG9mIFZOb2RlcyB0byBjb21wYXJlIHRvIGBkb20uY2hpbGROb2Rlc2BcbiAqXHRAcGFyYW0ge09iamVjdH0gY29udGV4dFx0XHRcdEltcGxpY2l0bHkgZGVzY2VuZGFudCBjb250ZXh0IG9iamVjdCAoZnJvbSBtb3N0IHJlY2VudCBgZ2V0Q2hpbGRDb250ZXh0KClgKVxuICpcdEBwYXJhbSB7Qm9vbGVhbn0gbW91bnRBbGxcbiAqXHRAcGFyYW0ge0Jvb2xlYW59IGlzSHlkcmF0aW5nXHRJZiBgdHJ1ZWAsIGNvbnN1bWVzIGV4dGVybmFsbHkgY3JlYXRlZCBlbGVtZW50cyBzaW1pbGFyIHRvIGh5ZHJhdGlvblxuICovXG5mdW5jdGlvbiBpbm5lckRpZmZOb2RlKGRvbSwgdmNoaWxkcmVuLCBjb250ZXh0LCBtb3VudEFsbCwgaXNIeWRyYXRpbmcpIHtcblx0dmFyIG9yaWdpbmFsQ2hpbGRyZW4gPSBkb20uY2hpbGROb2Rlcyxcblx0ICAgIGNoaWxkcmVuID0gW10sXG5cdCAgICBrZXllZCA9IHt9LFxuXHQgICAga2V5ZWRMZW4gPSAwLFxuXHQgICAgbWluID0gMCxcblx0ICAgIGxlbiA9IG9yaWdpbmFsQ2hpbGRyZW4ubGVuZ3RoLFxuXHQgICAgY2hpbGRyZW5MZW4gPSAwLFxuXHQgICAgdmxlbiA9IHZjaGlsZHJlbiA/IHZjaGlsZHJlbi5sZW5ndGggOiAwLFxuXHQgICAgaixcblx0ICAgIGMsXG5cdCAgICBmLFxuXHQgICAgdmNoaWxkLFxuXHQgICAgY2hpbGQ7XG5cblx0Ly8gQnVpbGQgdXAgYSBtYXAgb2Yga2V5ZWQgY2hpbGRyZW4gYW5kIGFuIEFycmF5IG9mIHVua2V5ZWQgY2hpbGRyZW46XG5cdGlmIChsZW4gIT09IDApIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHR2YXIgX2NoaWxkID0gb3JpZ2luYWxDaGlsZHJlbltpXSxcblx0XHRcdCAgICBwcm9wcyA9IF9jaGlsZFsnX19wcmVhY3RhdHRyXyddLFxuXHRcdFx0ICAgIGtleSA9IHZsZW4gJiYgcHJvcHMgPyBfY2hpbGQuX2NvbXBvbmVudCA/IF9jaGlsZC5fY29tcG9uZW50Ll9fa2V5IDogcHJvcHMua2V5IDogbnVsbDtcblx0XHRcdGlmIChrZXkgIT0gbnVsbCkge1xuXHRcdFx0XHRrZXllZExlbisrO1xuXHRcdFx0XHRrZXllZFtrZXldID0gX2NoaWxkO1xuXHRcdFx0fSBlbHNlIGlmIChwcm9wcyB8fCAoX2NoaWxkLnNwbGl0VGV4dCAhPT0gdW5kZWZpbmVkID8gaXNIeWRyYXRpbmcgPyBfY2hpbGQubm9kZVZhbHVlLnRyaW0oKSA6IHRydWUgOiBpc0h5ZHJhdGluZykpIHtcblx0XHRcdFx0Y2hpbGRyZW5bY2hpbGRyZW5MZW4rK10gPSBfY2hpbGQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKHZsZW4gIT09IDApIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZsZW47IGkrKykge1xuXHRcdFx0dmNoaWxkID0gdmNoaWxkcmVuW2ldO1xuXHRcdFx0Y2hpbGQgPSBudWxsO1xuXG5cdFx0XHQvLyBhdHRlbXB0IHRvIGZpbmQgYSBub2RlIGJhc2VkIG9uIGtleSBtYXRjaGluZ1xuXHRcdFx0dmFyIGtleSA9IHZjaGlsZC5rZXk7XG5cdFx0XHRpZiAoa2V5ICE9IG51bGwpIHtcblx0XHRcdFx0aWYgKGtleWVkTGVuICYmIGtleWVkW2tleV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNoaWxkID0ga2V5ZWRba2V5XTtcblx0XHRcdFx0XHRrZXllZFtrZXldID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdGtleWVkTGVuLS07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIGF0dGVtcHQgdG8gcGx1Y2sgYSBub2RlIG9mIHRoZSBzYW1lIHR5cGUgZnJvbSB0aGUgZXhpc3RpbmcgY2hpbGRyZW5cblx0XHRcdGVsc2UgaWYgKCFjaGlsZCAmJiBtaW4gPCBjaGlsZHJlbkxlbikge1xuXHRcdFx0XHRcdGZvciAoaiA9IG1pbjsgaiA8IGNoaWxkcmVuTGVuOyBqKyspIHtcblx0XHRcdFx0XHRcdGlmIChjaGlsZHJlbltqXSAhPT0gdW5kZWZpbmVkICYmIGlzU2FtZU5vZGVUeXBlKGMgPSBjaGlsZHJlbltqXSwgdmNoaWxkLCBpc0h5ZHJhdGluZykpIHtcblx0XHRcdFx0XHRcdFx0Y2hpbGQgPSBjO1xuXHRcdFx0XHRcdFx0XHRjaGlsZHJlbltqXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0aWYgKGogPT09IGNoaWxkcmVuTGVuIC0gMSkgY2hpbGRyZW5MZW4tLTtcblx0XHRcdFx0XHRcdFx0aWYgKGogPT09IG1pbikgbWluKys7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBtb3JwaCB0aGUgbWF0Y2hlZC9mb3VuZC9jcmVhdGVkIERPTSBjaGlsZCB0byBtYXRjaCB2Y2hpbGQgKGRlZXApXG5cdFx0XHRjaGlsZCA9IGlkaWZmKGNoaWxkLCB2Y2hpbGQsIGNvbnRleHQsIG1vdW50QWxsKTtcblxuXHRcdFx0ZiA9IG9yaWdpbmFsQ2hpbGRyZW5baV07XG5cdFx0XHRpZiAoY2hpbGQgJiYgY2hpbGQgIT09IGRvbSAmJiBjaGlsZCAhPT0gZikge1xuXHRcdFx0XHRpZiAoZiA9PSBudWxsKSB7XG5cdFx0XHRcdFx0ZG9tLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaGlsZCA9PT0gZi5uZXh0U2libGluZykge1xuXHRcdFx0XHRcdHJlbW92ZU5vZGUoZik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZG9tLmluc2VydEJlZm9yZShjaGlsZCwgZik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyByZW1vdmUgdW51c2VkIGtleWVkIGNoaWxkcmVuOlxuXHRpZiAoa2V5ZWRMZW4pIHtcblx0XHRmb3IgKHZhciBpIGluIGtleWVkKSB7XG5cdFx0XHRpZiAoa2V5ZWRbaV0gIT09IHVuZGVmaW5lZCkgcmVjb2xsZWN0Tm9kZVRyZWUoa2V5ZWRbaV0sIGZhbHNlKTtcblx0XHR9XG5cdH1cblxuXHQvLyByZW1vdmUgb3JwaGFuZWQgdW5rZXllZCBjaGlsZHJlbjpcblx0d2hpbGUgKG1pbiA8PSBjaGlsZHJlbkxlbikge1xuXHRcdGlmICgoY2hpbGQgPSBjaGlsZHJlbltjaGlsZHJlbkxlbi0tXSkgIT09IHVuZGVmaW5lZCkgcmVjb2xsZWN0Tm9kZVRyZWUoY2hpbGQsIGZhbHNlKTtcblx0fVxufVxuXG4vKiogUmVjdXJzaXZlbHkgcmVjeWNsZSAob3IganVzdCB1bm1vdW50KSBhIG5vZGUgYW5kIGl0cyBkZXNjZW5kYW50cy5cbiAqXHRAcGFyYW0ge05vZGV9IG5vZGVcdFx0XHRcdFx0XHRET00gbm9kZSB0byBzdGFydCB1bm1vdW50L3JlbW92YWwgZnJvbVxuICpcdEBwYXJhbSB7Qm9vbGVhbn0gW3VubW91bnRPbmx5PWZhbHNlXVx0SWYgYHRydWVgLCBvbmx5IHRyaWdnZXJzIHVubW91bnQgbGlmZWN5Y2xlLCBza2lwcyByZW1vdmFsXG4gKi9cbmZ1bmN0aW9uIHJlY29sbGVjdE5vZGVUcmVlKG5vZGUsIHVubW91bnRPbmx5KSB7XG5cdHZhciBjb21wb25lbnQgPSBub2RlLl9jb21wb25lbnQ7XG5cdGlmIChjb21wb25lbnQpIHtcblx0XHQvLyBpZiBub2RlIGlzIG93bmVkIGJ5IGEgQ29tcG9uZW50LCB1bm1vdW50IHRoYXQgY29tcG9uZW50IChlbmRzIHVwIHJlY3Vyc2luZyBiYWNrIGhlcmUpXG5cdFx0dW5tb3VudENvbXBvbmVudChjb21wb25lbnQpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIElmIHRoZSBub2RlJ3MgVk5vZGUgaGFkIGEgcmVmIGZ1bmN0aW9uLCBpbnZva2UgaXQgd2l0aCBudWxsIGhlcmUuXG5cdFx0Ly8gKHRoaXMgaXMgcGFydCBvZiB0aGUgUmVhY3Qgc3BlYywgYW5kIHNtYXJ0IGZvciB1bnNldHRpbmcgcmVmZXJlbmNlcylcblx0XHRpZiAobm9kZVsnX19wcmVhY3RhdHRyXyddICE9IG51bGwgJiYgbm9kZVsnX19wcmVhY3RhdHRyXyddLnJlZikgbm9kZVsnX19wcmVhY3RhdHRyXyddLnJlZihudWxsKTtcblxuXHRcdGlmICh1bm1vdW50T25seSA9PT0gZmFsc2UgfHwgbm9kZVsnX19wcmVhY3RhdHRyXyddID09IG51bGwpIHtcblx0XHRcdHJlbW92ZU5vZGUobm9kZSk7XG5cdFx0fVxuXG5cdFx0cmVtb3ZlQ2hpbGRyZW4obm9kZSk7XG5cdH1cbn1cblxuLyoqIFJlY29sbGVjdC91bm1vdW50IGFsbCBjaGlsZHJlbi5cbiAqXHQtIHdlIHVzZSAubGFzdENoaWxkIGhlcmUgYmVjYXVzZSBpdCBjYXVzZXMgbGVzcyByZWZsb3cgdGhhbiAuZmlyc3RDaGlsZFxuICpcdC0gaXQncyBhbHNvIGNoZWFwZXIgdGhhbiBhY2Nlc3NpbmcgdGhlIC5jaGlsZE5vZGVzIExpdmUgTm9kZUxpc3RcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4obm9kZSkge1xuXHRub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG5cdHdoaWxlIChub2RlKSB7XG5cdFx0dmFyIG5leHQgPSBub2RlLnByZXZpb3VzU2libGluZztcblx0XHRyZWNvbGxlY3ROb2RlVHJlZShub2RlLCB0cnVlKTtcblx0XHRub2RlID0gbmV4dDtcblx0fVxufVxuXG4vKiogQXBwbHkgZGlmZmVyZW5jZXMgaW4gYXR0cmlidXRlcyBmcm9tIGEgVk5vZGUgdG8gdGhlIGdpdmVuIERPTSBFbGVtZW50LlxuICpcdEBwYXJhbSB7RWxlbWVudH0gZG9tXHRcdEVsZW1lbnQgd2l0aCBhdHRyaWJ1dGVzIHRvIGRpZmYgYGF0dHJzYCBhZ2FpbnN0XG4gKlx0QHBhcmFtIHtPYmplY3R9IGF0dHJzXHRcdFRoZSBkZXNpcmVkIGVuZC1zdGF0ZSBrZXktdmFsdWUgYXR0cmlidXRlIHBhaXJzXG4gKlx0QHBhcmFtIHtPYmplY3R9IG9sZFx0XHRcdEN1cnJlbnQvcHJldmlvdXMgYXR0cmlidXRlcyAoZnJvbSBwcmV2aW91cyBWTm9kZSBvciBlbGVtZW50J3MgcHJvcCBjYWNoZSlcbiAqL1xuZnVuY3Rpb24gZGlmZkF0dHJpYnV0ZXMoZG9tLCBhdHRycywgb2xkKSB7XG5cdHZhciBuYW1lO1xuXG5cdC8vIHJlbW92ZSBhdHRyaWJ1dGVzIG5vIGxvbmdlciBwcmVzZW50IG9uIHRoZSB2bm9kZSBieSBzZXR0aW5nIHRoZW0gdG8gdW5kZWZpbmVkXG5cdGZvciAobmFtZSBpbiBvbGQpIHtcblx0XHRpZiAoIShhdHRycyAmJiBhdHRyc1tuYW1lXSAhPSBudWxsKSAmJiBvbGRbbmFtZV0gIT0gbnVsbCkge1xuXHRcdFx0c2V0QWNjZXNzb3IoZG9tLCBuYW1lLCBvbGRbbmFtZV0sIG9sZFtuYW1lXSA9IHVuZGVmaW5lZCwgaXNTdmdNb2RlKTtcblx0XHR9XG5cdH1cblxuXHQvLyBhZGQgbmV3ICYgdXBkYXRlIGNoYW5nZWQgYXR0cmlidXRlc1xuXHRmb3IgKG5hbWUgaW4gYXR0cnMpIHtcblx0XHRpZiAobmFtZSAhPT0gJ2NoaWxkcmVuJyAmJiBuYW1lICE9PSAnaW5uZXJIVE1MJyAmJiAoIShuYW1lIGluIG9sZCkgfHwgYXR0cnNbbmFtZV0gIT09IChuYW1lID09PSAndmFsdWUnIHx8IG5hbWUgPT09ICdjaGVja2VkJyA/IGRvbVtuYW1lXSA6IG9sZFtuYW1lXSkpKSB7XG5cdFx0XHRzZXRBY2Nlc3Nvcihkb20sIG5hbWUsIG9sZFtuYW1lXSwgb2xkW25hbWVdID0gYXR0cnNbbmFtZV0sIGlzU3ZnTW9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKiBSZXRhaW5zIGEgcG9vbCBvZiBDb21wb25lbnRzIGZvciByZS11c2UsIGtleWVkIG9uIGNvbXBvbmVudCBuYW1lLlxuICpcdE5vdGU6IHNpbmNlIGNvbXBvbmVudCBuYW1lcyBhcmUgbm90IHVuaXF1ZSBvciBldmVuIG5lY2Vzc2FyaWx5IGF2YWlsYWJsZSwgdGhlc2UgYXJlIHByaW1hcmlseSBhIGZvcm0gb2Ygc2hhcmRpbmcuXG4gKlx0QHByaXZhdGVcbiAqL1xudmFyIGNvbXBvbmVudHMgPSB7fTtcblxuLyoqIFJlY2xhaW0gYSBjb21wb25lbnQgZm9yIGxhdGVyIHJlLXVzZSBieSB0aGUgcmVjeWNsZXIuICovXG5mdW5jdGlvbiBjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCkge1xuXHR2YXIgbmFtZSA9IGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5uYW1lO1xuXHQoY29tcG9uZW50c1tuYW1lXSB8fCAoY29tcG9uZW50c1tuYW1lXSA9IFtdKSkucHVzaChjb21wb25lbnQpO1xufVxuXG4vKiogQ3JlYXRlIGEgY29tcG9uZW50LiBOb3JtYWxpemVzIGRpZmZlcmVuY2VzIGJldHdlZW4gUEZDJ3MgYW5kIGNsYXNzZnVsIENvbXBvbmVudHMuICovXG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnQoQ3RvciwgcHJvcHMsIGNvbnRleHQpIHtcblx0dmFyIGxpc3QgPSBjb21wb25lbnRzW0N0b3IubmFtZV0sXG5cdCAgICBpbnN0O1xuXG5cdGlmIChDdG9yLnByb3RvdHlwZSAmJiBDdG9yLnByb3RvdHlwZS5yZW5kZXIpIHtcblx0XHRpbnN0ID0gbmV3IEN0b3IocHJvcHMsIGNvbnRleHQpO1xuXHRcdENvbXBvbmVudC5jYWxsKGluc3QsIHByb3BzLCBjb250ZXh0KTtcblx0fSBlbHNlIHtcblx0XHRpbnN0ID0gbmV3IENvbXBvbmVudChwcm9wcywgY29udGV4dCk7XG5cdFx0aW5zdC5jb25zdHJ1Y3RvciA9IEN0b3I7XG5cdFx0aW5zdC5yZW5kZXIgPSBkb1JlbmRlcjtcblx0fVxuXG5cdGlmIChsaXN0KSB7XG5cdFx0Zm9yICh2YXIgaSA9IGxpc3QubGVuZ3RoOyBpLS07KSB7XG5cdFx0XHRpZiAobGlzdFtpXS5jb25zdHJ1Y3RvciA9PT0gQ3Rvcikge1xuXHRcdFx0XHRpbnN0Lm5leHRCYXNlID0gbGlzdFtpXS5uZXh0QmFzZTtcblx0XHRcdFx0bGlzdC5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gaW5zdDtcbn1cblxuLyoqIFRoZSBgLnJlbmRlcigpYCBtZXRob2QgZm9yIGEgUEZDIGJhY2tpbmcgaW5zdGFuY2UuICovXG5mdW5jdGlvbiBkb1JlbmRlcihwcm9wcywgc3RhdGUsIGNvbnRleHQpIHtcblx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpO1xufVxuXG4vKiogU2V0IGEgY29tcG9uZW50J3MgYHByb3BzYCAoZ2VuZXJhbGx5IGRlcml2ZWQgZnJvbSBKU1ggYXR0cmlidXRlcykuXG4gKlx0QHBhcmFtIHtPYmplY3R9IHByb3BzXG4gKlx0QHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICpcdEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMucmVuZGVyU3luYz1mYWxzZV1cdElmIGB0cnVlYCBhbmQge0BsaW5rIG9wdGlvbnMuc3luY0NvbXBvbmVudFVwZGF0ZXN9IGlzIGB0cnVlYCwgdHJpZ2dlcnMgc3luY2hyb25vdXMgcmVuZGVyaW5nLlxuICpcdEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMucmVuZGVyPXRydWVdXHRcdFx0SWYgYGZhbHNlYCwgbm8gcmVuZGVyIHdpbGwgYmUgdHJpZ2dlcmVkLlxuICovXG5mdW5jdGlvbiBzZXRDb21wb25lbnRQcm9wcyhjb21wb25lbnQsIHByb3BzLCBvcHRzLCBjb250ZXh0LCBtb3VudEFsbCkge1xuXHRpZiAoY29tcG9uZW50Ll9kaXNhYmxlKSByZXR1cm47XG5cdGNvbXBvbmVudC5fZGlzYWJsZSA9IHRydWU7XG5cblx0aWYgKGNvbXBvbmVudC5fX3JlZiA9IHByb3BzLnJlZikgZGVsZXRlIHByb3BzLnJlZjtcblx0aWYgKGNvbXBvbmVudC5fX2tleSA9IHByb3BzLmtleSkgZGVsZXRlIHByb3BzLmtleTtcblxuXHRpZiAoIWNvbXBvbmVudC5iYXNlIHx8IG1vdW50QWxsKSB7XG5cdFx0aWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsTW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsTW91bnQoKTtcblx0fSBlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykge1xuXHRcdGNvbXBvbmVudC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKHByb3BzLCBjb250ZXh0KTtcblx0fVxuXG5cdGlmIChjb250ZXh0ICYmIGNvbnRleHQgIT09IGNvbXBvbmVudC5jb250ZXh0KSB7XG5cdFx0aWYgKCFjb21wb25lbnQucHJldkNvbnRleHQpIGNvbXBvbmVudC5wcmV2Q29udGV4dCA9IGNvbXBvbmVudC5jb250ZXh0O1xuXHRcdGNvbXBvbmVudC5jb250ZXh0ID0gY29udGV4dDtcblx0fVxuXG5cdGlmICghY29tcG9uZW50LnByZXZQcm9wcykgY29tcG9uZW50LnByZXZQcm9wcyA9IGNvbXBvbmVudC5wcm9wcztcblx0Y29tcG9uZW50LnByb3BzID0gcHJvcHM7XG5cblx0Y29tcG9uZW50Ll9kaXNhYmxlID0gZmFsc2U7XG5cblx0aWYgKG9wdHMgIT09IDApIHtcblx0XHRpZiAob3B0cyA9PT0gMSB8fCBvcHRpb25zLnN5bmNDb21wb25lbnRVcGRhdGVzICE9PSBmYWxzZSB8fCAhY29tcG9uZW50LmJhc2UpIHtcblx0XHRcdHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIDEsIG1vdW50QWxsKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZW5xdWV1ZVJlbmRlcihjb21wb25lbnQpO1xuXHRcdH1cblx0fVxuXG5cdGlmIChjb21wb25lbnQuX19yZWYpIGNvbXBvbmVudC5fX3JlZihjb21wb25lbnQpO1xufVxuXG4vKiogUmVuZGVyIGEgQ29tcG9uZW50LCB0cmlnZ2VyaW5nIG5lY2Vzc2FyeSBsaWZlY3ljbGUgZXZlbnRzIGFuZCB0YWtpbmcgSGlnaC1PcmRlciBDb21wb25lbnRzIGludG8gYWNjb3VudC5cbiAqXHRAcGFyYW0ge0NvbXBvbmVudH0gY29tcG9uZW50XG4gKlx0QHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICpcdEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuYnVpbGQ9ZmFsc2VdXHRcdElmIGB0cnVlYCwgY29tcG9uZW50IHdpbGwgYnVpbGQgYW5kIHN0b3JlIGEgRE9NIG5vZGUgaWYgbm90IGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIG9uZS5cbiAqXHRAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZW5kZXJDb21wb25lbnQoY29tcG9uZW50LCBvcHRzLCBtb3VudEFsbCwgaXNDaGlsZCkge1xuXHRpZiAoY29tcG9uZW50Ll9kaXNhYmxlKSByZXR1cm47XG5cblx0dmFyIHByb3BzID0gY29tcG9uZW50LnByb3BzLFxuXHQgICAgc3RhdGUgPSBjb21wb25lbnQuc3RhdGUsXG5cdCAgICBjb250ZXh0ID0gY29tcG9uZW50LmNvbnRleHQsXG5cdCAgICBwcmV2aW91c1Byb3BzID0gY29tcG9uZW50LnByZXZQcm9wcyB8fCBwcm9wcyxcblx0ICAgIHByZXZpb3VzU3RhdGUgPSBjb21wb25lbnQucHJldlN0YXRlIHx8IHN0YXRlLFxuXHQgICAgcHJldmlvdXNDb250ZXh0ID0gY29tcG9uZW50LnByZXZDb250ZXh0IHx8IGNvbnRleHQsXG5cdCAgICBpc1VwZGF0ZSA9IGNvbXBvbmVudC5iYXNlLFxuXHQgICAgbmV4dEJhc2UgPSBjb21wb25lbnQubmV4dEJhc2UsXG5cdCAgICBpbml0aWFsQmFzZSA9IGlzVXBkYXRlIHx8IG5leHRCYXNlLFxuXHQgICAgaW5pdGlhbENoaWxkQ29tcG9uZW50ID0gY29tcG9uZW50Ll9jb21wb25lbnQsXG5cdCAgICBza2lwID0gZmFsc2UsXG5cdCAgICByZW5kZXJlZCxcblx0ICAgIGluc3QsXG5cdCAgICBjYmFzZTtcblxuXHQvLyBpZiB1cGRhdGluZ1xuXHRpZiAoaXNVcGRhdGUpIHtcblx0XHRjb21wb25lbnQucHJvcHMgPSBwcmV2aW91c1Byb3BzO1xuXHRcdGNvbXBvbmVudC5zdGF0ZSA9IHByZXZpb3VzU3RhdGU7XG5cdFx0Y29tcG9uZW50LmNvbnRleHQgPSBwcmV2aW91c0NvbnRleHQ7XG5cdFx0aWYgKG9wdHMgIT09IDIgJiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZSAmJiBjb21wb25lbnQuc2hvdWxkQ29tcG9uZW50VXBkYXRlKHByb3BzLCBzdGF0ZSwgY29udGV4dCkgPT09IGZhbHNlKSB7XG5cdFx0XHRza2lwID0gdHJ1ZTtcblx0XHR9IGVsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsVXBkYXRlKSB7XG5cdFx0XHRjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpO1xuXHRcdH1cblx0XHRjb21wb25lbnQucHJvcHMgPSBwcm9wcztcblx0XHRjb21wb25lbnQuc3RhdGUgPSBzdGF0ZTtcblx0XHRjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7XG5cdH1cblxuXHRjb21wb25lbnQucHJldlByb3BzID0gY29tcG9uZW50LnByZXZTdGF0ZSA9IGNvbXBvbmVudC5wcmV2Q29udGV4dCA9IGNvbXBvbmVudC5uZXh0QmFzZSA9IG51bGw7XG5cdGNvbXBvbmVudC5fZGlydHkgPSBmYWxzZTtcblxuXHRpZiAoIXNraXApIHtcblx0XHRyZW5kZXJlZCA9IGNvbXBvbmVudC5yZW5kZXIocHJvcHMsIHN0YXRlLCBjb250ZXh0KTtcblxuXHRcdC8vIGNvbnRleHQgdG8gcGFzcyB0byB0aGUgY2hpbGQsIGNhbiBiZSB1cGRhdGVkIHZpYSAoZ3JhbmQtKXBhcmVudCBjb21wb25lbnRcblx0XHRpZiAoY29tcG9uZW50LmdldENoaWxkQ29udGV4dCkge1xuXHRcdFx0Y29udGV4dCA9IGV4dGVuZChleHRlbmQoe30sIGNvbnRleHQpLCBjb21wb25lbnQuZ2V0Q2hpbGRDb250ZXh0KCkpO1xuXHRcdH1cblxuXHRcdHZhciBjaGlsZENvbXBvbmVudCA9IHJlbmRlcmVkICYmIHJlbmRlcmVkLm5vZGVOYW1lLFxuXHRcdCAgICB0b1VubW91bnQsXG5cdFx0ICAgIGJhc2U7XG5cblx0XHRpZiAodHlwZW9mIGNoaWxkQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHQvLyBzZXQgdXAgaGlnaCBvcmRlciBjb21wb25lbnQgbGlua1xuXG5cdFx0XHR2YXIgY2hpbGRQcm9wcyA9IGdldE5vZGVQcm9wcyhyZW5kZXJlZCk7XG5cdFx0XHRpbnN0ID0gaW5pdGlhbENoaWxkQ29tcG9uZW50O1xuXG5cdFx0XHRpZiAoaW5zdCAmJiBpbnN0LmNvbnN0cnVjdG9yID09PSBjaGlsZENvbXBvbmVudCAmJiBjaGlsZFByb3BzLmtleSA9PSBpbnN0Ll9fa2V5KSB7XG5cdFx0XHRcdHNldENvbXBvbmVudFByb3BzKGluc3QsIGNoaWxkUHJvcHMsIDEsIGNvbnRleHQsIGZhbHNlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRvVW5tb3VudCA9IGluc3Q7XG5cblx0XHRcdFx0Y29tcG9uZW50Ll9jb21wb25lbnQgPSBpbnN0ID0gY3JlYXRlQ29tcG9uZW50KGNoaWxkQ29tcG9uZW50LCBjaGlsZFByb3BzLCBjb250ZXh0KTtcblx0XHRcdFx0aW5zdC5uZXh0QmFzZSA9IGluc3QubmV4dEJhc2UgfHwgbmV4dEJhc2U7XG5cdFx0XHRcdGluc3QuX3BhcmVudENvbXBvbmVudCA9IGNvbXBvbmVudDtcblx0XHRcdFx0c2V0Q29tcG9uZW50UHJvcHMoaW5zdCwgY2hpbGRQcm9wcywgMCwgY29udGV4dCwgZmFsc2UpO1xuXHRcdFx0XHRyZW5kZXJDb21wb25lbnQoaW5zdCwgMSwgbW91bnRBbGwsIHRydWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRiYXNlID0gaW5zdC5iYXNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYmFzZSA9IGluaXRpYWxCYXNlO1xuXG5cdFx0XHQvLyBkZXN0cm95IGhpZ2ggb3JkZXIgY29tcG9uZW50IGxpbmtcblx0XHRcdHRvVW5tb3VudCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDtcblx0XHRcdGlmICh0b1VubW91bnQpIHtcblx0XHRcdFx0Y2Jhc2UgPSBjb21wb25lbnQuX2NvbXBvbmVudCA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpbml0aWFsQmFzZSB8fCBvcHRzID09PSAxKSB7XG5cdFx0XHRcdGlmIChjYmFzZSkgY2Jhc2UuX2NvbXBvbmVudCA9IG51bGw7XG5cdFx0XHRcdGJhc2UgPSBkaWZmKGNiYXNlLCByZW5kZXJlZCwgY29udGV4dCwgbW91bnRBbGwgfHwgIWlzVXBkYXRlLCBpbml0aWFsQmFzZSAmJiBpbml0aWFsQmFzZS5wYXJlbnROb2RlLCB0cnVlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoaW5pdGlhbEJhc2UgJiYgYmFzZSAhPT0gaW5pdGlhbEJhc2UgJiYgaW5zdCAhPT0gaW5pdGlhbENoaWxkQ29tcG9uZW50KSB7XG5cdFx0XHR2YXIgYmFzZVBhcmVudCA9IGluaXRpYWxCYXNlLnBhcmVudE5vZGU7XG5cdFx0XHRpZiAoYmFzZVBhcmVudCAmJiBiYXNlICE9PSBiYXNlUGFyZW50KSB7XG5cdFx0XHRcdGJhc2VQYXJlbnQucmVwbGFjZUNoaWxkKGJhc2UsIGluaXRpYWxCYXNlKTtcblxuXHRcdFx0XHRpZiAoIXRvVW5tb3VudCkge1xuXHRcdFx0XHRcdGluaXRpYWxCYXNlLl9jb21wb25lbnQgPSBudWxsO1xuXHRcdFx0XHRcdHJlY29sbGVjdE5vZGVUcmVlKGluaXRpYWxCYXNlLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodG9Vbm1vdW50KSB7XG5cdFx0XHR1bm1vdW50Q29tcG9uZW50KHRvVW5tb3VudCk7XG5cdFx0fVxuXG5cdFx0Y29tcG9uZW50LmJhc2UgPSBiYXNlO1xuXHRcdGlmIChiYXNlICYmICFpc0NoaWxkKSB7XG5cdFx0XHR2YXIgY29tcG9uZW50UmVmID0gY29tcG9uZW50LFxuXHRcdFx0ICAgIHQgPSBjb21wb25lbnQ7XG5cdFx0XHR3aGlsZSAodCA9IHQuX3BhcmVudENvbXBvbmVudCkge1xuXHRcdFx0XHQoY29tcG9uZW50UmVmID0gdCkuYmFzZSA9IGJhc2U7XG5cdFx0XHR9XG5cdFx0XHRiYXNlLl9jb21wb25lbnQgPSBjb21wb25lbnRSZWY7XG5cdFx0XHRiYXNlLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9IGNvbXBvbmVudFJlZi5jb25zdHJ1Y3Rvcjtcblx0XHR9XG5cdH1cblxuXHRpZiAoIWlzVXBkYXRlIHx8IG1vdW50QWxsKSB7XG5cdFx0bW91bnRzLnVuc2hpZnQoY29tcG9uZW50KTtcblx0fSBlbHNlIGlmICghc2tpcCkge1xuXHRcdC8vIEVuc3VyZSB0aGF0IHBlbmRpbmcgY29tcG9uZW50RGlkTW91bnQoKSBob29rcyBvZiBjaGlsZCBjb21wb25lbnRzXG5cdFx0Ly8gYXJlIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudERpZFVwZGF0ZSgpIGhvb2sgaW4gdGhlIHBhcmVudC5cblx0XHQvLyBOb3RlOiBkaXNhYmxlZCBhcyBpdCBjYXVzZXMgZHVwbGljYXRlIGhvb2tzLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2RldmVsb3BpdC9wcmVhY3QvaXNzdWVzLzc1MFxuXHRcdC8vIGZsdXNoTW91bnRzKCk7XG5cblx0XHRpZiAoY29tcG9uZW50LmNvbXBvbmVudERpZFVwZGF0ZSkge1xuXHRcdFx0Y29tcG9uZW50LmNvbXBvbmVudERpZFVwZGF0ZShwcmV2aW91c1Byb3BzLCBwcmV2aW91c1N0YXRlLCBwcmV2aW91c0NvbnRleHQpO1xuXHRcdH1cblx0XHRpZiAob3B0aW9ucy5hZnRlclVwZGF0ZSkgb3B0aW9ucy5hZnRlclVwZGF0ZShjb21wb25lbnQpO1xuXHR9XG5cblx0aWYgKGNvbXBvbmVudC5fcmVuZGVyQ2FsbGJhY2tzICE9IG51bGwpIHtcblx0XHR3aGlsZSAoY29tcG9uZW50Ll9yZW5kZXJDYWxsYmFja3MubGVuZ3RoKSB7XG5cdFx0XHRjb21wb25lbnQuX3JlbmRlckNhbGxiYWNrcy5wb3AoKS5jYWxsKGNvbXBvbmVudCk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCFkaWZmTGV2ZWwgJiYgIWlzQ2hpbGQpIGZsdXNoTW91bnRzKCk7XG59XG5cbi8qKiBBcHBseSB0aGUgQ29tcG9uZW50IHJlZmVyZW5jZWQgYnkgYSBWTm9kZSB0byB0aGUgRE9NLlxuICpcdEBwYXJhbSB7RWxlbWVudH0gZG9tXHRUaGUgRE9NIG5vZGUgdG8gbXV0YXRlXG4gKlx0QHBhcmFtIHtWTm9kZX0gdm5vZGVcdEEgQ29tcG9uZW50LXJlZmVyZW5jaW5nIFZOb2RlXG4gKlx0QHJldHVybnMge0VsZW1lbnR9IGRvbVx0VGhlIGNyZWF0ZWQvbXV0YXRlZCBlbGVtZW50XG4gKlx0QHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpIHtcblx0dmFyIGMgPSBkb20gJiYgZG9tLl9jb21wb25lbnQsXG5cdCAgICBvcmlnaW5hbENvbXBvbmVudCA9IGMsXG5cdCAgICBvbGREb20gPSBkb20sXG5cdCAgICBpc0RpcmVjdE93bmVyID0gYyAmJiBkb20uX2NvbXBvbmVudENvbnN0cnVjdG9yID09PSB2bm9kZS5ub2RlTmFtZSxcblx0ICAgIGlzT3duZXIgPSBpc0RpcmVjdE93bmVyLFxuXHQgICAgcHJvcHMgPSBnZXROb2RlUHJvcHModm5vZGUpO1xuXHR3aGlsZSAoYyAmJiAhaXNPd25lciAmJiAoYyA9IGMuX3BhcmVudENvbXBvbmVudCkpIHtcblx0XHRpc093bmVyID0gYy5jb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWU7XG5cdH1cblxuXHRpZiAoYyAmJiBpc093bmVyICYmICghbW91bnRBbGwgfHwgYy5fY29tcG9uZW50KSkge1xuXHRcdHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAzLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdFx0ZG9tID0gYy5iYXNlO1xuXHR9IGVsc2Uge1xuXHRcdGlmIChvcmlnaW5hbENvbXBvbmVudCAmJiAhaXNEaXJlY3RPd25lcikge1xuXHRcdFx0dW5tb3VudENvbXBvbmVudChvcmlnaW5hbENvbXBvbmVudCk7XG5cdFx0XHRkb20gPSBvbGREb20gPSBudWxsO1xuXHRcdH1cblxuXHRcdGMgPSBjcmVhdGVDb21wb25lbnQodm5vZGUubm9kZU5hbWUsIHByb3BzLCBjb250ZXh0KTtcblx0XHRpZiAoZG9tICYmICFjLm5leHRCYXNlKSB7XG5cdFx0XHRjLm5leHRCYXNlID0gZG9tO1xuXHRcdFx0Ly8gcGFzc2luZyBkb20vb2xkRG9tIGFzIG5leHRCYXNlIHdpbGwgcmVjeWNsZSBpdCBpZiB1bnVzZWQsIHNvIGJ5cGFzcyByZWN5Y2xpbmcgb24gTDIyOTpcblx0XHRcdG9sZERvbSA9IG51bGw7XG5cdFx0fVxuXHRcdHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAxLCBjb250ZXh0LCBtb3VudEFsbCk7XG5cdFx0ZG9tID0gYy5iYXNlO1xuXG5cdFx0aWYgKG9sZERvbSAmJiBkb20gIT09IG9sZERvbSkge1xuXHRcdFx0b2xkRG9tLl9jb21wb25lbnQgPSBudWxsO1xuXHRcdFx0cmVjb2xsZWN0Tm9kZVRyZWUob2xkRG9tLCBmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGRvbTtcbn1cblxuLyoqIFJlbW92ZSBhIGNvbXBvbmVudCBmcm9tIHRoZSBET00gYW5kIHJlY3ljbGUgaXQuXG4gKlx0QHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudFx0VGhlIENvbXBvbmVudCBpbnN0YW5jZSB0byB1bm1vdW50XG4gKlx0QHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdW5tb3VudENvbXBvbmVudChjb21wb25lbnQpIHtcblx0aWYgKG9wdGlvbnMuYmVmb3JlVW5tb3VudCkgb3B0aW9ucy5iZWZvcmVVbm1vdW50KGNvbXBvbmVudCk7XG5cblx0dmFyIGJhc2UgPSBjb21wb25lbnQuYmFzZTtcblxuXHRjb21wb25lbnQuX2Rpc2FibGUgPSB0cnVlO1xuXG5cdGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuXG5cdGNvbXBvbmVudC5iYXNlID0gbnVsbDtcblxuXHQvLyByZWN1cnNpdmVseSB0ZWFyIGRvd24gJiByZWNvbGxlY3QgaGlnaC1vcmRlciBjb21wb25lbnQgY2hpbGRyZW46XG5cdHZhciBpbm5lciA9IGNvbXBvbmVudC5fY29tcG9uZW50O1xuXHRpZiAoaW5uZXIpIHtcblx0XHR1bm1vdW50Q29tcG9uZW50KGlubmVyKTtcblx0fSBlbHNlIGlmIChiYXNlKSB7XG5cdFx0aWYgKGJhc2VbJ19fcHJlYWN0YXR0cl8nXSAmJiBiYXNlWydfX3ByZWFjdGF0dHJfJ10ucmVmKSBiYXNlWydfX3ByZWFjdGF0dHJfJ10ucmVmKG51bGwpO1xuXG5cdFx0Y29tcG9uZW50Lm5leHRCYXNlID0gYmFzZTtcblxuXHRcdHJlbW92ZU5vZGUoYmFzZSk7XG5cdFx0Y29sbGVjdENvbXBvbmVudChjb21wb25lbnQpO1xuXG5cdFx0cmVtb3ZlQ2hpbGRyZW4oYmFzZSk7XG5cdH1cblxuXHRpZiAoY29tcG9uZW50Ll9fcmVmKSBjb21wb25lbnQuX19yZWYobnVsbCk7XG59XG5cbi8qKiBCYXNlIENvbXBvbmVudCBjbGFzcy5cbiAqXHRQcm92aWRlcyBgc2V0U3RhdGUoKWAgYW5kIGBmb3JjZVVwZGF0ZSgpYCwgd2hpY2ggdHJpZ2dlciByZW5kZXJpbmcuXG4gKlx0QHB1YmxpY1xuICpcbiAqXHRAZXhhbXBsZVxuICpcdGNsYXNzIE15Rm9vIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAqXHRcdHJlbmRlcihwcm9wcywgc3RhdGUpIHtcbiAqXHRcdFx0cmV0dXJuIDxkaXYgLz47XG4gKlx0XHR9XG4gKlx0fVxuICovXG5mdW5jdGlvbiBDb21wb25lbnQocHJvcHMsIGNvbnRleHQpIHtcblx0dGhpcy5fZGlydHkgPSB0cnVlO1xuXG5cdC8qKiBAcHVibGljXG4gICpcdEB0eXBlIHtvYmplY3R9XG4gICovXG5cdHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cblx0LyoqIEBwdWJsaWNcbiAgKlx0QHR5cGUge29iamVjdH1cbiAgKi9cblx0dGhpcy5wcm9wcyA9IHByb3BzO1xuXG5cdC8qKiBAcHVibGljXG4gICpcdEB0eXBlIHtvYmplY3R9XG4gICovXG5cdHRoaXMuc3RhdGUgPSB0aGlzLnN0YXRlIHx8IHt9O1xufVxuXG5leHRlbmQoQ29tcG9uZW50LnByb3RvdHlwZSwge1xuXG5cdC8qKiBSZXR1cm5zIGEgYGJvb2xlYW5gIGluZGljYXRpbmcgaWYgdGhlIGNvbXBvbmVudCBzaG91bGQgcmUtcmVuZGVyIHdoZW4gcmVjZWl2aW5nIHRoZSBnaXZlbiBgcHJvcHNgIGFuZCBgc3RhdGVgLlxuICAqXHRAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICpcdEBwYXJhbSB7b2JqZWN0fSBuZXh0U3RhdGVcbiAgKlx0QHBhcmFtIHtvYmplY3R9IG5leHRDb250ZXh0XG4gICpcdEByZXR1cm5zIHtCb29sZWFufSBzaG91bGQgdGhlIGNvbXBvbmVudCByZS1yZW5kZXJcbiAgKlx0QG5hbWUgc2hvdWxkQ29tcG9uZW50VXBkYXRlXG4gICpcdEBmdW5jdGlvblxuICAqL1xuXG5cdC8qKiBVcGRhdGUgY29tcG9uZW50IHN0YXRlIGJ5IGNvcHlpbmcgcHJvcGVydGllcyBmcm9tIGBzdGF0ZWAgdG8gYHRoaXMuc3RhdGVgLlxuICAqXHRAcGFyYW0ge29iamVjdH0gc3RhdGVcdFx0QSBoYXNoIG9mIHN0YXRlIHByb3BlcnRpZXMgdG8gdXBkYXRlIHdpdGggbmV3IHZhbHVlc1xuICAqXHRAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1x0QSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb25jZSBjb21wb25lbnQgc3RhdGUgaXMgdXBkYXRlZFxuICAqL1xuXHRzZXRTdGF0ZTogZnVuY3Rpb24gc2V0U3RhdGUoc3RhdGUsIGNhbGxiYWNrKSB7XG5cdFx0dmFyIHMgPSB0aGlzLnN0YXRlO1xuXHRcdGlmICghdGhpcy5wcmV2U3RhdGUpIHRoaXMucHJldlN0YXRlID0gZXh0ZW5kKHt9LCBzKTtcblx0XHRleHRlbmQocywgdHlwZW9mIHN0YXRlID09PSAnZnVuY3Rpb24nID8gc3RhdGUocywgdGhpcy5wcm9wcykgOiBzdGF0ZSk7XG5cdFx0aWYgKGNhbGxiYWNrKSAodGhpcy5fcmVuZGVyQ2FsbGJhY2tzID0gdGhpcy5fcmVuZGVyQ2FsbGJhY2tzIHx8IFtdKS5wdXNoKGNhbGxiYWNrKTtcblx0XHRlbnF1ZXVlUmVuZGVyKHRoaXMpO1xuXHR9LFxuXG5cblx0LyoqIEltbWVkaWF0ZWx5IHBlcmZvcm0gYSBzeW5jaHJvbm91cyByZS1yZW5kZXIgb2YgdGhlIGNvbXBvbmVudC5cbiAgKlx0QHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcdFx0QSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgYWZ0ZXIgY29tcG9uZW50IGlzIHJlLXJlbmRlcmVkLlxuICAqXHRAcHJpdmF0ZVxuICAqL1xuXHRmb3JjZVVwZGF0ZTogZnVuY3Rpb24gZm9yY2VVcGRhdGUoY2FsbGJhY2spIHtcblx0XHRpZiAoY2FsbGJhY2spICh0aGlzLl9yZW5kZXJDYWxsYmFja3MgPSB0aGlzLl9yZW5kZXJDYWxsYmFja3MgfHwgW10pLnB1c2goY2FsbGJhY2spO1xuXHRcdHJlbmRlckNvbXBvbmVudCh0aGlzLCAyKTtcblx0fSxcblxuXG5cdC8qKiBBY2NlcHRzIGBwcm9wc2AgYW5kIGBzdGF0ZWAsIGFuZCByZXR1cm5zIGEgbmV3IFZpcnR1YWwgRE9NIHRyZWUgdG8gYnVpbGQuXG4gICpcdFZpcnR1YWwgRE9NIGlzIGdlbmVyYWxseSBjb25zdHJ1Y3RlZCB2aWEgW0pTWF0oaHR0cDovL2phc29uZm9ybWF0LmNvbS93dGYtaXMtanN4KS5cbiAgKlx0QHBhcmFtIHtvYmplY3R9IHByb3BzXHRcdFByb3BzIChlZzogSlNYIGF0dHJpYnV0ZXMpIHJlY2VpdmVkIGZyb20gcGFyZW50IGVsZW1lbnQvY29tcG9uZW50XG4gICpcdEBwYXJhbSB7b2JqZWN0fSBzdGF0ZVx0XHRUaGUgY29tcG9uZW50J3MgY3VycmVudCBzdGF0ZVxuICAqXHRAcGFyYW0ge29iamVjdH0gY29udGV4dFx0XHRDb250ZXh0IG9iamVjdCAoaWYgYSBwYXJlbnQgY29tcG9uZW50IGhhcyBwcm92aWRlZCBjb250ZXh0KVxuICAqXHRAcmV0dXJucyBWTm9kZVxuICAqL1xuXHRyZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHt9XG59KTtcblxuLyoqIFJlbmRlciBKU1ggaW50byBhIGBwYXJlbnRgIEVsZW1lbnQuXG4gKlx0QHBhcmFtIHtWTm9kZX0gdm5vZGVcdFx0QSAoSlNYKSBWTm9kZSB0byByZW5kZXJcbiAqXHRAcGFyYW0ge0VsZW1lbnR9IHBhcmVudFx0XHRET00gZWxlbWVudCB0byByZW5kZXIgaW50b1xuICpcdEBwYXJhbSB7RWxlbWVudH0gW21lcmdlXVx0QXR0ZW1wdCB0byByZS11c2UgYW4gZXhpc3RpbmcgRE9NIHRyZWUgcm9vdGVkIGF0IGBtZXJnZWBcbiAqXHRAcHVibGljXG4gKlxuICpcdEBleGFtcGxlXG4gKlx0Ly8gcmVuZGVyIGEgZGl2IGludG8gPGJvZHk+OlxuICpcdHJlbmRlcig8ZGl2IGlkPVwiaGVsbG9cIj5oZWxsbyE8L2Rpdj4sIGRvY3VtZW50LmJvZHkpO1xuICpcbiAqXHRAZXhhbXBsZVxuICpcdC8vIHJlbmRlciBhIFwiVGhpbmdcIiBjb21wb25lbnQgaW50byAjZm9vOlxuICpcdGNvbnN0IFRoaW5nID0gKHsgbmFtZSB9KSA9PiA8c3Bhbj57IG5hbWUgfTwvc3Bhbj47XG4gKlx0cmVuZGVyKDxUaGluZyBuYW1lPVwib25lXCIgLz4sIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb28nKSk7XG4gKi9cbmZ1bmN0aW9uIHJlbmRlcih2bm9kZSwgcGFyZW50LCBtZXJnZSkge1xuICByZXR1cm4gZGlmZihtZXJnZSwgdm5vZGUsIHt9LCBmYWxzZSwgcGFyZW50LCBmYWxzZSk7XG59XG5cbnZhciBwcmVhY3QgPSB7XG5cdGg6IGgsXG5cdGNyZWF0ZUVsZW1lbnQ6IGgsXG5cdGNsb25lRWxlbWVudDogY2xvbmVFbGVtZW50LFxuXHRDb21wb25lbnQ6IENvbXBvbmVudCxcblx0cmVuZGVyOiByZW5kZXIsXG5cdHJlcmVuZGVyOiByZXJlbmRlcixcblx0b3B0aW9uczogb3B0aW9uc1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcHJlYWN0O1xuZXhwb3J0IHsgaCwgaCBhcyBjcmVhdGVFbGVtZW50LCBjbG9uZUVsZW1lbnQsIENvbXBvbmVudCwgcmVuZGVyLCByZXJlbmRlciwgb3B0aW9ucyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJlYWN0LmVzbS5qcy5tYXBcbiIsIm1vZHVsZS5leHBvcnRzID0gd2luZG93LmNvbnRlbnRmdWxFeHRlbnNpb247IiwiaW1wb3J0IHsgSUN1cnJlbnRGaWVsZCB9IGZyb20gJ2NvbnRlbnRmdWwtdWktZXh0ZW5zaW9ucy1zZGsnXG5pbXBvcnQge0NvbXBvbmVudCwgaH0gZnJvbSAncHJlYWN0J1xuXG5leHBvcnQgaW50ZXJmYWNlIElTbHVnRm9ybVByb3BzIHtcbiAgc2x1Zzogc3RyaW5nXG4gIHBhcmVudFNsdWc6IHN0cmluZ1xuXG4gIG9uQ2hhbmdlPzogKHRoaXM6IFNsdWdGb3JtLCBldmVudDogeyBvbGRWYWx1ZTogc3RyaW5nLCBuZXdWYWx1ZTogc3RyaW5nIH0pID0+IHZvaWRcbn1cblxuZXhwb3J0IGNsYXNzIFNsdWdGb3JtIGV4dGVuZHMgQ29tcG9uZW50PElTbHVnRm9ybVByb3BzLCB7dmFsdWU6IHN0cmluZ30+IHtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpXG5cbiAgICB0aGlzLm9uRm9jdXNHYWluZWQgPSB0aGlzLm9uRm9jdXNHYWluZWQuYmluZCh0aGlzKVxuICAgIHRoaXMub25Gb2N1c0xvc3QgPSB0aGlzLm9uRm9jdXNMb3N0LmJpbmQodGhpcylcbiAgICB0aGlzLmRlbWFuZEZvY3VzID0gdGhpcy5kZW1hbmRGb2N1cy5iaW5kKHRoaXMpXG4gIH1cblxuICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB2YWx1ZTogdGhpcy5wcm9wcy5zbHVnLFxuICAgIH0pXG4gIH1cblxuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtwYXJlbnRTbHVnfSA9IHRoaXMucHJvcHNcbiAgICBsZXQge3NsdWd9ID0gdGhpcy5wcm9wc1xuICAgIGlmICh0aGlzLnN0YXRlICYmIHRoaXMuc3RhdGUudmFsdWUgJiYgdGhpcy5zdGF0ZS52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICBzbHVnID0gdGhpcy5zdGF0ZS52YWx1ZVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGlkPVwic2x1Z0Zvcm1cIiBjbGFzcz1cImNmLWZvcm0taW5wdXRcIiBvbkNsaWNrPXt0aGlzLmRlbWFuZEZvY3VzfT5cbiAgICAgICAgeyBwYXJlbnRTbHVnICYmXG4gICAgICAgICAgPHNwYW4gaWQ9XCJwYXJlbnRcIiB0aXRsZT1cIlRoaXMgY29tZXMgZnJvbSB0aGUgcGFyZW50IHBhZ2UgYW5kIHlvdSBjYW4ndCBjaGFuZ2UgaXQgaGVyZS5cIj5cbiAgICAgICAgICAgIHtwYXJlbnRTbHVnfS9cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIH1cbiAgICAgICAgPHNwYW4gaWQ9XCJzbHVnXCIgY29udGVudEVkaXRhYmxlIG9uRm9jdXM9e3RoaXMub25Gb2N1c0dhaW5lZH0gb25CbHVyPXt0aGlzLm9uRm9jdXNMb3N0fT5cbiAgICAgICAgICB7c2x1Z31cbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG5cbiAgcHJpdmF0ZSBkZW1hbmRGb2N1cygpIHtcbiAgICAkKCcjc2x1Z0Zvcm0gI3NsdWcnKS5mb2N1cygpXG4gIH1cblxuICBwcml2YXRlIG9uRm9jdXNMb3N0KGV2dDogYW55KSB7XG4gICAgY29uc3QgbmV3VGV4dCA9IGV2dC50YXJnZXQudGV4dENvbnRlbnRcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuc3RhdGUudmFsdWVcbiAgICBpZiAobmV3VGV4dCAhPSBvbGRWYWx1ZSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZhbHVlOiBuZXdUZXh0IH0pXG5cbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UuY2FsbCh0aGlzLCB7XG4gICAgICAgIG9sZFZhbHVlLFxuICAgICAgICBuZXdWYWx1ZTogbmV3VGV4dCxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvbkZvY3VzR2FpbmVkKGV2dDogYW55KSB7XG4gICAgY29uc29sZS5sb2coJ2ZvY3VzR2FpbmVkJywgZXZ0KVxuICB9XG59XG4iLCIvLyBwb2x5ZmlsbHNcbi8vIHRzbGludDpkaXNhYmxlOm5vLW5hbWVzcGFjZVxuZGVjbGFyZSBnbG9iYWwge1xuICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvc3RhcnRzV2l0aFxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6aW50ZXJmYWNlLW5hbWVcbiAgaW50ZXJmYWNlIFN0cmluZyB7XG4gICAgc3RhcnRzV2l0aChzZWFyY2g6IHN0cmluZywgcG9zPzogbnVtYmVyKTogYm9vbGVhblxuICB9XG59XG5cbmlmICghU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoKSB7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpvbmx5LWFycm93LWZ1bmN0aW9uc1xuICBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGggPSBmdW5jdGlvbihzZWFyY2g6IHN0cmluZywgcG9zOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5zdWJzdHIoIXBvcyB8fCBwb3MgPCAwID8gMCA6ICtwb3MsIHNlYXJjaC5sZW5ndGgpID09PSBzZWFyY2hcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gd2FpdChtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSgpLCBtcyksXG4gIClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhdGhKb2luKC4uLnBhdGhBcnI6IHN0cmluZ1tdKSB7XG4gIHJldHVybiBwYXRoQXJyLmpvaW4oJy8nKS5yZXBsYWNlKC9cXC97Mix9LywgJy8nKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYmFzZW5hbWUocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgcGF0aFBhcnRzID0gcGF0aC5zcGxpdCgnLycpXG4gIHJldHVybiBwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmltU3RhcnQodG9UcmltOiBzdHJpbmcsIHZhbHVlVG9SZW1vdmU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghdG9UcmltIHx8ICF2YWx1ZVRvUmVtb3ZlKSB7XG4gICAgcmV0dXJuIHRvVHJpbVxuICB9XG4gIHdoaWxlICh0b1RyaW0uc3RhcnRzV2l0aCh2YWx1ZVRvUmVtb3ZlKSkge1xuICAgIHRvVHJpbSA9IHRvVHJpbS5zdWJzdHJpbmcodmFsdWVUb1JlbW92ZS5sZW5ndGgpXG4gIH1cbiAgcmV0dXJuIHRvVHJpbVxufVxuIiwiaW1wb3J0ICogYXMgY29udGVudGZ1bEV4dGVuc2lvbiBmcm9tICdjb250ZW50ZnVsLXVpLWV4dGVuc2lvbnMtc2RrJ1xuaW1wb3J0IHtJQ29udGVudGZ1bEV4dGVuc2lvblNkaywgSUxpbmt9IGZyb20gJ2NvbnRlbnRmdWwtdWktZXh0ZW5zaW9ucy1zZGsnXG5pbXBvcnQge0NvbXBvbmVudCwgaCwgcmVuZGVyfSBmcm9tICdwcmVhY3QnXG5cbmltcG9ydCB7IHBhdGhKb2luLCB0cmltU3RhcnQgfSBmcm9tICcuLi9saWIvdXRpbHMnXG5pbXBvcnQge1NsdWdGb3JtfSBmcm9tICcuL3NsdWctZm9ybSdcblxuZGVjbGFyZSBmdW5jdGlvbiByZXF1aXJlKG1vZHVsZTogc3RyaW5nKTogYW55XG5jb25zdCBzdHlsZXMgPSByZXF1aXJlKCcuL3N0eWxlcy5zY3NzJylcblxuaWYgKGNvbnRlbnRmdWxFeHRlbnNpb24pIHtcbiAgY29udGVudGZ1bEV4dGVuc2lvbi5pbml0KChleHRlbnNpb24pID0+IHtcbiAgICByZW5kZXIoPFNsdWdFZGl0b3Igey4uLmV4dGVuc2lvbn0gLz4sXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVhY3Qtcm9vdCcpKVxuICB9KVxufVxuXG5pbnRlcmZhY2UgSUFwcFN0YXRlIHtcbiAgZmllbGRWYWx1ZTogc3RyaW5nXG4gIHBhcmVudFNsdWc6IHN0cmluZ1xuICBlcnJvcnM6IHN0cmluZ1tdXG4gIHdhcm5pbmdzOiBzdHJpbmdbXVxufVxuXG5leHBvcnQgY2xhc3MgU2x1Z0VkaXRvciBleHRlbmRzIENvbXBvbmVudDxJQ29udGVudGZ1bEV4dGVuc2lvblNkaywgSUFwcFN0YXRlPiB7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMub25TbHVnQ2hhbmdlID0gdGhpcy5vblNsdWdDaGFuZ2UuYmluZCh0aGlzKVxuICB9XG5cbiAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZmllbGRWYWx1ZTogdGhpcy5wcm9wcy5maWVsZC5nZXRWYWx1ZSgpLFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICB9KVxuXG4gICAgdGhpcy5wcm9wcy5maWVsZC5vblZhbHVlQ2hhbmdlZChhc3luYyAobmV3VmFsdWUpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBmaWVsZFZhbHVlOiBuZXdWYWx1ZSxcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMub25Nb3VudCgpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHF1ZXJ5aW5nIScsIGVycilcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBlcnJvcnM6IFtlcnIudG9TdHJpbmcoKV0sXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBwdWJsaWMgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZmllbGRWYWx1ZSwgcGFyZW50U2x1ZywgZXJyb3JzLCB3YXJuaW5ncyB9ID0gdGhpcy5zdGF0ZVxuXG4gICAgcmV0dXJuIDxkaXY+XG4gICAgICA8U2x1Z0Zvcm0gc2x1Zz17ZmllbGRWYWx1ZX1cbiAgICAgICAgcGFyZW50U2x1Zz17cGFyZW50U2x1Z31cbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25TbHVnQ2hhbmdlfSAvPlxuXG4gICAgICB7ZXJyb3JzICYmIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3JzXCI+XG4gICAgICAgIHtlcnJvcnMubWFwKChlcnIpID0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlcnJvclwiPntlcnJ9PC9kaXY+LFxuICAgICAgICApfVxuICAgICAgICA8L2Rpdj59XG4gICAgICB7d2FybmluZ3MgJiYgPGRpdiBjbGFzc05hbWU9XCJ3YXJuaW5nc1wiPlxuICAgICAgICB7d2FybmluZ3MubWFwKCh3KSA9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3JcIiBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogd319PjwvZGl2PixcbiAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+fVxuICAgIDwvZGl2PlxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBvblNsdWdDaGFuZ2UoZXZlbnQ6IHsgb2xkVmFsdWU6IHN0cmluZywgbmV3VmFsdWU6IHN0cmluZyB9KSB7XG4gICAgY29uc3QgbmV3VmFsdWUgPSBwYXRoSm9pbih0aGlzLnN0YXRlLnBhcmVudFNsdWcsIGV2ZW50Lm5ld1ZhbHVlKVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBmaWVsZFZhbHVlOiBldmVudC5uZXdWYWx1ZSxcbiAgICB9KVxuICAgIGlmIChhd2FpdCB0aGlzLnZhbGlkYXRlTmV3U2x1ZyhldmVudC5uZXdWYWx1ZSkpIHtcbiAgICAgIGF3YWl0IHRoaXMucHJvcHMuZmllbGQuc2V0VmFsdWUobmV3VmFsdWUpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZU5ld1NsdWcodmFsdWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXVxuICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdXG5cbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA9PSAwKSB7XG4gICAgICBlcnJvcnMucHVzaChgVGhlIHNsdWcgY2Fubm90IGJlIGVtcHR5IWApXG4gICAgfSBlbHNlIGlmICgvXFxzLy50ZXN0KHZhbHVlKSkge1xuICAgICAgZXJyb3JzLnB1c2goYFRoZSBzbHVnIG11c3Qgbm90IGNvbnRhaW4gd2hpdGVzcGFjZSFgKVxuICAgIH1cblxuICAgIGNvbnN0IHsgZmllbGRzIH0gPSB0aGlzLnByb3BzLmVudHJ5XG4gICAgaWYgKGZpZWxkcy5zdWJwYWdlcykge1xuICAgICAgY29uc3Qgc3VicGFnZXMgPSBmaWVsZHMuc3VicGFnZXMuZ2V0VmFsdWUoKVxuICAgICAgaWYgKHN1YnBhZ2VzICYmIHN1YnBhZ2VzLmxlbmd0aCA+IDApIHtcblxuICAgICAgICB3YXJuaW5ncy5wdXNoKC4uLmF3YWl0IHRoaXMuY2hlY2tTdWJwYWdlcyhzdWJwYWdlcykpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBlcnJvcnMsXG4gICAgICB3YXJuaW5ncyxcbiAgICB9KVxuXG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnByb3BzLmZpZWxkLnNldEludmFsaWQodHJ1ZSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByb3BzLmZpZWxkLnNldEludmFsaWQoZmFsc2UpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tTdWJwYWdlcyhzdWJwYWdlczogQXJyYXk8SUxpbms8J0VudHJ5Jz4+KTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IHtwYXJlbnRTbHVnLCBmaWVsZFZhbHVlfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB7IHNwYWNlLCBlbnZpcm9ubWVudCB9ID0gdGhpcy5wcm9wcy5lbnRyeS5nZXRTeXMoKVxuXG4gICAgY29uc3QgZW50cmllcyA9IGF3YWl0IHRoaXMucHJvcHMuc3BhY2UuZ2V0RW50cmllcyh7XG4gICAgICAnY29udGVudF90eXBlJzogJ3BhZ2UnLFxuICAgICAgJ3N5cy5pZFtpbl0nOiBzdWJwYWdlcy5tYXAoKGxpbmspID0+IGxpbmsuc3lzLmlkKS5qb2luKCcsJyksXG4gICAgfSlcblxuICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IGVudHJpZXMuaXRlbXMuZmlsdGVyKChpKSA9PiBpKS5tYXAoKHBhZ2UpID0+IHtcbiAgICAgIGlmICghcGFnZSB8fCAhcGFnZS5maWVsZHMgfHwgIXBhZ2UuZmllbGRzLnNsdWcgfHwgIXBhZ2UuZmllbGRzLnNsdWdbJ2VuLVVTJ10pIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNsdWcgPSBwYWdlLmZpZWxkcy5zbHVnWydlbi1VUyddIGFzIHN0cmluZ1xuICAgICAgaWYgKHNsdWcuc3RhcnRzV2l0aChwYXRoSm9pbihwYXJlbnRTbHVnLCBmaWVsZFZhbHVlKSkpIHtcbiAgICAgICAgY29uc29sZS5sb2coYHN1YnBhZ2UgJHtzbHVnfSBpcyBnb29kYClcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ2JhZCBwYWdlJywgZmllbGRWYWx1ZSwgcGFnZS5maWVsZHMpXG5cbiAgICAgIGNvbnN0IHRpdGxlID0gcGFnZS5maWVsZHMudGl0bGUgJiYgcGFnZS5maWVsZHMudGl0bGVbJ2VuLVVTJ11cbiAgICAgIHJldHVybiBgPGEgaHJlZj1cImh0dHBzOi8vYXBwLmNvbnRlbnRmdWwuY29tL3NwYWNlcy8ke3NwYWNlLnN5cy5pZH1gICtcbiAgICAgICAgYC9lbnRyaWVzLyR7cGFnZS5zeXMuaWR9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+JHt0aXRsZSB8fCBwYWdlLnN5cy5pZH08L2E+IGAgK1xuICAgICAgICBgKCR7c2x1Z30pYFxuICAgIH0pLmZpbHRlcigodykgPT4gdylcblxuICAgIGlmICh3YXJuaW5ncy5sZW5ndGggPT0gMCkge1xuICAgICAgcmV0dXJuIHdhcm5pbmdzXG4gICAgfVxuXG4gICAgcmV0dXJuIFtcbiAgICAgIGBCZSBzdXJlIHRvIHVwZGF0ZSB0aGVzZSBzdWJwYWdlcyEgVGhlaXIgc2x1Z3MgYXJlIHdyb25nOjxici8+ICBgICtcbiAgICAgIHdhcm5pbmdzLmpvaW4oJyw8YnIvPicpXVxuXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG9uTW91bnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gZmluZCB0aGUgcGFnZSBwb2ludGluZyB0byB0aGlzIHBhZ2VcbiAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgdGhpcy5wcm9wcy5zcGFjZS5nZXRFbnRyaWVzKHtcbiAgICAgICdjb250ZW50X3R5cGUnOiAncGFnZScsXG4gICAgICAnZmllbGRzLnN1YnBhZ2VzLnN5cy5pZCc6IHRoaXMucHJvcHMuZW50cnkuZ2V0U3lzKCkuaWQsXG4gICAgfSlcblxuICAgIGlmIChlbnRyaWVzLml0ZW1zLmxlbmd0aCA8PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBwYXJlbnRTbHVnID0gZW50cmllcy5pdGVtc1swXS5maWVsZHMuc2x1Z1snZW4tVVMnXVxuICAgIGxldCBmaWVsZFZhbHVlID0gdGhpcy5zdGF0ZS5maWVsZFZhbHVlXG4gICAgZmllbGRWYWx1ZSA9IHRyaW1TdGFydChmaWVsZFZhbHVlLCBwYXJlbnRTbHVnKVxuICAgIGZpZWxkVmFsdWUgPSB0cmltU3RhcnQoZmllbGRWYWx1ZSwgJy8nKVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBwYXJlbnRTbHVnLFxuICAgICAgZmllbGRWYWx1ZSxcbiAgICB9KVxuXG4gICAgYXdhaXQgdGhpcy52YWxpZGF0ZU5ld1NsdWcoZmllbGRWYWx1ZSlcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0dVSUQoc3RyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gNzRjZjEzNjMtZGVmMS00NTk2LTg2ODMtMjY4YWYzOTdlYWE1XG4gIHJldHVybiAvXihcXHcrXFwtKXs0fVxcdyskLy50ZXN0KHN0cilcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=</script></body>
</html>